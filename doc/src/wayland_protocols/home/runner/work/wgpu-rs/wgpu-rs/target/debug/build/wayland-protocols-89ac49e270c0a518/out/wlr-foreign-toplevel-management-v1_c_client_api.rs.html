<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Source of the Rust file `/home/runner/work/wgpu-rs/wgpu-rs/target/debug/build/wayland-protocols-89ac49e270c0a518/out/wlr-foreign-toplevel-management-v1_c_client_api.rs`."><meta name="keywords" content="rust, rustlang, rust-lang"><title>wlr-foreign-toplevel-management-v1_c_client_api.rs - source</title><link rel="stylesheet" type="text/css" href="../../../../../../../../../../../../normalize.css"><link rel="stylesheet" type="text/css" href="../../../../../../../../../../../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../../../../../../../../../../../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../../../../../../../../../../../../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../../../../../../../../../../../../ayu.css" disabled ><script id="default-settings"></script><script src="../../../../../../../../../../../../storage.js"></script><noscript><link rel="stylesheet" href="../../../../../../../../../../../../noscript.css"></noscript><link rel="icon" type="image/svg+xml" href="../../../../../../../../../../../../favicon.svg">
<link rel="alternate icon" type="image/png" href="../../../../../../../../../../../../favicon-16x16.png">
<link rel="alternate icon" type="image/png" href="../../../../../../../../../../../../favicon-32x32.png"><style type="text/css">#crate-search{background-image:url("../../../../../../../../../../../../down-arrow.svg");}</style></head><body class="rustdoc source"><!--[if lte IE 8]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu">&#9776;</div><a href='../../../../../../../../../../../../wayland_protocols/index.html'><div class='logo-container rust-logo'><img src='../../../../../../../../../../../../rust-logo.png' alt='logo'></div></a></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu"><img src="../../../../../../../../../../../../brush.svg" width="18" alt="Pick another theme!"></button><div id="theme-choices" role="menu"></div></div><script src="../../../../../../../../../../../../theme.js"></script><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><span class="help-button">?</span>
                <a id="settings-menu" href="../../../../../../../../../../../../settings.html"><img src="../../../../../../../../../../../../wheel.svg" width="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><pre class="line-numbers"><span id="1">1</span>
</pre><div class="example-wrap"><pre class="rust ">
# [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;list and control opened apps\n\nThe purpose of this protocol is to enable the creation of taskbars\nand docks by providing them with a list of opened applications and\nletting them request certain actions on them, like maximizing, etc.\n\nAfter a client binds the zwlr_foreign_toplevel_manager_v1, each opened\ntoplevel window will be sent via the toplevel event&quot;</span> ] <span class="kw">pub</span> <span class="kw">mod</span> <span class="ident">zwlr_foreign_toplevel_manager_v1</span> { <span class="kw">use</span> <span class="kw">super</span> :: { <span class="ident">Proxy</span> , <span class="ident">NewProxy</span> , <span class="ident">AnonymousObject</span> , <span class="ident">Interface</span> , <span class="ident">MessageGroup</span> , <span class="ident">MessageDesc</span> , <span class="ident">ArgumentType</span> , <span class="ident">Object</span> , <span class="ident">Message</span> , <span class="ident">Argument</span> , <span class="ident">ObjectMetadata</span> } ; <span class="kw">use</span> <span class="kw">super</span> :: <span class="ident">sys</span> :: <span class="ident">common</span> :: { <span class="ident">wl_argument</span> , <span class="ident">wl_interface</span> , <span class="ident">wl_array</span> } ; <span class="kw">use</span> <span class="kw">super</span> :: <span class="ident">sys</span> :: <span class="ident">client</span> :: <span class="op">*</span> ; <span class="kw">pub</span> <span class="kw">enum</span> <span class="ident">Request</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;stop sending events\n\nIndicates the client no longer wishes to receive events for new toplevels.\nHowever the compositor may emit further toplevel_created events, until\nthe finished event is emitted.\n\nThe client must not send any more requests after this one.&quot;</span> ] <span class="ident">Stop</span> , } <span class="kw">impl</span> <span class="kw">super</span> :: <span class="ident">MessageGroup</span> <span class="kw">for</span> <span class="ident">Request</span> { <span class="kw">const</span> <span class="ident">MESSAGES</span> : <span class="op">&amp;</span> <span class="lifetime">&#39;static</span> [ <span class="kw">super</span> :: <span class="ident">MessageDesc</span> ] <span class="op">=</span> <span class="op">&amp;</span> [ <span class="kw">super</span> :: <span class="ident">MessageDesc</span> { <span class="ident">name</span> : <span class="string">&quot;stop&quot;</span> , <span class="ident">since</span> : <span class="number">1</span> , <span class="ident">signature</span> : <span class="op">&amp;</span> [ ] , } , ] ; <span class="kw">type</span> <span class="ident">Map</span> <span class="op">=</span> <span class="kw">super</span> :: <span class="ident">ProxyMap</span> ; <span class="kw">fn</span> <span class="ident">is_destructor</span> ( <span class="op">&amp;</span> <span class="self">self</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">bool</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { <span class="kw">_</span> <span class="op">=</span><span class="op">&gt;</span> <span class="bool-val">false</span> , } } <span class="kw">fn</span> <span class="ident">opcode</span> ( <span class="op">&amp;</span> <span class="self">self</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">u16</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { <span class="ident">Request</span> :: <span class="ident">Stop</span> <span class="op">=</span><span class="op">&gt;</span> <span class="number">0</span> , } } <span class="kw">fn</span> <span class="ident">child</span> <span class="op">&lt;</span> <span class="ident">Meta</span> : <span class="ident">ObjectMetadata</span> <span class="op">&gt;</span> ( <span class="ident">opcode</span> : <span class="ident">u16</span> , <span class="ident">version</span> : <span class="ident">u32</span> , <span class="ident">meta</span> : <span class="op">&amp;</span> <span class="ident">Meta</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="ident">Object</span> <span class="op">&lt;</span> <span class="ident">Meta</span> <span class="op">&gt;</span><span class="op">&gt;</span> { <span class="kw">match</span> <span class="ident">opcode</span> { <span class="kw">_</span> <span class="op">=</span><span class="op">&gt;</span> <span class="prelude-val">None</span> , } } <span class="kw">fn</span> <span class="ident">from_raw</span> ( <span class="ident">msg</span> : <span class="ident">Message</span> , <span class="ident">map</span> : <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="self">Self</span> :: <span class="ident">Map</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Result</span> <span class="op">&lt;</span> <span class="self">Self</span> , ( ) <span class="op">&gt;</span> { <span class="ident">panic</span> <span class="op">!</span> ( <span class="string">&quot;Request::from_raw can not be used Client-side.&quot;</span> ) } <span class="kw">fn</span> <span class="ident">into_raw</span> ( <span class="self">self</span> , <span class="ident">sender_id</span> : <span class="ident">u32</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">Message</span> { <span class="kw">match</span> <span class="self">self</span> { <span class="ident">Request</span> :: <span class="ident">Stop</span> <span class="op">=</span><span class="op">&gt;</span> <span class="ident">Message</span> { <span class="ident">sender_id</span> : <span class="ident">sender_id</span> , <span class="ident">opcode</span> : <span class="number">0</span> , <span class="ident">args</span> : <span class="ident">vec</span> <span class="op">!</span> [ ] , } , } } <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_raw_c</span> ( <span class="ident">obj</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> , <span class="ident">opcode</span> : <span class="ident">u32</span> , <span class="ident">args</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">wl_argument</span> , ) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Result</span> <span class="op">&lt;</span> <span class="ident">Request</span> , ( ) <span class="op">&gt;</span> { <span class="ident">panic</span> <span class="op">!</span> ( <span class="string">&quot;Request::from_raw_c can not be used Client-side.&quot;</span> ) } <span class="kw">fn</span> <span class="ident">as_raw_c_in</span> <span class="op">&lt;</span> <span class="ident">F</span> , <span class="ident">T</span> <span class="op">&gt;</span> ( <span class="self">self</span> , <span class="ident">f</span> : <span class="ident">F</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">T</span> <span class="kw">where</span> <span class="ident">F</span> : <span class="ident">FnOnce</span> ( <span class="ident">u32</span> , <span class="op">&amp;</span> <span class="kw-2">mut</span> [ <span class="ident">wl_argument</span> ] ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">T</span> { <span class="kw">match</span> <span class="self">self</span> { <span class="ident">Request</span> :: <span class="ident">Stop</span> <span class="op">=</span><span class="op">&gt;</span> { <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span> : [ <span class="ident">wl_argument</span> ; <span class="number">0</span> ] <span class="op">=</span> <span class="kw">unsafe</span> { :: <span class="ident">std</span> :: <span class="ident">mem</span> :: <span class="ident">zeroed</span> ( ) } ; <span class="ident">f</span> ( <span class="number">0</span> , <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span> ) } , } } } <span class="kw">pub</span> <span class="kw">enum</span> <span class="ident">Event</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;a toplevel has been created\n\nThis event is emitted whenever a new toplevel window is created. It\nis emitted for all toplevels, regardless of the app that has created\nthem.\n\nAll initial details of the toplevel(title, app_id, states, etc.) will\nbe sent immediately after this event via the corresponding events in\nzwlr_foreign_toplevel_handle_v1.&quot;</span> ] <span class="ident">Toplevel</span> { <span class="ident">toplevel</span> : <span class="ident">NewProxy</span> <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">zwlr_foreign_toplevel_handle_v1</span> :: <span class="ident">ZwlrForeignToplevelHandleV1</span> <span class="op">&gt;</span> , } , # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;the compositor has finished with the toplevel manager\n\nThis event indicates that the compositor is done sending events to the\nzwlr_foreign_toplevel_manager_v1. The server will destroy the object\nimmediately after sending this request, so it will become invalid and\nthe client should free any resources associated with it.&quot;</span> ] <span class="ident">Finished</span> , } <span class="kw">impl</span> <span class="kw">super</span> :: <span class="ident">MessageGroup</span> <span class="kw">for</span> <span class="ident">Event</span> { <span class="kw">const</span> <span class="ident">MESSAGES</span> : <span class="op">&amp;</span> <span class="lifetime">&#39;static</span> [ <span class="kw">super</span> :: <span class="ident">MessageDesc</span> ] <span class="op">=</span> <span class="op">&amp;</span> [ <span class="kw">super</span> :: <span class="ident">MessageDesc</span> { <span class="ident">name</span> : <span class="string">&quot;toplevel&quot;</span> , <span class="ident">since</span> : <span class="number">1</span> , <span class="ident">signature</span> : <span class="op">&amp;</span> [ <span class="kw">super</span> :: <span class="ident">ArgumentType</span> :: <span class="ident">NewId</span> , ] , } , <span class="kw">super</span> :: <span class="ident">MessageDesc</span> { <span class="ident">name</span> : <span class="string">&quot;finished&quot;</span> , <span class="ident">since</span> : <span class="number">1</span> , <span class="ident">signature</span> : <span class="op">&amp;</span> [ ] , } , ] ; <span class="kw">type</span> <span class="ident">Map</span> <span class="op">=</span> <span class="kw">super</span> :: <span class="ident">ProxyMap</span> ; <span class="kw">fn</span> <span class="ident">is_destructor</span> ( <span class="op">&amp;</span> <span class="self">self</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">bool</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { <span class="kw">_</span> <span class="op">=</span><span class="op">&gt;</span> <span class="bool-val">false</span> , } } <span class="kw">fn</span> <span class="ident">opcode</span> ( <span class="op">&amp;</span> <span class="self">self</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">u16</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { <span class="ident">Event</span> :: <span class="ident">Toplevel</span> { .. } <span class="op">=</span><span class="op">&gt;</span> <span class="number">0</span> , <span class="ident">Event</span> :: <span class="ident">Finished</span> <span class="op">=</span><span class="op">&gt;</span> <span class="number">1</span> , } } <span class="kw">fn</span> <span class="ident">child</span> <span class="op">&lt;</span> <span class="ident">Meta</span> : <span class="ident">ObjectMetadata</span> <span class="op">&gt;</span> ( <span class="ident">opcode</span> : <span class="ident">u16</span> , <span class="ident">version</span> : <span class="ident">u32</span> , <span class="ident">meta</span> : <span class="op">&amp;</span> <span class="ident">Meta</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="ident">Object</span> <span class="op">&lt;</span> <span class="ident">Meta</span> <span class="op">&gt;</span><span class="op">&gt;</span> { <span class="kw">match</span> <span class="ident">opcode</span> { <span class="number">0</span> <span class="op">=</span><span class="op">&gt;</span> <span class="prelude-val">Some</span> ( <span class="ident">Object</span> :: <span class="ident">from_interface</span> :: <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">zwlr_foreign_toplevel_handle_v1</span> :: <span class="ident">ZwlrForeignToplevelHandleV1</span> <span class="op">&gt;</span> ( <span class="ident">version</span> , <span class="ident">meta</span> . <span class="ident">child</span> ( ) , ) ) , <span class="kw">_</span> <span class="op">=</span><span class="op">&gt;</span> <span class="prelude-val">None</span> , } } <span class="kw">fn</span> <span class="ident">from_raw</span> ( <span class="ident">msg</span> : <span class="ident">Message</span> , <span class="ident">map</span> : <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="self">Self</span> :: <span class="ident">Map</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Result</span> <span class="op">&lt;</span> <span class="self">Self</span> , ( ) <span class="op">&gt;</span> { <span class="kw">match</span> <span class="ident">msg</span> . <span class="ident">opcode</span> { <span class="number">0</span> <span class="op">=</span><span class="op">&gt;</span> { <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">args</span> <span class="op">=</span> <span class="ident">msg</span> . <span class="ident">args</span> . <span class="ident">into_iter</span> ( ) ; <span class="prelude-val">Ok</span> ( <span class="ident">Event</span> :: <span class="ident">Toplevel</span> { <span class="ident">toplevel</span> : { <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span> ( <span class="ident">Argument</span> :: <span class="ident">NewId</span> ( <span class="ident">val</span> ) ) <span class="op">=</span> <span class="ident">args</span> . <span class="ident">next</span> ( ) { <span class="ident">map</span> . <span class="ident">get_new</span> ( <span class="ident">val</span> ) . <span class="ident">ok_or</span> ( ( ) ) <span class="question-mark">?</span> } <span class="kw">else</span> { <span class="kw">return</span> <span class="prelude-val">Err</span> ( ( ) ) ; } } , } ) } , <span class="number">1</span> <span class="op">=</span><span class="op">&gt;</span> <span class="prelude-val">Ok</span> ( <span class="ident">Event</span> :: <span class="ident">Finished</span> ) , <span class="kw">_</span> <span class="op">=</span><span class="op">&gt;</span> <span class="prelude-val">Err</span> ( ( ) ) , } } <span class="kw">fn</span> <span class="ident">into_raw</span> ( <span class="self">self</span> , <span class="ident">sender_id</span> : <span class="ident">u32</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">Message</span> { <span class="ident">panic</span> <span class="op">!</span> ( <span class="string">&quot;Event::into_raw can not be used Client-side.&quot;</span> ) } <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_raw_c</span> ( <span class="ident">obj</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> , <span class="ident">opcode</span> : <span class="ident">u32</span> , <span class="ident">args</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">wl_argument</span> , ) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Result</span> <span class="op">&lt;</span> <span class="ident">Event</span> , ( ) <span class="op">&gt;</span> { <span class="kw">match</span> <span class="ident">opcode</span> { <span class="number">0</span> <span class="op">=</span><span class="op">&gt;</span> { <span class="kw">let</span> <span class="ident">_args</span> <span class="op">=</span> :: <span class="ident">std</span> :: <span class="ident">slice</span> :: <span class="ident">from_raw_parts</span> ( <span class="ident">args</span> , <span class="number">1</span> ) ; <span class="prelude-val">Ok</span> ( <span class="ident">Event</span> :: <span class="ident">Toplevel</span> { <span class="ident">toplevel</span> : <span class="ident">NewProxy</span> :: <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">zwlr_foreign_toplevel_handle_v1</span> :: <span class="ident">ZwlrForeignToplevelHandleV1</span> <span class="op">&gt;</span> :: <span class="ident">from_c_ptr</span> ( <span class="ident">_args</span> [ <span class="number">0</span> ] . <span class="ident">o</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="kw">_</span> ) , } ) } , <span class="number">1</span> <span class="op">=</span><span class="op">&gt;</span> { <span class="prelude-val">Ok</span> ( <span class="ident">Event</span> :: <span class="ident">Finished</span> ) } , <span class="kw">_</span> <span class="op">=</span><span class="op">&gt;</span> <span class="kw">return</span> <span class="prelude-val">Err</span> ( ( ) ) , } } <span class="kw">fn</span> <span class="ident">as_raw_c_in</span> <span class="op">&lt;</span> <span class="ident">F</span> , <span class="ident">T</span> <span class="op">&gt;</span> ( <span class="self">self</span> , <span class="ident">f</span> : <span class="ident">F</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">T</span> <span class="kw">where</span> <span class="ident">F</span> : <span class="ident">FnOnce</span> ( <span class="ident">u32</span> , <span class="op">&amp;</span> <span class="kw-2">mut</span> [ <span class="ident">wl_argument</span> ] ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">T</span> { <span class="ident">panic</span> <span class="op">!</span> ( <span class="string">&quot;Event::as_raw_c_in can not be used Client-side.&quot;</span> ) } } <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">ZwlrForeignToplevelManagerV1</span> ; <span class="kw">impl</span> <span class="ident">Interface</span> <span class="kw">for</span> <span class="ident">ZwlrForeignToplevelManagerV1</span> { <span class="kw">type</span> <span class="ident">Request</span> <span class="op">=</span> <span class="ident">Request</span> ; <span class="kw">type</span> <span class="ident">Event</span> <span class="op">=</span> <span class="ident">Event</span> ; <span class="kw">const</span> <span class="ident">NAME</span> : <span class="op">&amp;</span> <span class="lifetime">&#39;static</span> <span class="ident">str</span> <span class="op">=</span> <span class="string">&quot;zwlr_foreign_toplevel_manager_v1&quot;</span> ; <span class="kw">const</span> <span class="ident">VERSION</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">1</span> ; <span class="kw">fn</span> <span class="ident">c_interface</span> ( ) <span class="op">-</span><span class="op">&gt;</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">wl_interface</span> { <span class="kw">unsafe</span> { <span class="op">&amp;</span> <span class="kw">super</span> :: <span class="kw">super</span> :: <span class="ident">c_interfaces</span> :: <span class="ident">zwlr_foreign_toplevel_manager_v1_interface</span> } } } <span class="kw">pub</span> <span class="kw">trait</span> <span class="ident">RequestsTrait</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;stop sending events\n\nIndicates the client no longer wishes to receive events for new toplevels.\nHowever the compositor may emit further toplevel_created events, until\nthe finished event is emitted.\n\nThe client must not send any more requests after this one.&quot;</span> ] <span class="kw">fn</span> <span class="ident">stop</span> ( <span class="op">&amp;</span> <span class="self">self</span> , ) <span class="op">-</span><span class="op">&gt;</span> ( ) ; } <span class="kw">impl</span> <span class="ident">RequestsTrait</span> <span class="kw">for</span> <span class="ident">Proxy</span> <span class="op">&lt;</span> <span class="ident">ZwlrForeignToplevelManagerV1</span> <span class="op">&gt;</span> { <span class="kw">fn</span> <span class="ident">stop</span> ( <span class="op">&amp;</span> <span class="self">self</span> , ) <span class="op">-</span><span class="op">&gt;</span> ( ) { <span class="kw">let</span> <span class="ident">msg</span> <span class="op">=</span> <span class="ident">Request</span> :: <span class="ident">Stop</span> ; <span class="self">self</span> . <span class="ident">send</span> ( <span class="ident">msg</span> ) ; } } # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; The minimal object version supporting this request&quot;</span> ] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">REQ_STOP_SINCE</span> : <span class="ident">u16</span> <span class="op">=</span> <span class="number">1u16</span> ; # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; The minimal object version supporting this event&quot;</span> ] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">EVT_TOPLEVEL_SINCE</span> : <span class="ident">u16</span> <span class="op">=</span> <span class="number">1u16</span> ; # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; The minimal object version supporting this event&quot;</span> ] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">EVT_FINISHED_SINCE</span> : <span class="ident">u16</span> <span class="op">=</span> <span class="number">1u16</span> ; } # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;an opened toplevel\n\nA zwlr_foreign_toplevel_handle_v1 object represents an opened toplevel\nwindow. Each app may have multiple opened toplevels.\n\nEach toplevel has a list of outputs it is visible on, conveyed to the\nclient with the output_enter and output_leave events.&quot;</span> ] <span class="kw">pub</span> <span class="kw">mod</span> <span class="ident">zwlr_foreign_toplevel_handle_v1</span> { <span class="kw">use</span> <span class="kw">super</span> :: { <span class="ident">Proxy</span> , <span class="ident">NewProxy</span> , <span class="ident">AnonymousObject</span> , <span class="ident">Interface</span> , <span class="ident">MessageGroup</span> , <span class="ident">MessageDesc</span> , <span class="ident">ArgumentType</span> , <span class="ident">Object</span> , <span class="ident">Message</span> , <span class="ident">Argument</span> , <span class="ident">ObjectMetadata</span> } ; <span class="kw">use</span> <span class="kw">super</span> :: <span class="ident">sys</span> :: <span class="ident">common</span> :: { <span class="ident">wl_argument</span> , <span class="ident">wl_interface</span> , <span class="ident">wl_array</span> } ; <span class="kw">use</span> <span class="kw">super</span> :: <span class="ident">sys</span> :: <span class="ident">client</span> :: <span class="op">*</span> ; # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;types of states on the toplevel\n\nThe different states that a toplevel can have. These have the same meaning\nas the states with the same names defined in xdg-toplevel&quot;</span> ] # [ <span class="ident">repr</span> ( <span class="ident">u32</span> ) ] # [ <span class="ident">derive</span> ( <span class="ident">Copy</span> , <span class="ident">Clone</span> , <span class="ident">Debug</span> , <span class="ident">PartialEq</span> ) ] <span class="kw">pub</span> <span class="kw">enum</span> <span class="ident">State</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;the toplevel is maximized&quot;</span> ] <span class="ident">Maximized</span> <span class="op">=</span> <span class="number">0</span> , # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;the toplevel is minimized&quot;</span> ] <span class="ident">Minimized</span> <span class="op">=</span> <span class="number">1</span> , # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;the toplevel is active&quot;</span> ] <span class="ident">Activated</span> <span class="op">=</span> <span class="number">2</span> , } <span class="kw">impl</span> <span class="ident">State</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">from_raw</span> ( <span class="ident">n</span> : <span class="ident">u32</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="ident">State</span> <span class="op">&gt;</span> { <span class="kw">match</span> <span class="ident">n</span> { <span class="number">0</span> <span class="op">=</span><span class="op">&gt;</span> <span class="prelude-val">Some</span> ( <span class="ident">State</span> :: <span class="ident">Maximized</span> ) , <span class="number">1</span> <span class="op">=</span><span class="op">&gt;</span> <span class="prelude-val">Some</span> ( <span class="ident">State</span> :: <span class="ident">Minimized</span> ) , <span class="number">2</span> <span class="op">=</span><span class="op">&gt;</span> <span class="prelude-val">Some</span> ( <span class="ident">State</span> :: <span class="ident">Activated</span> ) , <span class="kw">_</span> <span class="op">=</span><span class="op">&gt;</span> <span class="prelude-ty">Option</span> :: <span class="prelude-val">None</span> } } <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">to_raw</span> ( <span class="op">&amp;</span> <span class="self">self</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">u32</span> { <span class="op">*</span> <span class="self">self</span> <span class="kw">as</span> <span class="ident">u32</span> } } # [ <span class="ident">repr</span> ( <span class="ident">u32</span> ) ] # [ <span class="ident">derive</span> ( <span class="ident">Copy</span> , <span class="ident">Clone</span> , <span class="ident">Debug</span> , <span class="ident">PartialEq</span> ) ] <span class="kw">pub</span> <span class="kw">enum</span> <span class="ident">Error</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;the provided rectangle is invalid&quot;</span> ] <span class="ident">InvalidRectangle</span> <span class="op">=</span> <span class="number">0</span> , } <span class="kw">impl</span> <span class="ident">Error</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">from_raw</span> ( <span class="ident">n</span> : <span class="ident">u32</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="ident">Error</span> <span class="op">&gt;</span> { <span class="kw">match</span> <span class="ident">n</span> { <span class="number">0</span> <span class="op">=</span><span class="op">&gt;</span> <span class="prelude-val">Some</span> ( <span class="ident">Error</span> :: <span class="ident">InvalidRectangle</span> ) , <span class="kw">_</span> <span class="op">=</span><span class="op">&gt;</span> <span class="prelude-ty">Option</span> :: <span class="prelude-val">None</span> } } <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">to_raw</span> ( <span class="op">&amp;</span> <span class="self">self</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">u32</span> { <span class="op">*</span> <span class="self">self</span> <span class="kw">as</span> <span class="ident">u32</span> } } <span class="kw">pub</span> <span class="kw">enum</span> <span class="ident">Request</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;requests that the toplevel be maximized\n\nRequests that the toplevel be maximized. If the maximized state actually\nchanges, this will be indicated by the state event.&quot;</span> ] <span class="ident">SetMaximized</span> , # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;requests that the toplevel be unmaximized\n\nRequests that the toplevel be unmaximized. If the maximized state actually\nchanges, this will be indicated by the state event.&quot;</span> ] <span class="ident">UnsetMaximized</span> , # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;requests that the toplevel be minimized\n\nRequests that the toplevel be minimized. If the minimized state actually\nchanges, this will be indicated by the state event.&quot;</span> ] <span class="ident">SetMinimized</span> , # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;requests that the toplevel be unminimized\n\nRequests that the toplevel be unminimized. If the minimized state actually\nchanges, this will be indicated by the state event.&quot;</span> ] <span class="ident">UnsetMinimized</span> , # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;activate the toplevel\n\nRequest that this toplevel be activated on the given seat.\nThere is no guarantee the toplevel will be actually activated.&quot;</span> ] <span class="ident">Activate</span> { <span class="ident">seat</span> : <span class="ident">Proxy</span> <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">wl_seat</span> :: <span class="ident">WlSeat</span> <span class="op">&gt;</span> , } , # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;request that the toplevel be closed\n\nSend a request to the toplevel to close itself. The compositor would\ntypically use a shell-specific method to carry out this request, for\nexample by sending the xdg_toplevel.close event. However, this gives\nno guarantees the toplevel will actually be destroyed. If and when\nthis happens, the zwlr_foreign_toplevel_handle_v1.closed event will\nbe emitted.&quot;</span> ] <span class="ident">Close</span> , # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;the rectangle which represents the toplevel\n\nThe rectangle of the surface specified in this request corresponds to\nthe place where the app using this protocol represents the given toplevel.\nIt can be used by the compositor as a hint for some operations, e.g\nminimizing. The client is however not required to set this, in which\ncase the compositor is free to decide some default value.\n\nIf the client specifies more than one rectangle, only the last one is\nconsidered.\n\nThe dimensions are given in surface-local coordinates.\nSetting width=height=0 removes the already-set rectangle.&quot;</span> ] <span class="ident">SetRectangle</span> { <span class="ident">surface</span> : <span class="ident">Proxy</span> <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">wl_surface</span> :: <span class="ident">WlSurface</span> <span class="op">&gt;</span> , <span class="ident">x</span> : <span class="ident">i32</span> , <span class="ident">y</span> : <span class="ident">i32</span> , <span class="ident">width</span> : <span class="ident">i32</span> , <span class="ident">height</span> : <span class="ident">i32</span> , } , # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;destroy the zwlr_foreign_toplevel_handle_v1 object\n\nDestroys the zwlr_foreign_toplevel_handle_v1 object.\n\nThis request should be called either when the client does not want to\nuse the toplevel anymore or after the closed event to finalize the\ndestruction of the object.\n\nThis is a destructor, once sent this object cannot be used any longer.&quot;</span> ] <span class="ident">Destroy</span> , } <span class="kw">impl</span> <span class="kw">super</span> :: <span class="ident">MessageGroup</span> <span class="kw">for</span> <span class="ident">Request</span> { <span class="kw">const</span> <span class="ident">MESSAGES</span> : <span class="op">&amp;</span> <span class="lifetime">&#39;static</span> [ <span class="kw">super</span> :: <span class="ident">MessageDesc</span> ] <span class="op">=</span> <span class="op">&amp;</span> [ <span class="kw">super</span> :: <span class="ident">MessageDesc</span> { <span class="ident">name</span> : <span class="string">&quot;set_maximized&quot;</span> , <span class="ident">since</span> : <span class="number">1</span> , <span class="ident">signature</span> : <span class="op">&amp;</span> [ ] , } , <span class="kw">super</span> :: <span class="ident">MessageDesc</span> { <span class="ident">name</span> : <span class="string">&quot;unset_maximized&quot;</span> , <span class="ident">since</span> : <span class="number">1</span> , <span class="ident">signature</span> : <span class="op">&amp;</span> [ ] , } , <span class="kw">super</span> :: <span class="ident">MessageDesc</span> { <span class="ident">name</span> : <span class="string">&quot;set_minimized&quot;</span> , <span class="ident">since</span> : <span class="number">1</span> , <span class="ident">signature</span> : <span class="op">&amp;</span> [ ] , } , <span class="kw">super</span> :: <span class="ident">MessageDesc</span> { <span class="ident">name</span> : <span class="string">&quot;unset_minimized&quot;</span> , <span class="ident">since</span> : <span class="number">1</span> , <span class="ident">signature</span> : <span class="op">&amp;</span> [ ] , } , <span class="kw">super</span> :: <span class="ident">MessageDesc</span> { <span class="ident">name</span> : <span class="string">&quot;activate&quot;</span> , <span class="ident">since</span> : <span class="number">1</span> , <span class="ident">signature</span> : <span class="op">&amp;</span> [ <span class="kw">super</span> :: <span class="ident">ArgumentType</span> :: <span class="ident">Object</span> , ] , } , <span class="kw">super</span> :: <span class="ident">MessageDesc</span> { <span class="ident">name</span> : <span class="string">&quot;close&quot;</span> , <span class="ident">since</span> : <span class="number">1</span> , <span class="ident">signature</span> : <span class="op">&amp;</span> [ ] , } , <span class="kw">super</span> :: <span class="ident">MessageDesc</span> { <span class="ident">name</span> : <span class="string">&quot;set_rectangle&quot;</span> , <span class="ident">since</span> : <span class="number">1</span> , <span class="ident">signature</span> : <span class="op">&amp;</span> [ <span class="kw">super</span> :: <span class="ident">ArgumentType</span> :: <span class="ident">Object</span> , <span class="kw">super</span> :: <span class="ident">ArgumentType</span> :: <span class="ident">Int</span> , <span class="kw">super</span> :: <span class="ident">ArgumentType</span> :: <span class="ident">Int</span> , <span class="kw">super</span> :: <span class="ident">ArgumentType</span> :: <span class="ident">Int</span> , <span class="kw">super</span> :: <span class="ident">ArgumentType</span> :: <span class="ident">Int</span> , ] , } , <span class="kw">super</span> :: <span class="ident">MessageDesc</span> { <span class="ident">name</span> : <span class="string">&quot;destroy&quot;</span> , <span class="ident">since</span> : <span class="number">1</span> , <span class="ident">signature</span> : <span class="op">&amp;</span> [ ] , } , ] ; <span class="kw">type</span> <span class="ident">Map</span> <span class="op">=</span> <span class="kw">super</span> :: <span class="ident">ProxyMap</span> ; <span class="kw">fn</span> <span class="ident">is_destructor</span> ( <span class="op">&amp;</span> <span class="self">self</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">bool</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { <span class="ident">Request</span> :: <span class="ident">Destroy</span> <span class="op">=</span><span class="op">&gt;</span> <span class="bool-val">true</span> , <span class="kw">_</span> <span class="op">=</span><span class="op">&gt;</span> <span class="bool-val">false</span> , } } <span class="kw">fn</span> <span class="ident">opcode</span> ( <span class="op">&amp;</span> <span class="self">self</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">u16</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { <span class="ident">Request</span> :: <span class="ident">SetMaximized</span> <span class="op">=</span><span class="op">&gt;</span> <span class="number">0</span> , <span class="ident">Request</span> :: <span class="ident">UnsetMaximized</span> <span class="op">=</span><span class="op">&gt;</span> <span class="number">1</span> , <span class="ident">Request</span> :: <span class="ident">SetMinimized</span> <span class="op">=</span><span class="op">&gt;</span> <span class="number">2</span> , <span class="ident">Request</span> :: <span class="ident">UnsetMinimized</span> <span class="op">=</span><span class="op">&gt;</span> <span class="number">3</span> , <span class="ident">Request</span> :: <span class="ident">Activate</span> { .. } <span class="op">=</span><span class="op">&gt;</span> <span class="number">4</span> , <span class="ident">Request</span> :: <span class="ident">Close</span> <span class="op">=</span><span class="op">&gt;</span> <span class="number">5</span> , <span class="ident">Request</span> :: <span class="ident">SetRectangle</span> { .. } <span class="op">=</span><span class="op">&gt;</span> <span class="number">6</span> , <span class="ident">Request</span> :: <span class="ident">Destroy</span> <span class="op">=</span><span class="op">&gt;</span> <span class="number">7</span> , } } <span class="kw">fn</span> <span class="ident">child</span> <span class="op">&lt;</span> <span class="ident">Meta</span> : <span class="ident">ObjectMetadata</span> <span class="op">&gt;</span> ( <span class="ident">opcode</span> : <span class="ident">u16</span> , <span class="ident">version</span> : <span class="ident">u32</span> , <span class="ident">meta</span> : <span class="op">&amp;</span> <span class="ident">Meta</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="ident">Object</span> <span class="op">&lt;</span> <span class="ident">Meta</span> <span class="op">&gt;</span><span class="op">&gt;</span> { <span class="kw">match</span> <span class="ident">opcode</span> { <span class="kw">_</span> <span class="op">=</span><span class="op">&gt;</span> <span class="prelude-val">None</span> , } } <span class="kw">fn</span> <span class="ident">from_raw</span> ( <span class="ident">msg</span> : <span class="ident">Message</span> , <span class="ident">map</span> : <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="self">Self</span> :: <span class="ident">Map</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Result</span> <span class="op">&lt;</span> <span class="self">Self</span> , ( ) <span class="op">&gt;</span> { <span class="ident">panic</span> <span class="op">!</span> ( <span class="string">&quot;Request::from_raw can not be used Client-side.&quot;</span> ) } <span class="kw">fn</span> <span class="ident">into_raw</span> ( <span class="self">self</span> , <span class="ident">sender_id</span> : <span class="ident">u32</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">Message</span> { <span class="kw">match</span> <span class="self">self</span> { <span class="ident">Request</span> :: <span class="ident">SetMaximized</span> <span class="op">=</span><span class="op">&gt;</span> <span class="ident">Message</span> { <span class="ident">sender_id</span> : <span class="ident">sender_id</span> , <span class="ident">opcode</span> : <span class="number">0</span> , <span class="ident">args</span> : <span class="ident">vec</span> <span class="op">!</span> [ ] , } , <span class="ident">Request</span> :: <span class="ident">UnsetMaximized</span> <span class="op">=</span><span class="op">&gt;</span> <span class="ident">Message</span> { <span class="ident">sender_id</span> : <span class="ident">sender_id</span> , <span class="ident">opcode</span> : <span class="number">1</span> , <span class="ident">args</span> : <span class="ident">vec</span> <span class="op">!</span> [ ] , } , <span class="ident">Request</span> :: <span class="ident">SetMinimized</span> <span class="op">=</span><span class="op">&gt;</span> <span class="ident">Message</span> { <span class="ident">sender_id</span> : <span class="ident">sender_id</span> , <span class="ident">opcode</span> : <span class="number">2</span> , <span class="ident">args</span> : <span class="ident">vec</span> <span class="op">!</span> [ ] , } , <span class="ident">Request</span> :: <span class="ident">UnsetMinimized</span> <span class="op">=</span><span class="op">&gt;</span> <span class="ident">Message</span> { <span class="ident">sender_id</span> : <span class="ident">sender_id</span> , <span class="ident">opcode</span> : <span class="number">3</span> , <span class="ident">args</span> : <span class="ident">vec</span> <span class="op">!</span> [ ] , } , <span class="ident">Request</span> :: <span class="ident">Activate</span> { <span class="ident">seat</span> } <span class="op">=</span><span class="op">&gt;</span> <span class="ident">Message</span> { <span class="ident">sender_id</span> : <span class="ident">sender_id</span> , <span class="ident">opcode</span> : <span class="number">4</span> , <span class="ident">args</span> : <span class="ident">vec</span> <span class="op">!</span> [ <span class="ident">Argument</span> :: <span class="ident">Object</span> ( <span class="ident">seat</span> . <span class="ident">id</span> ( ) ) , ] , } , <span class="ident">Request</span> :: <span class="ident">Close</span> <span class="op">=</span><span class="op">&gt;</span> <span class="ident">Message</span> { <span class="ident">sender_id</span> : <span class="ident">sender_id</span> , <span class="ident">opcode</span> : <span class="number">5</span> , <span class="ident">args</span> : <span class="ident">vec</span> <span class="op">!</span> [ ] , } , <span class="ident">Request</span> :: <span class="ident">SetRectangle</span> { <span class="ident">surface</span> , <span class="ident">x</span> , <span class="ident">y</span> , <span class="ident">width</span> , <span class="ident">height</span> } <span class="op">=</span><span class="op">&gt;</span> <span class="ident">Message</span> { <span class="ident">sender_id</span> : <span class="ident">sender_id</span> , <span class="ident">opcode</span> : <span class="number">6</span> , <span class="ident">args</span> : <span class="ident">vec</span> <span class="op">!</span> [ <span class="ident">Argument</span> :: <span class="ident">Object</span> ( <span class="ident">surface</span> . <span class="ident">id</span> ( ) ) , <span class="ident">Argument</span> :: <span class="ident">Int</span> ( <span class="ident">x</span> ) , <span class="ident">Argument</span> :: <span class="ident">Int</span> ( <span class="ident">y</span> ) , <span class="ident">Argument</span> :: <span class="ident">Int</span> ( <span class="ident">width</span> ) , <span class="ident">Argument</span> :: <span class="ident">Int</span> ( <span class="ident">height</span> ) , ] , } , <span class="ident">Request</span> :: <span class="ident">Destroy</span> <span class="op">=</span><span class="op">&gt;</span> <span class="ident">Message</span> { <span class="ident">sender_id</span> : <span class="ident">sender_id</span> , <span class="ident">opcode</span> : <span class="number">7</span> , <span class="ident">args</span> : <span class="ident">vec</span> <span class="op">!</span> [ ] , } , } } <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_raw_c</span> ( <span class="ident">obj</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> , <span class="ident">opcode</span> : <span class="ident">u32</span> , <span class="ident">args</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">wl_argument</span> , ) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Result</span> <span class="op">&lt;</span> <span class="ident">Request</span> , ( ) <span class="op">&gt;</span> { <span class="ident">panic</span> <span class="op">!</span> ( <span class="string">&quot;Request::from_raw_c can not be used Client-side.&quot;</span> ) } <span class="kw">fn</span> <span class="ident">as_raw_c_in</span> <span class="op">&lt;</span> <span class="ident">F</span> , <span class="ident">T</span> <span class="op">&gt;</span> ( <span class="self">self</span> , <span class="ident">f</span> : <span class="ident">F</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">T</span> <span class="kw">where</span> <span class="ident">F</span> : <span class="ident">FnOnce</span> ( <span class="ident">u32</span> , <span class="op">&amp;</span> <span class="kw-2">mut</span> [ <span class="ident">wl_argument</span> ] ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">T</span> { <span class="kw">match</span> <span class="self">self</span> { <span class="ident">Request</span> :: <span class="ident">SetMaximized</span> <span class="op">=</span><span class="op">&gt;</span> { <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span> : [ <span class="ident">wl_argument</span> ; <span class="number">0</span> ] <span class="op">=</span> <span class="kw">unsafe</span> { :: <span class="ident">std</span> :: <span class="ident">mem</span> :: <span class="ident">zeroed</span> ( ) } ; <span class="ident">f</span> ( <span class="number">0</span> , <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span> ) } , <span class="ident">Request</span> :: <span class="ident">UnsetMaximized</span> <span class="op">=</span><span class="op">&gt;</span> { <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span> : [ <span class="ident">wl_argument</span> ; <span class="number">0</span> ] <span class="op">=</span> <span class="kw">unsafe</span> { :: <span class="ident">std</span> :: <span class="ident">mem</span> :: <span class="ident">zeroed</span> ( ) } ; <span class="ident">f</span> ( <span class="number">1</span> , <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span> ) } , <span class="ident">Request</span> :: <span class="ident">SetMinimized</span> <span class="op">=</span><span class="op">&gt;</span> { <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span> : [ <span class="ident">wl_argument</span> ; <span class="number">0</span> ] <span class="op">=</span> <span class="kw">unsafe</span> { :: <span class="ident">std</span> :: <span class="ident">mem</span> :: <span class="ident">zeroed</span> ( ) } ; <span class="ident">f</span> ( <span class="number">2</span> , <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span> ) } , <span class="ident">Request</span> :: <span class="ident">UnsetMinimized</span> <span class="op">=</span><span class="op">&gt;</span> { <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span> : [ <span class="ident">wl_argument</span> ; <span class="number">0</span> ] <span class="op">=</span> <span class="kw">unsafe</span> { :: <span class="ident">std</span> :: <span class="ident">mem</span> :: <span class="ident">zeroed</span> ( ) } ; <span class="ident">f</span> ( <span class="number">3</span> , <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span> ) } , <span class="ident">Request</span> :: <span class="ident">Activate</span> { <span class="ident">seat</span> } <span class="op">=</span><span class="op">&gt;</span> { <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span> : [ <span class="ident">wl_argument</span> ; <span class="number">1</span> ] <span class="op">=</span> <span class="kw">unsafe</span> { :: <span class="ident">std</span> :: <span class="ident">mem</span> :: <span class="ident">zeroed</span> ( ) } ; <span class="ident">_args_array</span> [ <span class="number">0</span> ] . <span class="ident">o</span> <span class="op">=</span> <span class="ident">seat</span> . <span class="ident">c_ptr</span> ( ) <span class="kw">as</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="kw">_</span> ; <span class="ident">f</span> ( <span class="number">4</span> , <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span> ) } , <span class="ident">Request</span> :: <span class="ident">Close</span> <span class="op">=</span><span class="op">&gt;</span> { <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span> : [ <span class="ident">wl_argument</span> ; <span class="number">0</span> ] <span class="op">=</span> <span class="kw">unsafe</span> { :: <span class="ident">std</span> :: <span class="ident">mem</span> :: <span class="ident">zeroed</span> ( ) } ; <span class="ident">f</span> ( <span class="number">5</span> , <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span> ) } , <span class="ident">Request</span> :: <span class="ident">SetRectangle</span> { <span class="ident">surface</span> , <span class="ident">x</span> , <span class="ident">y</span> , <span class="ident">width</span> , <span class="ident">height</span> } <span class="op">=</span><span class="op">&gt;</span> { <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span> : [ <span class="ident">wl_argument</span> ; <span class="number">5</span> ] <span class="op">=</span> <span class="kw">unsafe</span> { :: <span class="ident">std</span> :: <span class="ident">mem</span> :: <span class="ident">zeroed</span> ( ) } ; <span class="ident">_args_array</span> [ <span class="number">0</span> ] . <span class="ident">o</span> <span class="op">=</span> <span class="ident">surface</span> . <span class="ident">c_ptr</span> ( ) <span class="kw">as</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="kw">_</span> ; <span class="ident">_args_array</span> [ <span class="number">1</span> ] . <span class="ident">i</span> <span class="op">=</span> <span class="ident">x</span> ; <span class="ident">_args_array</span> [ <span class="number">2</span> ] . <span class="ident">i</span> <span class="op">=</span> <span class="ident">y</span> ; <span class="ident">_args_array</span> [ <span class="number">3</span> ] . <span class="ident">i</span> <span class="op">=</span> <span class="ident">width</span> ; <span class="ident">_args_array</span> [ <span class="number">4</span> ] . <span class="ident">i</span> <span class="op">=</span> <span class="ident">height</span> ; <span class="ident">f</span> ( <span class="number">6</span> , <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span> ) } , <span class="ident">Request</span> :: <span class="ident">Destroy</span> <span class="op">=</span><span class="op">&gt;</span> { <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span> : [ <span class="ident">wl_argument</span> ; <span class="number">0</span> ] <span class="op">=</span> <span class="kw">unsafe</span> { :: <span class="ident">std</span> :: <span class="ident">mem</span> :: <span class="ident">zeroed</span> ( ) } ; <span class="ident">f</span> ( <span class="number">7</span> , <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span> ) } , } } } <span class="kw">pub</span> <span class="kw">enum</span> <span class="ident">Event</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;title change\n\nThis event is emitted whenever the title of the toplevel changes.&quot;</span> ] <span class="ident">Title</span> { <span class="ident">title</span> : <span class="ident">String</span> , } , # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;app-id change\n\nThis event is emitted whenever the app-id of the toplevel changes.&quot;</span> ] <span class="ident">AppId</span> { <span class="ident">app_id</span> : <span class="ident">String</span> , } , # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;toplevel entered an output\n\nThis event is emitted whenever the toplevel becomes visible on\nthe given output. A toplevel may be visible on multiple outputs.&quot;</span> ] <span class="ident">OutputEnter</span> { <span class="ident">output</span> : <span class="ident">Proxy</span> <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">wl_output</span> :: <span class="ident">WlOutput</span> <span class="op">&gt;</span> , } , # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;toplevel left an output\n\nThis event is emitted whenever the toplevel stops being visible on\nthe given output. It is guaranteed that an entered-output event\nwith the same output has been emitted before this event.&quot;</span> ] <span class="ident">OutputLeave</span> { <span class="ident">output</span> : <span class="ident">Proxy</span> <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">wl_output</span> :: <span class="ident">WlOutput</span> <span class="op">&gt;</span> , } , # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;the toplevel state changed\n\nThis event is emitted immediately after the zlw_foreign_toplevel_handle_v1\nis created and each time the toplevel state changes, either because of a\ncompositor action or because of a request in this protocol.&quot;</span> ] <span class="ident">State</span> { <span class="ident">state</span> : <span class="ident">Vec</span> <span class="op">&lt;</span> <span class="ident">u8</span> <span class="op">&gt;</span> , } , # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;all information about the toplevel has been sent\n\nThis event is sent after all changes in the toplevel state have been\nsent.\n\nThis allows changes to the zwlr_foreign_toplevel_handle_v1 properties\nto be seen as atomic, even if they happen via multiple events.&quot;</span> ] <span class="ident">Done</span> , # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;this toplevel has been destroyed\n\nThis event means the toplevel has been destroyed. It is guaranteed there\nwon&#39;t be any more events for this zwlr_foreign_toplevel_handle_v1. The\ntoplevel itself becomes inert so any requests will be ignored except the\ndestroy request.&quot;</span> ] <span class="ident">Closed</span> , } <span class="kw">impl</span> <span class="kw">super</span> :: <span class="ident">MessageGroup</span> <span class="kw">for</span> <span class="ident">Event</span> { <span class="kw">const</span> <span class="ident">MESSAGES</span> : <span class="op">&amp;</span> <span class="lifetime">&#39;static</span> [ <span class="kw">super</span> :: <span class="ident">MessageDesc</span> ] <span class="op">=</span> <span class="op">&amp;</span> [ <span class="kw">super</span> :: <span class="ident">MessageDesc</span> { <span class="ident">name</span> : <span class="string">&quot;title&quot;</span> , <span class="ident">since</span> : <span class="number">1</span> , <span class="ident">signature</span> : <span class="op">&amp;</span> [ <span class="kw">super</span> :: <span class="ident">ArgumentType</span> :: <span class="ident">Str</span> , ] , } , <span class="kw">super</span> :: <span class="ident">MessageDesc</span> { <span class="ident">name</span> : <span class="string">&quot;app_id&quot;</span> , <span class="ident">since</span> : <span class="number">1</span> , <span class="ident">signature</span> : <span class="op">&amp;</span> [ <span class="kw">super</span> :: <span class="ident">ArgumentType</span> :: <span class="ident">Str</span> , ] , } , <span class="kw">super</span> :: <span class="ident">MessageDesc</span> { <span class="ident">name</span> : <span class="string">&quot;output_enter&quot;</span> , <span class="ident">since</span> : <span class="number">1</span> , <span class="ident">signature</span> : <span class="op">&amp;</span> [ <span class="kw">super</span> :: <span class="ident">ArgumentType</span> :: <span class="ident">Object</span> , ] , } , <span class="kw">super</span> :: <span class="ident">MessageDesc</span> { <span class="ident">name</span> : <span class="string">&quot;output_leave&quot;</span> , <span class="ident">since</span> : <span class="number">1</span> , <span class="ident">signature</span> : <span class="op">&amp;</span> [ <span class="kw">super</span> :: <span class="ident">ArgumentType</span> :: <span class="ident">Object</span> , ] , } , <span class="kw">super</span> :: <span class="ident">MessageDesc</span> { <span class="ident">name</span> : <span class="string">&quot;state&quot;</span> , <span class="ident">since</span> : <span class="number">1</span> , <span class="ident">signature</span> : <span class="op">&amp;</span> [ <span class="kw">super</span> :: <span class="ident">ArgumentType</span> :: <span class="ident">Array</span> , ] , } , <span class="kw">super</span> :: <span class="ident">MessageDesc</span> { <span class="ident">name</span> : <span class="string">&quot;done&quot;</span> , <span class="ident">since</span> : <span class="number">1</span> , <span class="ident">signature</span> : <span class="op">&amp;</span> [ ] , } , <span class="kw">super</span> :: <span class="ident">MessageDesc</span> { <span class="ident">name</span> : <span class="string">&quot;closed&quot;</span> , <span class="ident">since</span> : <span class="number">1</span> , <span class="ident">signature</span> : <span class="op">&amp;</span> [ ] , } , ] ; <span class="kw">type</span> <span class="ident">Map</span> <span class="op">=</span> <span class="kw">super</span> :: <span class="ident">ProxyMap</span> ; <span class="kw">fn</span> <span class="ident">is_destructor</span> ( <span class="op">&amp;</span> <span class="self">self</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">bool</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { <span class="kw">_</span> <span class="op">=</span><span class="op">&gt;</span> <span class="bool-val">false</span> , } } <span class="kw">fn</span> <span class="ident">opcode</span> ( <span class="op">&amp;</span> <span class="self">self</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">u16</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { <span class="ident">Event</span> :: <span class="ident">Title</span> { .. } <span class="op">=</span><span class="op">&gt;</span> <span class="number">0</span> , <span class="ident">Event</span> :: <span class="ident">AppId</span> { .. } <span class="op">=</span><span class="op">&gt;</span> <span class="number">1</span> , <span class="ident">Event</span> :: <span class="ident">OutputEnter</span> { .. } <span class="op">=</span><span class="op">&gt;</span> <span class="number">2</span> , <span class="ident">Event</span> :: <span class="ident">OutputLeave</span> { .. } <span class="op">=</span><span class="op">&gt;</span> <span class="number">3</span> , <span class="ident">Event</span> :: <span class="ident">State</span> { .. } <span class="op">=</span><span class="op">&gt;</span> <span class="number">4</span> , <span class="ident">Event</span> :: <span class="ident">Done</span> <span class="op">=</span><span class="op">&gt;</span> <span class="number">5</span> , <span class="ident">Event</span> :: <span class="ident">Closed</span> <span class="op">=</span><span class="op">&gt;</span> <span class="number">6</span> , } } <span class="kw">fn</span> <span class="ident">child</span> <span class="op">&lt;</span> <span class="ident">Meta</span> : <span class="ident">ObjectMetadata</span> <span class="op">&gt;</span> ( <span class="ident">opcode</span> : <span class="ident">u16</span> , <span class="ident">version</span> : <span class="ident">u32</span> , <span class="ident">meta</span> : <span class="op">&amp;</span> <span class="ident">Meta</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="ident">Object</span> <span class="op">&lt;</span> <span class="ident">Meta</span> <span class="op">&gt;</span><span class="op">&gt;</span> { <span class="kw">match</span> <span class="ident">opcode</span> { <span class="kw">_</span> <span class="op">=</span><span class="op">&gt;</span> <span class="prelude-val">None</span> , } } <span class="kw">fn</span> <span class="ident">from_raw</span> ( <span class="ident">msg</span> : <span class="ident">Message</span> , <span class="ident">map</span> : <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="self">Self</span> :: <span class="ident">Map</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Result</span> <span class="op">&lt;</span> <span class="self">Self</span> , ( ) <span class="op">&gt;</span> { <span class="kw">match</span> <span class="ident">msg</span> . <span class="ident">opcode</span> { <span class="number">0</span> <span class="op">=</span><span class="op">&gt;</span> { <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">args</span> <span class="op">=</span> <span class="ident">msg</span> . <span class="ident">args</span> . <span class="ident">into_iter</span> ( ) ; <span class="prelude-val">Ok</span> ( <span class="ident">Event</span> :: <span class="ident">Title</span> { <span class="ident">title</span> : { <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span> ( <span class="ident">Argument</span> :: <span class="ident">Str</span> ( <span class="ident">val</span> ) ) <span class="op">=</span> <span class="ident">args</span> . <span class="ident">next</span> ( ) { <span class="kw">let</span> <span class="ident">s</span> <span class="op">=</span> <span class="ident">String</span> :: <span class="ident">from_utf8</span> ( <span class="ident">val</span> . <span class="ident">into_bytes</span> ( ) ) . <span class="ident">unwrap_or_else</span> ( <span class="op">|</span> <span class="ident">e</span> <span class="op">|</span> <span class="ident">String</span> :: <span class="ident">from_utf8_lossy</span> ( <span class="op">&amp;</span> <span class="ident">e</span> . <span class="ident">into_bytes</span> ( ) ) . <span class="ident">into</span> ( ) ) ; <span class="ident">s</span> } <span class="kw">else</span> { <span class="kw">return</span> <span class="prelude-val">Err</span> ( ( ) ) ; } } , } ) } , <span class="number">1</span> <span class="op">=</span><span class="op">&gt;</span> { <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">args</span> <span class="op">=</span> <span class="ident">msg</span> . <span class="ident">args</span> . <span class="ident">into_iter</span> ( ) ; <span class="prelude-val">Ok</span> ( <span class="ident">Event</span> :: <span class="ident">AppId</span> { <span class="ident">app_id</span> : { <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span> ( <span class="ident">Argument</span> :: <span class="ident">Str</span> ( <span class="ident">val</span> ) ) <span class="op">=</span> <span class="ident">args</span> . <span class="ident">next</span> ( ) { <span class="kw">let</span> <span class="ident">s</span> <span class="op">=</span> <span class="ident">String</span> :: <span class="ident">from_utf8</span> ( <span class="ident">val</span> . <span class="ident">into_bytes</span> ( ) ) . <span class="ident">unwrap_or_else</span> ( <span class="op">|</span> <span class="ident">e</span> <span class="op">|</span> <span class="ident">String</span> :: <span class="ident">from_utf8_lossy</span> ( <span class="op">&amp;</span> <span class="ident">e</span> . <span class="ident">into_bytes</span> ( ) ) . <span class="ident">into</span> ( ) ) ; <span class="ident">s</span> } <span class="kw">else</span> { <span class="kw">return</span> <span class="prelude-val">Err</span> ( ( ) ) ; } } , } ) } , <span class="number">2</span> <span class="op">=</span><span class="op">&gt;</span> { <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">args</span> <span class="op">=</span> <span class="ident">msg</span> . <span class="ident">args</span> . <span class="ident">into_iter</span> ( ) ; <span class="prelude-val">Ok</span> ( <span class="ident">Event</span> :: <span class="ident">OutputEnter</span> { <span class="ident">output</span> : { <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span> ( <span class="ident">Argument</span> :: <span class="ident">Object</span> ( <span class="ident">val</span> ) ) <span class="op">=</span> <span class="ident">args</span> . <span class="ident">next</span> ( ) { <span class="ident">map</span> . <span class="ident">get</span> ( <span class="ident">val</span> ) . <span class="ident">ok_or</span> ( ( ) ) <span class="question-mark">?</span> } <span class="kw">else</span> { <span class="kw">return</span> <span class="prelude-val">Err</span> ( ( ) ) ; } } , } ) } , <span class="number">3</span> <span class="op">=</span><span class="op">&gt;</span> { <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">args</span> <span class="op">=</span> <span class="ident">msg</span> . <span class="ident">args</span> . <span class="ident">into_iter</span> ( ) ; <span class="prelude-val">Ok</span> ( <span class="ident">Event</span> :: <span class="ident">OutputLeave</span> { <span class="ident">output</span> : { <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span> ( <span class="ident">Argument</span> :: <span class="ident">Object</span> ( <span class="ident">val</span> ) ) <span class="op">=</span> <span class="ident">args</span> . <span class="ident">next</span> ( ) { <span class="ident">map</span> . <span class="ident">get</span> ( <span class="ident">val</span> ) . <span class="ident">ok_or</span> ( ( ) ) <span class="question-mark">?</span> } <span class="kw">else</span> { <span class="kw">return</span> <span class="prelude-val">Err</span> ( ( ) ) ; } } , } ) } , <span class="number">4</span> <span class="op">=</span><span class="op">&gt;</span> { <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">args</span> <span class="op">=</span> <span class="ident">msg</span> . <span class="ident">args</span> . <span class="ident">into_iter</span> ( ) ; <span class="prelude-val">Ok</span> ( <span class="ident">Event</span> :: <span class="ident">State</span> { <span class="ident">state</span> : { <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span> ( <span class="ident">Argument</span> :: <span class="ident">Array</span> ( <span class="ident">val</span> ) ) <span class="op">=</span> <span class="ident">args</span> . <span class="ident">next</span> ( ) { <span class="ident">val</span> } <span class="kw">else</span> { <span class="kw">return</span> <span class="prelude-val">Err</span> ( ( ) ) ; } } , } ) } , <span class="number">5</span> <span class="op">=</span><span class="op">&gt;</span> <span class="prelude-val">Ok</span> ( <span class="ident">Event</span> :: <span class="ident">Done</span> ) , <span class="number">6</span> <span class="op">=</span><span class="op">&gt;</span> <span class="prelude-val">Ok</span> ( <span class="ident">Event</span> :: <span class="ident">Closed</span> ) , <span class="kw">_</span> <span class="op">=</span><span class="op">&gt;</span> <span class="prelude-val">Err</span> ( ( ) ) , } } <span class="kw">fn</span> <span class="ident">into_raw</span> ( <span class="self">self</span> , <span class="ident">sender_id</span> : <span class="ident">u32</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">Message</span> { <span class="ident">panic</span> <span class="op">!</span> ( <span class="string">&quot;Event::into_raw can not be used Client-side.&quot;</span> ) } <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_raw_c</span> ( <span class="ident">obj</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> , <span class="ident">opcode</span> : <span class="ident">u32</span> , <span class="ident">args</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">wl_argument</span> , ) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Result</span> <span class="op">&lt;</span> <span class="ident">Event</span> , ( ) <span class="op">&gt;</span> { <span class="kw">match</span> <span class="ident">opcode</span> { <span class="number">0</span> <span class="op">=</span><span class="op">&gt;</span> { <span class="kw">let</span> <span class="ident">_args</span> <span class="op">=</span> :: <span class="ident">std</span> :: <span class="ident">slice</span> :: <span class="ident">from_raw_parts</span> ( <span class="ident">args</span> , <span class="number">1</span> ) ; <span class="prelude-val">Ok</span> ( <span class="ident">Event</span> :: <span class="ident">Title</span> { <span class="ident">title</span> : :: <span class="ident">std</span> :: <span class="ident">ffi</span> :: <span class="ident">CStr</span> :: <span class="ident">from_ptr</span> ( <span class="ident">_args</span> [ <span class="number">0</span> ] . <span class="ident">s</span> ) . <span class="ident">to_string_lossy</span> ( ) . <span class="ident">into_owned</span> ( ) , } ) } , <span class="number">1</span> <span class="op">=</span><span class="op">&gt;</span> { <span class="kw">let</span> <span class="ident">_args</span> <span class="op">=</span> :: <span class="ident">std</span> :: <span class="ident">slice</span> :: <span class="ident">from_raw_parts</span> ( <span class="ident">args</span> , <span class="number">1</span> ) ; <span class="prelude-val">Ok</span> ( <span class="ident">Event</span> :: <span class="ident">AppId</span> { <span class="ident">app_id</span> : :: <span class="ident">std</span> :: <span class="ident">ffi</span> :: <span class="ident">CStr</span> :: <span class="ident">from_ptr</span> ( <span class="ident">_args</span> [ <span class="number">0</span> ] . <span class="ident">s</span> ) . <span class="ident">to_string_lossy</span> ( ) . <span class="ident">into_owned</span> ( ) , } ) } , <span class="number">2</span> <span class="op">=</span><span class="op">&gt;</span> { <span class="kw">let</span> <span class="ident">_args</span> <span class="op">=</span> :: <span class="ident">std</span> :: <span class="ident">slice</span> :: <span class="ident">from_raw_parts</span> ( <span class="ident">args</span> , <span class="number">1</span> ) ; <span class="prelude-val">Ok</span> ( <span class="ident">Event</span> :: <span class="ident">OutputEnter</span> { <span class="ident">output</span> : <span class="ident">Proxy</span> :: <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">wl_output</span> :: <span class="ident">WlOutput</span> <span class="op">&gt;</span> :: <span class="ident">from_c_ptr</span> ( <span class="ident">_args</span> [ <span class="number">0</span> ] . <span class="ident">o</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="kw">_</span> , ) , } ) } , <span class="number">3</span> <span class="op">=</span><span class="op">&gt;</span> { <span class="kw">let</span> <span class="ident">_args</span> <span class="op">=</span> :: <span class="ident">std</span> :: <span class="ident">slice</span> :: <span class="ident">from_raw_parts</span> ( <span class="ident">args</span> , <span class="number">1</span> ) ; <span class="prelude-val">Ok</span> ( <span class="ident">Event</span> :: <span class="ident">OutputLeave</span> { <span class="ident">output</span> : <span class="ident">Proxy</span> :: <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">wl_output</span> :: <span class="ident">WlOutput</span> <span class="op">&gt;</span> :: <span class="ident">from_c_ptr</span> ( <span class="ident">_args</span> [ <span class="number">0</span> ] . <span class="ident">o</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="kw">_</span> , ) , } ) } , <span class="number">4</span> <span class="op">=</span><span class="op">&gt;</span> { <span class="kw">let</span> <span class="ident">_args</span> <span class="op">=</span> :: <span class="ident">std</span> :: <span class="ident">slice</span> :: <span class="ident">from_raw_parts</span> ( <span class="ident">args</span> , <span class="number">1</span> ) ; <span class="prelude-val">Ok</span> ( <span class="ident">Event</span> :: <span class="ident">State</span> { <span class="ident">state</span> : { <span class="kw">let</span> <span class="ident">array</span> <span class="op">=</span> <span class="op">&amp;</span> <span class="op">*</span> <span class="ident">_args</span> [ <span class="number">0</span> ] . <span class="ident">a</span> ; :: <span class="ident">std</span> :: <span class="ident">slice</span> :: <span class="ident">from_raw_parts</span> ( <span class="ident">array</span> . <span class="ident">data</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> , <span class="ident">array</span> . <span class="ident">size</span> ) . <span class="ident">to_owned</span> ( ) } , } ) } , <span class="number">5</span> <span class="op">=</span><span class="op">&gt;</span> { <span class="prelude-val">Ok</span> ( <span class="ident">Event</span> :: <span class="ident">Done</span> ) } , <span class="number">6</span> <span class="op">=</span><span class="op">&gt;</span> { <span class="prelude-val">Ok</span> ( <span class="ident">Event</span> :: <span class="ident">Closed</span> ) } , <span class="kw">_</span> <span class="op">=</span><span class="op">&gt;</span> <span class="kw">return</span> <span class="prelude-val">Err</span> ( ( ) ) , } } <span class="kw">fn</span> <span class="ident">as_raw_c_in</span> <span class="op">&lt;</span> <span class="ident">F</span> , <span class="ident">T</span> <span class="op">&gt;</span> ( <span class="self">self</span> , <span class="ident">f</span> : <span class="ident">F</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">T</span> <span class="kw">where</span> <span class="ident">F</span> : <span class="ident">FnOnce</span> ( <span class="ident">u32</span> , <span class="op">&amp;</span> <span class="kw-2">mut</span> [ <span class="ident">wl_argument</span> ] ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">T</span> { <span class="ident">panic</span> <span class="op">!</span> ( <span class="string">&quot;Event::as_raw_c_in can not be used Client-side.&quot;</span> ) } } <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">ZwlrForeignToplevelHandleV1</span> ; <span class="kw">impl</span> <span class="ident">Interface</span> <span class="kw">for</span> <span class="ident">ZwlrForeignToplevelHandleV1</span> { <span class="kw">type</span> <span class="ident">Request</span> <span class="op">=</span> <span class="ident">Request</span> ; <span class="kw">type</span> <span class="ident">Event</span> <span class="op">=</span> <span class="ident">Event</span> ; <span class="kw">const</span> <span class="ident">NAME</span> : <span class="op">&amp;</span> <span class="lifetime">&#39;static</span> <span class="ident">str</span> <span class="op">=</span> <span class="string">&quot;zwlr_foreign_toplevel_handle_v1&quot;</span> ; <span class="kw">const</span> <span class="ident">VERSION</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">1</span> ; <span class="kw">fn</span> <span class="ident">c_interface</span> ( ) <span class="op">-</span><span class="op">&gt;</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">wl_interface</span> { <span class="kw">unsafe</span> { <span class="op">&amp;</span> <span class="kw">super</span> :: <span class="kw">super</span> :: <span class="ident">c_interfaces</span> :: <span class="ident">zwlr_foreign_toplevel_handle_v1_interface</span> } } } <span class="kw">pub</span> <span class="kw">trait</span> <span class="ident">RequestsTrait</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;requests that the toplevel be maximized\n\nRequests that the toplevel be maximized. If the maximized state actually\nchanges, this will be indicated by the state event.&quot;</span> ] <span class="kw">fn</span> <span class="ident">set_maximized</span> ( <span class="op">&amp;</span> <span class="self">self</span> , ) <span class="op">-</span><span class="op">&gt;</span> ( ) ; # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;requests that the toplevel be unmaximized\n\nRequests that the toplevel be unmaximized. If the maximized state actually\nchanges, this will be indicated by the state event.&quot;</span> ] <span class="kw">fn</span> <span class="ident">unset_maximized</span> ( <span class="op">&amp;</span> <span class="self">self</span> , ) <span class="op">-</span><span class="op">&gt;</span> ( ) ; # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;requests that the toplevel be minimized\n\nRequests that the toplevel be minimized. If the minimized state actually\nchanges, this will be indicated by the state event.&quot;</span> ] <span class="kw">fn</span> <span class="ident">set_minimized</span> ( <span class="op">&amp;</span> <span class="self">self</span> , ) <span class="op">-</span><span class="op">&gt;</span> ( ) ; # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;requests that the toplevel be unminimized\n\nRequests that the toplevel be unminimized. If the minimized state actually\nchanges, this will be indicated by the state event.&quot;</span> ] <span class="kw">fn</span> <span class="ident">unset_minimized</span> ( <span class="op">&amp;</span> <span class="self">self</span> , ) <span class="op">-</span><span class="op">&gt;</span> ( ) ; # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;activate the toplevel\n\nRequest that this toplevel be activated on the given seat.\nThere is no guarantee the toplevel will be actually activated.&quot;</span> ] <span class="kw">fn</span> <span class="ident">activate</span> ( <span class="op">&amp;</span> <span class="self">self</span> , <span class="ident">seat</span> : <span class="op">&amp;</span> <span class="ident">Proxy</span> <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">wl_seat</span> :: <span class="ident">WlSeat</span> <span class="op">&gt;</span> ) <span class="op">-</span><span class="op">&gt;</span> ( ) ; # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;request that the toplevel be closed\n\nSend a request to the toplevel to close itself. The compositor would\ntypically use a shell-specific method to carry out this request, for\nexample by sending the xdg_toplevel.close event. However, this gives\nno guarantees the toplevel will actually be destroyed. If and when\nthis happens, the zwlr_foreign_toplevel_handle_v1.closed event will\nbe emitted.&quot;</span> ] <span class="kw">fn</span> <span class="ident">close</span> ( <span class="op">&amp;</span> <span class="self">self</span> , ) <span class="op">-</span><span class="op">&gt;</span> ( ) ; # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;the rectangle which represents the toplevel\n\nThe rectangle of the surface specified in this request corresponds to\nthe place where the app using this protocol represents the given toplevel.\nIt can be used by the compositor as a hint for some operations, e.g\nminimizing. The client is however not required to set this, in which\ncase the compositor is free to decide some default value.\n\nIf the client specifies more than one rectangle, only the last one is\nconsidered.\n\nThe dimensions are given in surface-local coordinates.\nSetting width=height=0 removes the already-set rectangle.&quot;</span> ] <span class="kw">fn</span> <span class="ident">set_rectangle</span> ( <span class="op">&amp;</span> <span class="self">self</span> , <span class="ident">surface</span> : <span class="op">&amp;</span> <span class="ident">Proxy</span> <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">wl_surface</span> :: <span class="ident">WlSurface</span> <span class="op">&gt;</span> , <span class="ident">x</span> : <span class="ident">i32</span> , <span class="ident">y</span> : <span class="ident">i32</span> , <span class="ident">width</span> : <span class="ident">i32</span> , <span class="ident">height</span> : <span class="ident">i32</span> ) <span class="op">-</span><span class="op">&gt;</span> ( ) ; # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;destroy the zwlr_foreign_toplevel_handle_v1 object\n\nDestroys the zwlr_foreign_toplevel_handle_v1 object.\n\nThis request should be called either when the client does not want to\nuse the toplevel anymore or after the closed event to finalize the\ndestruction of the object.\n\nThis is a destructor, you cannot send requests to this object any longer once this method is called.&quot;</span> ] <span class="kw">fn</span> <span class="ident">destroy</span> ( <span class="op">&amp;</span> <span class="self">self</span> , ) <span class="op">-</span><span class="op">&gt;</span> ( ) ; } <span class="kw">impl</span> <span class="ident">RequestsTrait</span> <span class="kw">for</span> <span class="ident">Proxy</span> <span class="op">&lt;</span> <span class="ident">ZwlrForeignToplevelHandleV1</span> <span class="op">&gt;</span> { <span class="kw">fn</span> <span class="ident">set_maximized</span> ( <span class="op">&amp;</span> <span class="self">self</span> , ) <span class="op">-</span><span class="op">&gt;</span> ( ) { <span class="kw">let</span> <span class="ident">msg</span> <span class="op">=</span> <span class="ident">Request</span> :: <span class="ident">SetMaximized</span> ; <span class="self">self</span> . <span class="ident">send</span> ( <span class="ident">msg</span> ) ; } <span class="kw">fn</span> <span class="ident">unset_maximized</span> ( <span class="op">&amp;</span> <span class="self">self</span> , ) <span class="op">-</span><span class="op">&gt;</span> ( ) { <span class="kw">let</span> <span class="ident">msg</span> <span class="op">=</span> <span class="ident">Request</span> :: <span class="ident">UnsetMaximized</span> ; <span class="self">self</span> . <span class="ident">send</span> ( <span class="ident">msg</span> ) ; } <span class="kw">fn</span> <span class="ident">set_minimized</span> ( <span class="op">&amp;</span> <span class="self">self</span> , ) <span class="op">-</span><span class="op">&gt;</span> ( ) { <span class="kw">let</span> <span class="ident">msg</span> <span class="op">=</span> <span class="ident">Request</span> :: <span class="ident">SetMinimized</span> ; <span class="self">self</span> . <span class="ident">send</span> ( <span class="ident">msg</span> ) ; } <span class="kw">fn</span> <span class="ident">unset_minimized</span> ( <span class="op">&amp;</span> <span class="self">self</span> , ) <span class="op">-</span><span class="op">&gt;</span> ( ) { <span class="kw">let</span> <span class="ident">msg</span> <span class="op">=</span> <span class="ident">Request</span> :: <span class="ident">UnsetMinimized</span> ; <span class="self">self</span> . <span class="ident">send</span> ( <span class="ident">msg</span> ) ; } <span class="kw">fn</span> <span class="ident">activate</span> ( <span class="op">&amp;</span> <span class="self">self</span> , <span class="ident">seat</span> : <span class="op">&amp;</span> <span class="ident">Proxy</span> <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">wl_seat</span> :: <span class="ident">WlSeat</span> <span class="op">&gt;</span> ) <span class="op">-</span><span class="op">&gt;</span> ( ) { <span class="kw">let</span> <span class="ident">msg</span> <span class="op">=</span> <span class="ident">Request</span> :: <span class="ident">Activate</span> { <span class="ident">seat</span> : <span class="ident">seat</span> . <span class="ident">clone</span> ( ) } ; <span class="self">self</span> . <span class="ident">send</span> ( <span class="ident">msg</span> ) ; } <span class="kw">fn</span> <span class="ident">close</span> ( <span class="op">&amp;</span> <span class="self">self</span> , ) <span class="op">-</span><span class="op">&gt;</span> ( ) { <span class="kw">let</span> <span class="ident">msg</span> <span class="op">=</span> <span class="ident">Request</span> :: <span class="ident">Close</span> ; <span class="self">self</span> . <span class="ident">send</span> ( <span class="ident">msg</span> ) ; } <span class="kw">fn</span> <span class="ident">set_rectangle</span> ( <span class="op">&amp;</span> <span class="self">self</span> , <span class="ident">surface</span> : <span class="op">&amp;</span> <span class="ident">Proxy</span> <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">wl_surface</span> :: <span class="ident">WlSurface</span> <span class="op">&gt;</span> , <span class="ident">x</span> : <span class="ident">i32</span> , <span class="ident">y</span> : <span class="ident">i32</span> , <span class="ident">width</span> : <span class="ident">i32</span> , <span class="ident">height</span> : <span class="ident">i32</span> ) <span class="op">-</span><span class="op">&gt;</span> ( ) { <span class="kw">let</span> <span class="ident">msg</span> <span class="op">=</span> <span class="ident">Request</span> :: <span class="ident">SetRectangle</span> { <span class="ident">surface</span> : <span class="ident">surface</span> . <span class="ident">clone</span> ( ) , <span class="ident">x</span> : <span class="ident">x</span> , <span class="ident">y</span> : <span class="ident">y</span> , <span class="ident">width</span> : <span class="ident">width</span> , <span class="ident">height</span> : <span class="ident">height</span> } ; <span class="self">self</span> . <span class="ident">send</span> ( <span class="ident">msg</span> ) ; } <span class="kw">fn</span> <span class="ident">destroy</span> ( <span class="op">&amp;</span> <span class="self">self</span> , ) <span class="op">-</span><span class="op">&gt;</span> ( ) { <span class="kw">let</span> <span class="ident">msg</span> <span class="op">=</span> <span class="ident">Request</span> :: <span class="ident">Destroy</span> ; <span class="self">self</span> . <span class="ident">send</span> ( <span class="ident">msg</span> ) ; } } # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; The minimal object version supporting this request&quot;</span> ] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">REQ_SET_MAXIMIZED_SINCE</span> : <span class="ident">u16</span> <span class="op">=</span> <span class="number">1u16</span> ; # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; The minimal object version supporting this request&quot;</span> ] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">REQ_UNSET_MAXIMIZED_SINCE</span> : <span class="ident">u16</span> <span class="op">=</span> <span class="number">1u16</span> ; # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; The minimal object version supporting this request&quot;</span> ] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">REQ_SET_MINIMIZED_SINCE</span> : <span class="ident">u16</span> <span class="op">=</span> <span class="number">1u16</span> ; # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; The minimal object version supporting this request&quot;</span> ] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">REQ_UNSET_MINIMIZED_SINCE</span> : <span class="ident">u16</span> <span class="op">=</span> <span class="number">1u16</span> ; # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; The minimal object version supporting this request&quot;</span> ] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">REQ_ACTIVATE_SINCE</span> : <span class="ident">u16</span> <span class="op">=</span> <span class="number">1u16</span> ; # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; The minimal object version supporting this request&quot;</span> ] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">REQ_CLOSE_SINCE</span> : <span class="ident">u16</span> <span class="op">=</span> <span class="number">1u16</span> ; # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; The minimal object version supporting this request&quot;</span> ] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">REQ_SET_RECTANGLE_SINCE</span> : <span class="ident">u16</span> <span class="op">=</span> <span class="number">1u16</span> ; # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; The minimal object version supporting this request&quot;</span> ] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">REQ_DESTROY_SINCE</span> : <span class="ident">u16</span> <span class="op">=</span> <span class="number">1u16</span> ; # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; The minimal object version supporting this event&quot;</span> ] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">EVT_TITLE_SINCE</span> : <span class="ident">u16</span> <span class="op">=</span> <span class="number">1u16</span> ; # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; The minimal object version supporting this event&quot;</span> ] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">EVT_APP_ID_SINCE</span> : <span class="ident">u16</span> <span class="op">=</span> <span class="number">1u16</span> ; # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; The minimal object version supporting this event&quot;</span> ] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">EVT_OUTPUT_ENTER_SINCE</span> : <span class="ident">u16</span> <span class="op">=</span> <span class="number">1u16</span> ; # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; The minimal object version supporting this event&quot;</span> ] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">EVT_OUTPUT_LEAVE_SINCE</span> : <span class="ident">u16</span> <span class="op">=</span> <span class="number">1u16</span> ; # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; The minimal object version supporting this event&quot;</span> ] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">EVT_STATE_SINCE</span> : <span class="ident">u16</span> <span class="op">=</span> <span class="number">1u16</span> ; # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; The minimal object version supporting this event&quot;</span> ] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">EVT_DONE_SINCE</span> : <span class="ident">u16</span> <span class="op">=</span> <span class="number">1u16</span> ; # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; The minimal object version supporting this event&quot;</span> ] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">EVT_CLOSED_SINCE</span> : <span class="ident">u16</span> <span class="op">=</span> <span class="number">1u16</span> ; }</pre></div>
</section><section id="search" class="content hidden"></section><section class="footer"></section><script>window.rootPath = "../../../../../../../../../../../../";window.currentCrate = "wayland_protocols";</script><script src="../../../../../../../../../../../../main.js"></script><script src="../../../../../../../../../../../../source-script.js"></script><script src="../../../../../../../../../../../../source-files.js"></script><script defer src="../../../../../../../../../../../../search-index.js"></script></body></html>