<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Source of the Rust file `/home/runner/work/wgpu-rs/wgpu-rs/target/debug/build/wayland-protocols-89ac49e270c0a518/out/wlr-layer-shell-v1_c_client_api.rs`."><meta name="keywords" content="rust, rustlang, rust-lang"><title>wlr-layer-shell-v1_c_client_api.rs - source</title><link rel="stylesheet" type="text/css" href="../../../../../../../../../../../../normalize.css"><link rel="stylesheet" type="text/css" href="../../../../../../../../../../../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../../../../../../../../../../../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../../../../../../../../../../../../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../../../../../../../../../../../../ayu.css" disabled ><script id="default-settings"></script><script src="../../../../../../../../../../../../storage.js"></script><noscript><link rel="stylesheet" href="../../../../../../../../../../../../noscript.css"></noscript><link rel="icon" type="image/svg+xml" href="../../../../../../../../../../../../favicon.svg">
<link rel="alternate icon" type="image/png" href="../../../../../../../../../../../../favicon-16x16.png">
<link rel="alternate icon" type="image/png" href="../../../../../../../../../../../../favicon-32x32.png"><style type="text/css">#crate-search{background-image:url("../../../../../../../../../../../../down-arrow.svg");}</style></head><body class="rustdoc source"><!--[if lte IE 8]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu">&#9776;</div><a href='../../../../../../../../../../../../wayland_protocols/index.html'><div class='logo-container rust-logo'><img src='../../../../../../../../../../../../rust-logo.png' alt='logo'></div></a></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!"><img src="../../../../../../../../../../../../brush.svg" width="18" alt="Pick another theme!"></button><div id="theme-choices"></div></div><script src="../../../../../../../../../../../../theme.js"></script><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><span class="help-button">?</span>
                <a id="settings-menu" href="../../../../../../../../../../../../settings.html"><img src="../../../../../../../../../../../../wheel.svg" width="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><pre class="line-numbers"><span id="1">1</span>
</pre><div class="example-wrap"><pre class="rust ">
# [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;create surfaces that are layers of the desktop\n\nClients can use this interface to assign the surface_layer role to\nwl_surfaces. Such surfaces are assigned to a \&quot;layer\&quot; of the output and\nrendered with a defined z-depth respective to each other. They may also be\nanchored to the edges and corners of a screen and specify input handling\nsemantics. This interface should be suitable for the implementation of\nmany desktop shell components, and a broad number of other applications\nthat interact with the desktop.&quot;</span> ] <span class="kw">pub</span> <span class="kw">mod</span> <span class="ident">zwlr_layer_shell_v1</span> { <span class="kw">use</span> <span class="kw">super</span> :: { <span class="ident">Proxy</span> , <span class="ident">NewProxy</span> , <span class="ident">AnonymousObject</span> , <span class="ident">Interface</span> , <span class="ident">MessageGroup</span> , <span class="ident">MessageDesc</span> , <span class="ident">ArgumentType</span> , <span class="ident">Object</span> , <span class="ident">Message</span> , <span class="ident">Argument</span> , <span class="ident">ObjectMetadata</span> } ; <span class="kw">use</span> <span class="kw">super</span> :: <span class="ident">sys</span> :: <span class="ident">common</span> :: { <span class="ident">wl_argument</span> , <span class="ident">wl_interface</span> , <span class="ident">wl_array</span> } ; <span class="kw">use</span> <span class="kw">super</span> :: <span class="ident">sys</span> :: <span class="ident">client</span> :: <span class="op">*</span> ; # [ <span class="ident">repr</span> ( <span class="ident">u32</span> ) ] # [ <span class="ident">derive</span> ( <span class="ident">Copy</span> , <span class="ident">Clone</span> , <span class="ident">Debug</span> , <span class="ident">PartialEq</span> ) ] <span class="kw">pub</span> <span class="kw">enum</span> <span class="ident">Error</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;wl_surface has another role&quot;</span> ] <span class="ident">Role</span> <span class="op">=</span> <span class="number">0</span> , # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;layer value is invalid&quot;</span> ] <span class="ident">InvalidLayer</span> <span class="op">=</span> <span class="number">1</span> , # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;wl_surface has a buffer attached or committed&quot;</span> ] <span class="ident">AlreadyConstructed</span> <span class="op">=</span> <span class="number">2</span> , } <span class="kw">impl</span> <span class="ident">Error</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">from_raw</span> ( <span class="ident">n</span> : <span class="ident">u32</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="ident">Error</span> <span class="op">&gt;</span> { <span class="kw">match</span> <span class="ident">n</span> { <span class="number">0</span> <span class="op">=</span><span class="op">&gt;</span> <span class="prelude-val">Some</span> ( <span class="ident">Error</span> :: <span class="ident">Role</span> ) , <span class="number">1</span> <span class="op">=</span><span class="op">&gt;</span> <span class="prelude-val">Some</span> ( <span class="ident">Error</span> :: <span class="ident">InvalidLayer</span> ) , <span class="number">2</span> <span class="op">=</span><span class="op">&gt;</span> <span class="prelude-val">Some</span> ( <span class="ident">Error</span> :: <span class="ident">AlreadyConstructed</span> ) , <span class="kw">_</span> <span class="op">=</span><span class="op">&gt;</span> <span class="prelude-ty">Option</span> :: <span class="prelude-val">None</span> } } <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">to_raw</span> ( <span class="op">&amp;</span> <span class="self">self</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">u32</span> { <span class="op">*</span> <span class="self">self</span> <span class="kw">as</span> <span class="ident">u32</span> } } # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;available layers for surfaces\n\nThese values indicate which layers a surface can be rendered in. They\nare ordered by z depth, bottom-most first. Traditional shell surfaces\nwill typically be rendered between the bottom and top layers.\nFullscreen shell surfaces are typically rendered at the top layer.\nMultiple surfaces can share a single layer, and ordering within a\nsingle layer is undefined.&quot;</span> ] # [ <span class="ident">repr</span> ( <span class="ident">u32</span> ) ] # [ <span class="ident">derive</span> ( <span class="ident">Copy</span> , <span class="ident">Clone</span> , <span class="ident">Debug</span> , <span class="ident">PartialEq</span> ) ] <span class="kw">pub</span> <span class="kw">enum</span> <span class="ident">Layer</span> { <span class="ident">Background</span> <span class="op">=</span> <span class="number">0</span> , <span class="ident">Bottom</span> <span class="op">=</span> <span class="number">1</span> , <span class="ident">Top</span> <span class="op">=</span> <span class="number">2</span> , <span class="ident">Overlay</span> <span class="op">=</span> <span class="number">3</span> , } <span class="kw">impl</span> <span class="ident">Layer</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">from_raw</span> ( <span class="ident">n</span> : <span class="ident">u32</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="ident">Layer</span> <span class="op">&gt;</span> { <span class="kw">match</span> <span class="ident">n</span> { <span class="number">0</span> <span class="op">=</span><span class="op">&gt;</span> <span class="prelude-val">Some</span> ( <span class="ident">Layer</span> :: <span class="ident">Background</span> ) , <span class="number">1</span> <span class="op">=</span><span class="op">&gt;</span> <span class="prelude-val">Some</span> ( <span class="ident">Layer</span> :: <span class="ident">Bottom</span> ) , <span class="number">2</span> <span class="op">=</span><span class="op">&gt;</span> <span class="prelude-val">Some</span> ( <span class="ident">Layer</span> :: <span class="ident">Top</span> ) , <span class="number">3</span> <span class="op">=</span><span class="op">&gt;</span> <span class="prelude-val">Some</span> ( <span class="ident">Layer</span> :: <span class="ident">Overlay</span> ) , <span class="kw">_</span> <span class="op">=</span><span class="op">&gt;</span> <span class="prelude-ty">Option</span> :: <span class="prelude-val">None</span> } } <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">to_raw</span> ( <span class="op">&amp;</span> <span class="self">self</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">u32</span> { <span class="op">*</span> <span class="self">self</span> <span class="kw">as</span> <span class="ident">u32</span> } } <span class="kw">pub</span> <span class="kw">enum</span> <span class="ident">Request</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;create a layer_surface from a surface\n\nCreate a layer surface for an existing surface. This assigns the role of\nlayer_surface, or raises a protocol error if another role is already\nassigned.\n\nCreating a layer surface from a wl_surface which has a buffer attached\nor committed is a client error, and any attempts by a client to attach\nor manipulate a buffer prior to the first layer_surface.configure call\nmust also be treated as errors.\n\nYou may pass NULL for output to allow the compositor to decide which\noutput to use. Generally this will be the one that the user most\nrecently interacted with.\n\nClients can specify a namespace that defines the purpose of the layer\nsurface.&quot;</span> ] <span class="ident">GetLayerSurface</span> { <span class="ident">id</span> : <span class="ident">Proxy</span> <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">zwlr_layer_surface_v1</span> :: <span class="ident">ZwlrLayerSurfaceV1</span> <span class="op">&gt;</span> , <span class="ident">surface</span> : <span class="ident">Proxy</span> <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">wl_surface</span> :: <span class="ident">WlSurface</span> <span class="op">&gt;</span> , <span class="ident">output</span> : <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="ident">Proxy</span> <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">wl_output</span> :: <span class="ident">WlOutput</span> <span class="op">&gt;</span> <span class="op">&gt;</span> , <span class="ident">layer</span> : <span class="ident">Layer</span> , <span class="ident">namespace</span> : <span class="ident">String</span> , } , } <span class="kw">impl</span> <span class="kw">super</span> :: <span class="ident">MessageGroup</span> <span class="kw">for</span> <span class="ident">Request</span> { <span class="kw">const</span> <span class="ident">MESSAGES</span> : <span class="op">&amp;</span> <span class="lifetime">&#39;static</span> [ <span class="kw">super</span> :: <span class="ident">MessageDesc</span> ] <span class="op">=</span> <span class="op">&amp;</span> [ <span class="kw">super</span> :: <span class="ident">MessageDesc</span> { <span class="ident">name</span> : <span class="string">&quot;get_layer_surface&quot;</span> , <span class="ident">since</span> : <span class="number">1</span> , <span class="ident">signature</span> : <span class="op">&amp;</span> [ <span class="kw">super</span> :: <span class="ident">ArgumentType</span> :: <span class="ident">NewId</span> , <span class="kw">super</span> :: <span class="ident">ArgumentType</span> :: <span class="ident">Object</span> , <span class="kw">super</span> :: <span class="ident">ArgumentType</span> :: <span class="ident">Object</span> , <span class="kw">super</span> :: <span class="ident">ArgumentType</span> :: <span class="ident">Uint</span> , <span class="kw">super</span> :: <span class="ident">ArgumentType</span> :: <span class="ident">Str</span> , ] , } , ] ; <span class="kw">type</span> <span class="ident">Map</span> <span class="op">=</span> <span class="kw">super</span> :: <span class="ident">ProxyMap</span> ; <span class="kw">fn</span> <span class="ident">is_destructor</span> ( <span class="op">&amp;</span> <span class="self">self</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">bool</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { <span class="kw">_</span> <span class="op">=</span><span class="op">&gt;</span> <span class="bool-val">false</span> , } } <span class="kw">fn</span> <span class="ident">opcode</span> ( <span class="op">&amp;</span> <span class="self">self</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">u16</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { <span class="ident">Request</span> :: <span class="ident">GetLayerSurface</span> { .. } <span class="op">=</span><span class="op">&gt;</span> <span class="number">0</span> , } } <span class="kw">fn</span> <span class="ident">child</span> <span class="op">&lt;</span> <span class="ident">Meta</span> : <span class="ident">ObjectMetadata</span> <span class="op">&gt;</span> ( <span class="ident">opcode</span> : <span class="ident">u16</span> , <span class="ident">version</span> : <span class="ident">u32</span> , <span class="ident">meta</span> : <span class="op">&amp;</span> <span class="ident">Meta</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="ident">Object</span> <span class="op">&lt;</span> <span class="ident">Meta</span> <span class="op">&gt;</span><span class="op">&gt;</span> { <span class="kw">match</span> <span class="ident">opcode</span> { <span class="number">0</span> <span class="op">=</span><span class="op">&gt;</span> <span class="prelude-val">Some</span> ( <span class="ident">Object</span> :: <span class="ident">from_interface</span> :: <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">zwlr_layer_surface_v1</span> :: <span class="ident">ZwlrLayerSurfaceV1</span> <span class="op">&gt;</span> ( <span class="ident">version</span> , <span class="ident">meta</span> . <span class="ident">child</span> ( ) , ) ) , <span class="kw">_</span> <span class="op">=</span><span class="op">&gt;</span> <span class="prelude-val">None</span> , } } <span class="kw">fn</span> <span class="ident">from_raw</span> ( <span class="ident">msg</span> : <span class="ident">Message</span> , <span class="ident">map</span> : <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="self">Self</span> :: <span class="ident">Map</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Result</span> <span class="op">&lt;</span> <span class="self">Self</span> , ( ) <span class="op">&gt;</span> { <span class="ident">panic</span> <span class="op">!</span> ( <span class="string">&quot;Request::from_raw can not be used Client-side.&quot;</span> ) } <span class="kw">fn</span> <span class="ident">into_raw</span> ( <span class="self">self</span> , <span class="ident">sender_id</span> : <span class="ident">u32</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">Message</span> { <span class="kw">match</span> <span class="self">self</span> { <span class="ident">Request</span> :: <span class="ident">GetLayerSurface</span> { <span class="ident">id</span> , <span class="ident">surface</span> , <span class="ident">output</span> , <span class="ident">layer</span> , <span class="ident">namespace</span> } <span class="op">=</span><span class="op">&gt;</span> <span class="ident">Message</span> { <span class="ident">sender_id</span> : <span class="ident">sender_id</span> , <span class="ident">opcode</span> : <span class="number">0</span> , <span class="ident">args</span> : <span class="ident">vec</span> <span class="op">!</span> [ <span class="ident">Argument</span> :: <span class="ident">NewId</span> ( <span class="ident">id</span> . <span class="ident">id</span> ( ) ) , <span class="ident">Argument</span> :: <span class="ident">Object</span> ( <span class="ident">surface</span> . <span class="ident">id</span> ( ) ) , <span class="ident">Argument</span> :: <span class="ident">Object</span> ( <span class="ident">output</span> . <span class="ident">map</span> ( <span class="op">|</span> <span class="ident">o</span> <span class="op">|</span> <span class="ident">o</span> . <span class="ident">id</span> ( ) ) . <span class="ident">unwrap_or</span> ( <span class="number">0</span> ) ) , <span class="ident">Argument</span> :: <span class="ident">Uint</span> ( <span class="ident">layer</span> . <span class="ident">to_raw</span> ( ) ) , <span class="ident">Argument</span> :: <span class="ident">Str</span> ( <span class="kw">unsafe</span> { :: <span class="ident">std</span> :: <span class="ident">ffi</span> :: <span class="ident">CString</span> :: <span class="ident">from_vec_unchecked</span> ( <span class="ident">namespace</span> . <span class="ident">into</span> ( ) ) } ) , ] , } , } } <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_raw_c</span> ( <span class="ident">obj</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> , <span class="ident">opcode</span> : <span class="ident">u32</span> , <span class="ident">args</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">wl_argument</span> , ) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Result</span> <span class="op">&lt;</span> <span class="ident">Request</span> , ( ) <span class="op">&gt;</span> { <span class="ident">panic</span> <span class="op">!</span> ( <span class="string">&quot;Request::from_raw_c can not be used Client-side.&quot;</span> ) } <span class="kw">fn</span> <span class="ident">as_raw_c_in</span> <span class="op">&lt;</span> <span class="ident">F</span> , <span class="ident">T</span> <span class="op">&gt;</span> ( <span class="self">self</span> , <span class="ident">f</span> : <span class="ident">F</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">T</span> <span class="kw">where</span> <span class="ident">F</span> : <span class="ident">FnOnce</span> ( <span class="ident">u32</span> , <span class="op">&amp;</span> <span class="kw-2">mut</span> [ <span class="ident">wl_argument</span> ] ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">T</span> { <span class="kw">match</span> <span class="self">self</span> { <span class="ident">Request</span> :: <span class="ident">GetLayerSurface</span> { <span class="ident">id</span> , <span class="ident">surface</span> , <span class="ident">output</span> , <span class="ident">layer</span> , <span class="ident">namespace</span> } <span class="op">=</span><span class="op">&gt;</span> { <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span> : [ <span class="ident">wl_argument</span> ; <span class="number">5</span> ] <span class="op">=</span> <span class="kw">unsafe</span> { :: <span class="ident">std</span> :: <span class="ident">mem</span> :: <span class="ident">zeroed</span> ( ) } ; <span class="ident">_args_array</span> [ <span class="number">0</span> ] . <span class="ident">o</span> <span class="op">=</span> <span class="ident">id</span> . <span class="ident">c_ptr</span> ( ) <span class="kw">as</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="kw">_</span> ; <span class="ident">_args_array</span> [ <span class="number">1</span> ] . <span class="ident">o</span> <span class="op">=</span> <span class="ident">surface</span> . <span class="ident">c_ptr</span> ( ) <span class="kw">as</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="kw">_</span> ; <span class="ident">_args_array</span> [ <span class="number">2</span> ] . <span class="ident">o</span> <span class="op">=</span> <span class="ident">output</span> . <span class="ident">map</span> ( <span class="op">|</span> <span class="ident">o</span> <span class="op">|</span> <span class="ident">o</span> . <span class="ident">c_ptr</span> ( ) <span class="kw">as</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="kw">_</span> ) . <span class="ident">unwrap_or</span> ( :: <span class="ident">std</span> :: <span class="ident">ptr</span> :: <span class="ident">null_mut</span> ( ) ) ; <span class="ident">_args_array</span> [ <span class="number">3</span> ] . <span class="ident">u</span> <span class="op">=</span> <span class="ident">layer</span> . <span class="ident">to_raw</span> ( ) ; <span class="kw">let</span> <span class="ident">_arg_4</span> <span class="op">=</span> :: <span class="ident">std</span> :: <span class="ident">ffi</span> :: <span class="ident">CString</span> :: <span class="ident">new</span> ( <span class="ident">namespace</span> ) . <span class="ident">unwrap</span> ( ) ; <span class="ident">_args_array</span> [ <span class="number">4</span> ] . <span class="ident">s</span> <span class="op">=</span> <span class="ident">_arg_4</span> . <span class="ident">as_ptr</span> ( ) ; <span class="ident">f</span> ( <span class="number">0</span> , <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span> ) } , } } } <span class="kw">pub</span> <span class="kw">enum</span> <span class="ident">Event</span> { } <span class="kw">impl</span> <span class="kw">super</span> :: <span class="ident">MessageGroup</span> <span class="kw">for</span> <span class="ident">Event</span> { <span class="kw">const</span> <span class="ident">MESSAGES</span> : <span class="op">&amp;</span> <span class="lifetime">&#39;static</span> [ <span class="kw">super</span> :: <span class="ident">MessageDesc</span> ] <span class="op">=</span> <span class="op">&amp;</span> [ ] ; <span class="kw">type</span> <span class="ident">Map</span> <span class="op">=</span> <span class="kw">super</span> :: <span class="ident">ProxyMap</span> ; <span class="kw">fn</span> <span class="ident">is_destructor</span> ( <span class="op">&amp;</span> <span class="self">self</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">bool</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { } } <span class="kw">fn</span> <span class="ident">opcode</span> ( <span class="op">&amp;</span> <span class="self">self</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">u16</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { } } <span class="kw">fn</span> <span class="ident">child</span> <span class="op">&lt;</span> <span class="ident">Meta</span> : <span class="ident">ObjectMetadata</span> <span class="op">&gt;</span> ( <span class="ident">opcode</span> : <span class="ident">u16</span> , <span class="ident">version</span> : <span class="ident">u32</span> , <span class="ident">meta</span> : <span class="op">&amp;</span> <span class="ident">Meta</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="ident">Object</span> <span class="op">&lt;</span> <span class="ident">Meta</span> <span class="op">&gt;</span><span class="op">&gt;</span> { <span class="kw">match</span> <span class="ident">opcode</span> { <span class="kw">_</span> <span class="op">=</span><span class="op">&gt;</span> <span class="prelude-val">None</span> , } } <span class="kw">fn</span> <span class="ident">from_raw</span> ( <span class="ident">msg</span> : <span class="ident">Message</span> , <span class="ident">map</span> : <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="self">Self</span> :: <span class="ident">Map</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Result</span> <span class="op">&lt;</span> <span class="self">Self</span> , ( ) <span class="op">&gt;</span> { <span class="kw">match</span> <span class="ident">msg</span> . <span class="ident">opcode</span> { <span class="kw">_</span> <span class="op">=</span><span class="op">&gt;</span> <span class="prelude-val">Err</span> ( ( ) ) , } } <span class="kw">fn</span> <span class="ident">into_raw</span> ( <span class="self">self</span> , <span class="ident">sender_id</span> : <span class="ident">u32</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">Message</span> { <span class="ident">panic</span> <span class="op">!</span> ( <span class="string">&quot;Event::into_raw can not be used Client-side.&quot;</span> ) } <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_raw_c</span> ( <span class="ident">obj</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> , <span class="ident">opcode</span> : <span class="ident">u32</span> , <span class="ident">args</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">wl_argument</span> , ) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Result</span> <span class="op">&lt;</span> <span class="ident">Event</span> , ( ) <span class="op">&gt;</span> { <span class="kw">match</span> <span class="ident">opcode</span> { <span class="kw">_</span> <span class="op">=</span><span class="op">&gt;</span> <span class="kw">return</span> <span class="prelude-val">Err</span> ( ( ) ) , } } <span class="kw">fn</span> <span class="ident">as_raw_c_in</span> <span class="op">&lt;</span> <span class="ident">F</span> , <span class="ident">T</span> <span class="op">&gt;</span> ( <span class="self">self</span> , <span class="ident">f</span> : <span class="ident">F</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">T</span> <span class="kw">where</span> <span class="ident">F</span> : <span class="ident">FnOnce</span> ( <span class="ident">u32</span> , <span class="op">&amp;</span> <span class="kw-2">mut</span> [ <span class="ident">wl_argument</span> ] ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">T</span> { <span class="ident">panic</span> <span class="op">!</span> ( <span class="string">&quot;Event::as_raw_c_in can not be used Client-side.&quot;</span> ) } } <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">ZwlrLayerShellV1</span> ; <span class="kw">impl</span> <span class="ident">Interface</span> <span class="kw">for</span> <span class="ident">ZwlrLayerShellV1</span> { <span class="kw">type</span> <span class="ident">Request</span> <span class="op">=</span> <span class="ident">Request</span> ; <span class="kw">type</span> <span class="ident">Event</span> <span class="op">=</span> <span class="ident">Event</span> ; <span class="kw">const</span> <span class="ident">NAME</span> : <span class="op">&amp;</span> <span class="lifetime">&#39;static</span> <span class="ident">str</span> <span class="op">=</span> <span class="string">&quot;zwlr_layer_shell_v1&quot;</span> ; <span class="kw">const</span> <span class="ident">VERSION</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">1</span> ; <span class="kw">fn</span> <span class="ident">c_interface</span> ( ) <span class="op">-</span><span class="op">&gt;</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">wl_interface</span> { <span class="kw">unsafe</span> { <span class="op">&amp;</span> <span class="kw">super</span> :: <span class="kw">super</span> :: <span class="ident">c_interfaces</span> :: <span class="ident">zwlr_layer_shell_v1_interface</span> } } } <span class="kw">pub</span> <span class="kw">trait</span> <span class="ident">RequestsTrait</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;create a layer_surface from a surface\n\nCreate a layer surface for an existing surface. This assigns the role of\nlayer_surface, or raises a protocol error if another role is already\nassigned.\n\nCreating a layer surface from a wl_surface which has a buffer attached\nor committed is a client error, and any attempts by a client to attach\nor manipulate a buffer prior to the first layer_surface.configure call\nmust also be treated as errors.\n\nYou may pass NULL for output to allow the compositor to decide which\noutput to use. Generally this will be the one that the user most\nrecently interacted with.\n\nClients can specify a namespace that defines the purpose of the layer\nsurface.&quot;</span> ] <span class="kw">fn</span> <span class="ident">get_layer_surface</span> <span class="op">&lt;</span> <span class="ident">F</span> <span class="op">&gt;</span> ( <span class="op">&amp;</span> <span class="self">self</span> , <span class="ident">surface</span> : <span class="op">&amp;</span> <span class="ident">Proxy</span> <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">wl_surface</span> :: <span class="ident">WlSurface</span> <span class="op">&gt;</span> , <span class="ident">output</span> : <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="op">&amp;</span> <span class="ident">Proxy</span> <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">wl_output</span> :: <span class="ident">WlOutput</span> <span class="op">&gt;</span> <span class="op">&gt;</span> , <span class="ident">layer</span> : <span class="ident">Layer</span> , <span class="ident">namespace</span> : <span class="ident">String</span> , <span class="ident">implementor</span> : <span class="ident">F</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Result</span> <span class="op">&lt;</span> <span class="ident">Proxy</span> <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">zwlr_layer_surface_v1</span> :: <span class="ident">ZwlrLayerSurfaceV1</span> <span class="op">&gt;</span> , ( ) <span class="op">&gt;</span> <span class="kw">where</span> <span class="ident">F</span> : <span class="ident">FnOnce</span> ( <span class="ident">NewProxy</span> <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">zwlr_layer_surface_v1</span> :: <span class="ident">ZwlrLayerSurfaceV1</span> <span class="op">&gt;</span> , ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">Proxy</span> <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">zwlr_layer_surface_v1</span> :: <span class="ident">ZwlrLayerSurfaceV1</span> <span class="op">&gt;</span> ; } <span class="kw">impl</span> <span class="ident">RequestsTrait</span> <span class="kw">for</span> <span class="ident">Proxy</span> <span class="op">&lt;</span> <span class="ident">ZwlrLayerShellV1</span> <span class="op">&gt;</span> { <span class="kw">fn</span> <span class="ident">get_layer_surface</span> <span class="op">&lt;</span> <span class="ident">F</span> <span class="op">&gt;</span> ( <span class="op">&amp;</span> <span class="self">self</span> , <span class="ident">surface</span> : <span class="op">&amp;</span> <span class="ident">Proxy</span> <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">wl_surface</span> :: <span class="ident">WlSurface</span> <span class="op">&gt;</span> , <span class="ident">output</span> : <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="op">&amp;</span> <span class="ident">Proxy</span> <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">wl_output</span> :: <span class="ident">WlOutput</span> <span class="op">&gt;</span> <span class="op">&gt;</span> , <span class="ident">layer</span> : <span class="ident">Layer</span> , <span class="ident">namespace</span> : <span class="ident">String</span> , <span class="ident">implementor</span> : <span class="ident">F</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Result</span> <span class="op">&lt;</span> <span class="ident">Proxy</span> <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">zwlr_layer_surface_v1</span> :: <span class="ident">ZwlrLayerSurfaceV1</span> <span class="op">&gt;</span> , ( ) <span class="op">&gt;</span> <span class="kw">where</span> <span class="ident">F</span> : <span class="ident">FnOnce</span> ( <span class="ident">NewProxy</span> <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">zwlr_layer_surface_v1</span> :: <span class="ident">ZwlrLayerSurfaceV1</span> <span class="op">&gt;</span> , ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">Proxy</span> <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">zwlr_layer_surface_v1</span> :: <span class="ident">ZwlrLayerSurfaceV1</span> <span class="op">&gt;</span> { <span class="kw">let</span> <span class="ident">msg</span> <span class="op">=</span> <span class="ident">Request</span> :: <span class="ident">GetLayerSurface</span> { <span class="ident">id</span> : <span class="self">self</span> . <span class="ident">child_placeholder</span> ( ) , <span class="ident">surface</span> : <span class="ident">surface</span> . <span class="ident">clone</span> ( ) , <span class="ident">output</span> : <span class="ident">output</span> . <span class="ident">map</span> ( <span class="op">|</span> <span class="ident">o</span> <span class="op">|</span> <span class="ident">o</span> . <span class="ident">clone</span> ( ) ) , <span class="ident">layer</span> : <span class="ident">layer</span> , <span class="ident">namespace</span> : <span class="ident">namespace</span> } ; <span class="self">self</span> . <span class="ident">send_constructor</span> ( <span class="ident">msg</span> , <span class="ident">implementor</span> , <span class="prelude-val">None</span> ) } } # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; The minimal object version supporting this request&quot;</span> ] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">REQ_GET_LAYER_SURFACE_SINCE</span> : <span class="ident">u16</span> <span class="op">=</span> <span class="number">1u16</span> ; } # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;layer metadata interface\n\nAn interface that may be implemented by a wl_surface, for surfaces that\nare designed to be rendered as a layer of a stacked desktop-like\nenvironment.\n\nLayer surface state (size, anchor, exclusive zone, margin, interactivity)\nis double-buffered, and will be applied at the time wl_surface.commit of\nthe corresponding wl_surface is called.&quot;</span> ] <span class="kw">pub</span> <span class="kw">mod</span> <span class="ident">zwlr_layer_surface_v1</span> { <span class="kw">use</span> <span class="kw">super</span> :: { <span class="ident">Proxy</span> , <span class="ident">NewProxy</span> , <span class="ident">AnonymousObject</span> , <span class="ident">Interface</span> , <span class="ident">MessageGroup</span> , <span class="ident">MessageDesc</span> , <span class="ident">ArgumentType</span> , <span class="ident">Object</span> , <span class="ident">Message</span> , <span class="ident">Argument</span> , <span class="ident">ObjectMetadata</span> } ; <span class="kw">use</span> <span class="kw">super</span> :: <span class="ident">sys</span> :: <span class="ident">common</span> :: { <span class="ident">wl_argument</span> , <span class="ident">wl_interface</span> , <span class="ident">wl_array</span> } ; <span class="kw">use</span> <span class="kw">super</span> :: <span class="ident">sys</span> :: <span class="ident">client</span> :: <span class="op">*</span> ; # [ <span class="ident">repr</span> ( <span class="ident">u32</span> ) ] # [ <span class="ident">derive</span> ( <span class="ident">Copy</span> , <span class="ident">Clone</span> , <span class="ident">Debug</span> , <span class="ident">PartialEq</span> ) ] <span class="kw">pub</span> <span class="kw">enum</span> <span class="ident">Error</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;provided surface state is invalid&quot;</span> ] <span class="ident">InvalidSurfaceState</span> <span class="op">=</span> <span class="number">0</span> , # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;size is invalid&quot;</span> ] <span class="ident">InvalidSize</span> <span class="op">=</span> <span class="number">1</span> , # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;anchor bitfield is invalid&quot;</span> ] <span class="ident">InvalidAnchor</span> <span class="op">=</span> <span class="number">2</span> , } <span class="kw">impl</span> <span class="ident">Error</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">from_raw</span> ( <span class="ident">n</span> : <span class="ident">u32</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="ident">Error</span> <span class="op">&gt;</span> { <span class="kw">match</span> <span class="ident">n</span> { <span class="number">0</span> <span class="op">=</span><span class="op">&gt;</span> <span class="prelude-val">Some</span> ( <span class="ident">Error</span> :: <span class="ident">InvalidSurfaceState</span> ) , <span class="number">1</span> <span class="op">=</span><span class="op">&gt;</span> <span class="prelude-val">Some</span> ( <span class="ident">Error</span> :: <span class="ident">InvalidSize</span> ) , <span class="number">2</span> <span class="op">=</span><span class="op">&gt;</span> <span class="prelude-val">Some</span> ( <span class="ident">Error</span> :: <span class="ident">InvalidAnchor</span> ) , <span class="kw">_</span> <span class="op">=</span><span class="op">&gt;</span> <span class="prelude-ty">Option</span> :: <span class="prelude-val">None</span> } } <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">to_raw</span> ( <span class="op">&amp;</span> <span class="self">self</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">u32</span> { <span class="op">*</span> <span class="self">self</span> <span class="kw">as</span> <span class="ident">u32</span> } } <span class="ident">bitflags</span> <span class="op">!</span> { <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">Anchor</span> : <span class="ident">u32</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;the top edge of the anchor rectangle&quot;</span> ] <span class="kw">const</span> <span class="ident">Top</span> <span class="op">=</span> <span class="number">1</span> ; # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;the bottom edge of the anchor rectangle&quot;</span> ] <span class="kw">const</span> <span class="ident">Bottom</span> <span class="op">=</span> <span class="number">2</span> ; # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;the left edge of the anchor rectangle&quot;</span> ] <span class="kw">const</span> <span class="ident">Left</span> <span class="op">=</span> <span class="number">4</span> ; # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;the right edge of the anchor rectangle&quot;</span> ] <span class="kw">const</span> <span class="ident">Right</span> <span class="op">=</span> <span class="number">8</span> ; } } <span class="kw">impl</span> <span class="ident">Anchor</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">from_raw</span> ( <span class="ident">n</span> : <span class="ident">u32</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="ident">Anchor</span> <span class="op">&gt;</span> { <span class="prelude-val">Some</span> ( <span class="ident">Anchor</span> :: <span class="ident">from_bits_truncate</span> ( <span class="ident">n</span> ) ) } <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">to_raw</span> ( <span class="op">&amp;</span> <span class="self">self</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">u32</span> { <span class="self">self</span> . <span class="ident">bits</span> ( ) } } <span class="kw">pub</span> <span class="kw">enum</span> <span class="ident">Request</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;sets the size of the surface\n\nSets the size of the surface in surface-local coordinates. The\ncompositor will display the surface centered with respect to its\nanchors.\n\nIf you pass 0 for either value, the compositor will assign it and\ninform you of the assignment in the configure event. You must set your\nanchor to opposite edges in the dimensions you omit; not doing so is a\nprotocol error. Both values are 0 by default.\n\nSize is double-buffered, see wl_surface.commit.&quot;</span> ] <span class="ident">SetSize</span> { <span class="ident">width</span> : <span class="ident">u32</span> , <span class="ident">height</span> : <span class="ident">u32</span> , } , # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;configures the anchor point of the surface\n\nRequests that the compositor anchor the surface to the specified edges\nand corners. If two orthogonal edges are specified (e.g. &#39;top&#39; and\n&#39;left&#39;), then the anchor point will be the intersection of the edges\n(e.g. the top left corner of the output); otherwise the anchor point\nwill be centered on that edge, or in the center if none is specified.\n\nAnchor is double-buffered, see wl_surface.commit.&quot;</span> ] <span class="ident">SetAnchor</span> { <span class="ident">anchor</span> : <span class="ident">Anchor</span> , } , # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;configures the exclusive geometry of this surface\n\nRequests that the compositor avoids occluding an area of the surface\nwith other surfaces. The compositor&#39;s use of this information is\nimplementation-dependent - do not assume that this region will not\nactually be occluded.\n\nA positive value is only meaningful if the surface is anchored to an\nedge, rather than a corner. The zone is the number of surface-local\ncoordinates from the edge that is considered exclusive.\n\nSurfaces that do not wish to have an exclusive zone may instead specify\nhow they should interact with surfaces that do. If set to zero, the\nsurface indicates that it would like to be moved to avoid occluding\nsurfaces with a positive exclusive zone. If set to -1, the surface\nindicates that it would not like to be moved to accommodate for other\nsurfaces, and the compositor should extend it all the way to the edges\nit is anchored to.\n\nFor example, a panel might set its exclusive zone to 10, so that\nmaximized shell surfaces are not shown on top of it. A notification\nmight set its exclusive zone to 0, so that it is moved to avoid\noccluding the panel, but shell surfaces are shown underneath it. A\nwallpaper or lock screen might set their exclusive zone to -1, so that\nthey stretch below or over the panel.\n\nThe default value is 0.\n\nExclusive zone is double-buffered, see wl_surface.commit.&quot;</span> ] <span class="ident">SetExclusiveZone</span> { <span class="ident">zone</span> : <span class="ident">i32</span> , } , # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;sets a margin from the anchor point\n\nRequests that the surface be placed some distance away from the anchor\npoint on the output, in surface-local coordinates. Setting this value\nfor edges you are not anchored to has no effect.\n\nThe exclusive zone includes the margin.\n\nMargin is double-buffered, see wl_surface.commit.&quot;</span> ] <span class="ident">SetMargin</span> { <span class="ident">top</span> : <span class="ident">i32</span> , <span class="ident">right</span> : <span class="ident">i32</span> , <span class="ident">bottom</span> : <span class="ident">i32</span> , <span class="ident">left</span> : <span class="ident">i32</span> , } , # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;requests keyboard events\n\nSet to 1 to request that the seat send keyboard events to this layer\nsurface. For layers below the shell surface layer, the seat will use\nnormal focus semantics. For layers above the shell surface layers, the\nseat will always give exclusive keyboard focus to the top-most layer\nwhich has keyboard interactivity set to true.\n\nLayer surfaces receive pointer, touch, and tablet events normally. If\nyou do not want to receive them, set the input region on your surface\nto an empty region.\n\nEvents is double-buffered, see wl_surface.commit.&quot;</span> ] <span class="ident">SetKeyboardInteractivity</span> { <span class="ident">keyboard_interactivity</span> : <span class="ident">u32</span> , } , # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;assign this layer_surface as an xdg_popup parent\n\nThis assigns an xdg_popup&#39;s parent to this layer_surface.  This popup\nshould have been created via xdg_surface::get_popup with the parent set\nto NULL, and this request must be invoked before committing the popup&#39;s\ninitial state.\n\nSee the documentation of xdg_popup for more details about what an\nxdg_popup is and how it is used.&quot;</span> ] <span class="ident">GetPopup</span> { <span class="ident">popup</span> : <span class="ident">Proxy</span> <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">xdg_popup</span> :: <span class="ident">XdgPopup</span> <span class="op">&gt;</span> , } , # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;ack a configure event\n\nWhen a configure event is received, if a client commits the\nsurface in response to the configure event, then the client\nmust make an ack_configure request sometime before the commit\nrequest, passing along the serial of the configure event.\n\nIf the client receives multiple configure events before it\ncan respond to one, it only has to ack the last configure event.\n\nA client is not required to commit immediately after sending\nan ack_configure request - it may even ack_configure several times\nbefore its next surface commit.\n\nA client may send multiple ack_configure requests before committing, but\nonly the last request sent before a commit indicates which configure\nevent the client really is responding to.&quot;</span> ] <span class="ident">AckConfigure</span> { <span class="ident">serial</span> : <span class="ident">u32</span> , } , # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;destroy the layer_surface\n\nThis request destroys the layer surface.\n\nThis is a destructor, once sent this object cannot be used any longer.&quot;</span> ] <span class="ident">Destroy</span> , } <span class="kw">impl</span> <span class="kw">super</span> :: <span class="ident">MessageGroup</span> <span class="kw">for</span> <span class="ident">Request</span> { <span class="kw">const</span> <span class="ident">MESSAGES</span> : <span class="op">&amp;</span> <span class="lifetime">&#39;static</span> [ <span class="kw">super</span> :: <span class="ident">MessageDesc</span> ] <span class="op">=</span> <span class="op">&amp;</span> [ <span class="kw">super</span> :: <span class="ident">MessageDesc</span> { <span class="ident">name</span> : <span class="string">&quot;set_size&quot;</span> , <span class="ident">since</span> : <span class="number">1</span> , <span class="ident">signature</span> : <span class="op">&amp;</span> [ <span class="kw">super</span> :: <span class="ident">ArgumentType</span> :: <span class="ident">Uint</span> , <span class="kw">super</span> :: <span class="ident">ArgumentType</span> :: <span class="ident">Uint</span> , ] , } , <span class="kw">super</span> :: <span class="ident">MessageDesc</span> { <span class="ident">name</span> : <span class="string">&quot;set_anchor&quot;</span> , <span class="ident">since</span> : <span class="number">1</span> , <span class="ident">signature</span> : <span class="op">&amp;</span> [ <span class="kw">super</span> :: <span class="ident">ArgumentType</span> :: <span class="ident">Uint</span> , ] , } , <span class="kw">super</span> :: <span class="ident">MessageDesc</span> { <span class="ident">name</span> : <span class="string">&quot;set_exclusive_zone&quot;</span> , <span class="ident">since</span> : <span class="number">1</span> , <span class="ident">signature</span> : <span class="op">&amp;</span> [ <span class="kw">super</span> :: <span class="ident">ArgumentType</span> :: <span class="ident">Int</span> , ] , } , <span class="kw">super</span> :: <span class="ident">MessageDesc</span> { <span class="ident">name</span> : <span class="string">&quot;set_margin&quot;</span> , <span class="ident">since</span> : <span class="number">1</span> , <span class="ident">signature</span> : <span class="op">&amp;</span> [ <span class="kw">super</span> :: <span class="ident">ArgumentType</span> :: <span class="ident">Int</span> , <span class="kw">super</span> :: <span class="ident">ArgumentType</span> :: <span class="ident">Int</span> , <span class="kw">super</span> :: <span class="ident">ArgumentType</span> :: <span class="ident">Int</span> , <span class="kw">super</span> :: <span class="ident">ArgumentType</span> :: <span class="ident">Int</span> , ] , } , <span class="kw">super</span> :: <span class="ident">MessageDesc</span> { <span class="ident">name</span> : <span class="string">&quot;set_keyboard_interactivity&quot;</span> , <span class="ident">since</span> : <span class="number">1</span> , <span class="ident">signature</span> : <span class="op">&amp;</span> [ <span class="kw">super</span> :: <span class="ident">ArgumentType</span> :: <span class="ident">Uint</span> , ] , } , <span class="kw">super</span> :: <span class="ident">MessageDesc</span> { <span class="ident">name</span> : <span class="string">&quot;get_popup&quot;</span> , <span class="ident">since</span> : <span class="number">1</span> , <span class="ident">signature</span> : <span class="op">&amp;</span> [ <span class="kw">super</span> :: <span class="ident">ArgumentType</span> :: <span class="ident">Object</span> , ] , } , <span class="kw">super</span> :: <span class="ident">MessageDesc</span> { <span class="ident">name</span> : <span class="string">&quot;ack_configure&quot;</span> , <span class="ident">since</span> : <span class="number">1</span> , <span class="ident">signature</span> : <span class="op">&amp;</span> [ <span class="kw">super</span> :: <span class="ident">ArgumentType</span> :: <span class="ident">Uint</span> , ] , } , <span class="kw">super</span> :: <span class="ident">MessageDesc</span> { <span class="ident">name</span> : <span class="string">&quot;destroy&quot;</span> , <span class="ident">since</span> : <span class="number">1</span> , <span class="ident">signature</span> : <span class="op">&amp;</span> [ ] , } , ] ; <span class="kw">type</span> <span class="ident">Map</span> <span class="op">=</span> <span class="kw">super</span> :: <span class="ident">ProxyMap</span> ; <span class="kw">fn</span> <span class="ident">is_destructor</span> ( <span class="op">&amp;</span> <span class="self">self</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">bool</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { <span class="ident">Request</span> :: <span class="ident">Destroy</span> <span class="op">=</span><span class="op">&gt;</span> <span class="bool-val">true</span> , <span class="kw">_</span> <span class="op">=</span><span class="op">&gt;</span> <span class="bool-val">false</span> , } } <span class="kw">fn</span> <span class="ident">opcode</span> ( <span class="op">&amp;</span> <span class="self">self</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">u16</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { <span class="ident">Request</span> :: <span class="ident">SetSize</span> { .. } <span class="op">=</span><span class="op">&gt;</span> <span class="number">0</span> , <span class="ident">Request</span> :: <span class="ident">SetAnchor</span> { .. } <span class="op">=</span><span class="op">&gt;</span> <span class="number">1</span> , <span class="ident">Request</span> :: <span class="ident">SetExclusiveZone</span> { .. } <span class="op">=</span><span class="op">&gt;</span> <span class="number">2</span> , <span class="ident">Request</span> :: <span class="ident">SetMargin</span> { .. } <span class="op">=</span><span class="op">&gt;</span> <span class="number">3</span> , <span class="ident">Request</span> :: <span class="ident">SetKeyboardInteractivity</span> { .. } <span class="op">=</span><span class="op">&gt;</span> <span class="number">4</span> , <span class="ident">Request</span> :: <span class="ident">GetPopup</span> { .. } <span class="op">=</span><span class="op">&gt;</span> <span class="number">5</span> , <span class="ident">Request</span> :: <span class="ident">AckConfigure</span> { .. } <span class="op">=</span><span class="op">&gt;</span> <span class="number">6</span> , <span class="ident">Request</span> :: <span class="ident">Destroy</span> <span class="op">=</span><span class="op">&gt;</span> <span class="number">7</span> , } } <span class="kw">fn</span> <span class="ident">child</span> <span class="op">&lt;</span> <span class="ident">Meta</span> : <span class="ident">ObjectMetadata</span> <span class="op">&gt;</span> ( <span class="ident">opcode</span> : <span class="ident">u16</span> , <span class="ident">version</span> : <span class="ident">u32</span> , <span class="ident">meta</span> : <span class="op">&amp;</span> <span class="ident">Meta</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="ident">Object</span> <span class="op">&lt;</span> <span class="ident">Meta</span> <span class="op">&gt;</span><span class="op">&gt;</span> { <span class="kw">match</span> <span class="ident">opcode</span> { <span class="kw">_</span> <span class="op">=</span><span class="op">&gt;</span> <span class="prelude-val">None</span> , } } <span class="kw">fn</span> <span class="ident">from_raw</span> ( <span class="ident">msg</span> : <span class="ident">Message</span> , <span class="ident">map</span> : <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="self">Self</span> :: <span class="ident">Map</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Result</span> <span class="op">&lt;</span> <span class="self">Self</span> , ( ) <span class="op">&gt;</span> { <span class="ident">panic</span> <span class="op">!</span> ( <span class="string">&quot;Request::from_raw can not be used Client-side.&quot;</span> ) } <span class="kw">fn</span> <span class="ident">into_raw</span> ( <span class="self">self</span> , <span class="ident">sender_id</span> : <span class="ident">u32</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">Message</span> { <span class="kw">match</span> <span class="self">self</span> { <span class="ident">Request</span> :: <span class="ident">SetSize</span> { <span class="ident">width</span> , <span class="ident">height</span> } <span class="op">=</span><span class="op">&gt;</span> <span class="ident">Message</span> { <span class="ident">sender_id</span> : <span class="ident">sender_id</span> , <span class="ident">opcode</span> : <span class="number">0</span> , <span class="ident">args</span> : <span class="ident">vec</span> <span class="op">!</span> [ <span class="ident">Argument</span> :: <span class="ident">Uint</span> ( <span class="ident">width</span> ) , <span class="ident">Argument</span> :: <span class="ident">Uint</span> ( <span class="ident">height</span> ) , ] , } , <span class="ident">Request</span> :: <span class="ident">SetAnchor</span> { <span class="ident">anchor</span> } <span class="op">=</span><span class="op">&gt;</span> <span class="ident">Message</span> { <span class="ident">sender_id</span> : <span class="ident">sender_id</span> , <span class="ident">opcode</span> : <span class="number">1</span> , <span class="ident">args</span> : <span class="ident">vec</span> <span class="op">!</span> [ <span class="ident">Argument</span> :: <span class="ident">Uint</span> ( <span class="ident">anchor</span> . <span class="ident">to_raw</span> ( ) ) , ] , } , <span class="ident">Request</span> :: <span class="ident">SetExclusiveZone</span> { <span class="ident">zone</span> } <span class="op">=</span><span class="op">&gt;</span> <span class="ident">Message</span> { <span class="ident">sender_id</span> : <span class="ident">sender_id</span> , <span class="ident">opcode</span> : <span class="number">2</span> , <span class="ident">args</span> : <span class="ident">vec</span> <span class="op">!</span> [ <span class="ident">Argument</span> :: <span class="ident">Int</span> ( <span class="ident">zone</span> ) , ] , } , <span class="ident">Request</span> :: <span class="ident">SetMargin</span> { <span class="ident">top</span> , <span class="ident">right</span> , <span class="ident">bottom</span> , <span class="ident">left</span> } <span class="op">=</span><span class="op">&gt;</span> <span class="ident">Message</span> { <span class="ident">sender_id</span> : <span class="ident">sender_id</span> , <span class="ident">opcode</span> : <span class="number">3</span> , <span class="ident">args</span> : <span class="ident">vec</span> <span class="op">!</span> [ <span class="ident">Argument</span> :: <span class="ident">Int</span> ( <span class="ident">top</span> ) , <span class="ident">Argument</span> :: <span class="ident">Int</span> ( <span class="ident">right</span> ) , <span class="ident">Argument</span> :: <span class="ident">Int</span> ( <span class="ident">bottom</span> ) , <span class="ident">Argument</span> :: <span class="ident">Int</span> ( <span class="ident">left</span> ) , ] , } , <span class="ident">Request</span> :: <span class="ident">SetKeyboardInteractivity</span> { <span class="ident">keyboard_interactivity</span> } <span class="op">=</span><span class="op">&gt;</span> <span class="ident">Message</span> { <span class="ident">sender_id</span> : <span class="ident">sender_id</span> , <span class="ident">opcode</span> : <span class="number">4</span> , <span class="ident">args</span> : <span class="ident">vec</span> <span class="op">!</span> [ <span class="ident">Argument</span> :: <span class="ident">Uint</span> ( <span class="ident">keyboard_interactivity</span> ) , ] , } , <span class="ident">Request</span> :: <span class="ident">GetPopup</span> { <span class="ident">popup</span> } <span class="op">=</span><span class="op">&gt;</span> <span class="ident">Message</span> { <span class="ident">sender_id</span> : <span class="ident">sender_id</span> , <span class="ident">opcode</span> : <span class="number">5</span> , <span class="ident">args</span> : <span class="ident">vec</span> <span class="op">!</span> [ <span class="ident">Argument</span> :: <span class="ident">Object</span> ( <span class="ident">popup</span> . <span class="ident">id</span> ( ) ) , ] , } , <span class="ident">Request</span> :: <span class="ident">AckConfigure</span> { <span class="ident">serial</span> } <span class="op">=</span><span class="op">&gt;</span> <span class="ident">Message</span> { <span class="ident">sender_id</span> : <span class="ident">sender_id</span> , <span class="ident">opcode</span> : <span class="number">6</span> , <span class="ident">args</span> : <span class="ident">vec</span> <span class="op">!</span> [ <span class="ident">Argument</span> :: <span class="ident">Uint</span> ( <span class="ident">serial</span> ) , ] , } , <span class="ident">Request</span> :: <span class="ident">Destroy</span> <span class="op">=</span><span class="op">&gt;</span> <span class="ident">Message</span> { <span class="ident">sender_id</span> : <span class="ident">sender_id</span> , <span class="ident">opcode</span> : <span class="number">7</span> , <span class="ident">args</span> : <span class="ident">vec</span> <span class="op">!</span> [ ] , } , } } <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_raw_c</span> ( <span class="ident">obj</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> , <span class="ident">opcode</span> : <span class="ident">u32</span> , <span class="ident">args</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">wl_argument</span> , ) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Result</span> <span class="op">&lt;</span> <span class="ident">Request</span> , ( ) <span class="op">&gt;</span> { <span class="ident">panic</span> <span class="op">!</span> ( <span class="string">&quot;Request::from_raw_c can not be used Client-side.&quot;</span> ) } <span class="kw">fn</span> <span class="ident">as_raw_c_in</span> <span class="op">&lt;</span> <span class="ident">F</span> , <span class="ident">T</span> <span class="op">&gt;</span> ( <span class="self">self</span> , <span class="ident">f</span> : <span class="ident">F</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">T</span> <span class="kw">where</span> <span class="ident">F</span> : <span class="ident">FnOnce</span> ( <span class="ident">u32</span> , <span class="op">&amp;</span> <span class="kw-2">mut</span> [ <span class="ident">wl_argument</span> ] ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">T</span> { <span class="kw">match</span> <span class="self">self</span> { <span class="ident">Request</span> :: <span class="ident">SetSize</span> { <span class="ident">width</span> , <span class="ident">height</span> } <span class="op">=</span><span class="op">&gt;</span> { <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span> : [ <span class="ident">wl_argument</span> ; <span class="number">2</span> ] <span class="op">=</span> <span class="kw">unsafe</span> { :: <span class="ident">std</span> :: <span class="ident">mem</span> :: <span class="ident">zeroed</span> ( ) } ; <span class="ident">_args_array</span> [ <span class="number">0</span> ] . <span class="ident">u</span> <span class="op">=</span> <span class="ident">width</span> ; <span class="ident">_args_array</span> [ <span class="number">1</span> ] . <span class="ident">u</span> <span class="op">=</span> <span class="ident">height</span> ; <span class="ident">f</span> ( <span class="number">0</span> , <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span> ) } , <span class="ident">Request</span> :: <span class="ident">SetAnchor</span> { <span class="ident">anchor</span> } <span class="op">=</span><span class="op">&gt;</span> { <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span> : [ <span class="ident">wl_argument</span> ; <span class="number">1</span> ] <span class="op">=</span> <span class="kw">unsafe</span> { :: <span class="ident">std</span> :: <span class="ident">mem</span> :: <span class="ident">zeroed</span> ( ) } ; <span class="ident">_args_array</span> [ <span class="number">0</span> ] . <span class="ident">u</span> <span class="op">=</span> <span class="ident">anchor</span> . <span class="ident">to_raw</span> ( ) ; <span class="ident">f</span> ( <span class="number">1</span> , <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span> ) } , <span class="ident">Request</span> :: <span class="ident">SetExclusiveZone</span> { <span class="ident">zone</span> } <span class="op">=</span><span class="op">&gt;</span> { <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span> : [ <span class="ident">wl_argument</span> ; <span class="number">1</span> ] <span class="op">=</span> <span class="kw">unsafe</span> { :: <span class="ident">std</span> :: <span class="ident">mem</span> :: <span class="ident">zeroed</span> ( ) } ; <span class="ident">_args_array</span> [ <span class="number">0</span> ] . <span class="ident">i</span> <span class="op">=</span> <span class="ident">zone</span> ; <span class="ident">f</span> ( <span class="number">2</span> , <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span> ) } , <span class="ident">Request</span> :: <span class="ident">SetMargin</span> { <span class="ident">top</span> , <span class="ident">right</span> , <span class="ident">bottom</span> , <span class="ident">left</span> } <span class="op">=</span><span class="op">&gt;</span> { <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span> : [ <span class="ident">wl_argument</span> ; <span class="number">4</span> ] <span class="op">=</span> <span class="kw">unsafe</span> { :: <span class="ident">std</span> :: <span class="ident">mem</span> :: <span class="ident">zeroed</span> ( ) } ; <span class="ident">_args_array</span> [ <span class="number">0</span> ] . <span class="ident">i</span> <span class="op">=</span> <span class="ident">top</span> ; <span class="ident">_args_array</span> [ <span class="number">1</span> ] . <span class="ident">i</span> <span class="op">=</span> <span class="ident">right</span> ; <span class="ident">_args_array</span> [ <span class="number">2</span> ] . <span class="ident">i</span> <span class="op">=</span> <span class="ident">bottom</span> ; <span class="ident">_args_array</span> [ <span class="number">3</span> ] . <span class="ident">i</span> <span class="op">=</span> <span class="ident">left</span> ; <span class="ident">f</span> ( <span class="number">3</span> , <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span> ) } , <span class="ident">Request</span> :: <span class="ident">SetKeyboardInteractivity</span> { <span class="ident">keyboard_interactivity</span> } <span class="op">=</span><span class="op">&gt;</span> { <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span> : [ <span class="ident">wl_argument</span> ; <span class="number">1</span> ] <span class="op">=</span> <span class="kw">unsafe</span> { :: <span class="ident">std</span> :: <span class="ident">mem</span> :: <span class="ident">zeroed</span> ( ) } ; <span class="ident">_args_array</span> [ <span class="number">0</span> ] . <span class="ident">u</span> <span class="op">=</span> <span class="ident">keyboard_interactivity</span> ; <span class="ident">f</span> ( <span class="number">4</span> , <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span> ) } , <span class="ident">Request</span> :: <span class="ident">GetPopup</span> { <span class="ident">popup</span> } <span class="op">=</span><span class="op">&gt;</span> { <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span> : [ <span class="ident">wl_argument</span> ; <span class="number">1</span> ] <span class="op">=</span> <span class="kw">unsafe</span> { :: <span class="ident">std</span> :: <span class="ident">mem</span> :: <span class="ident">zeroed</span> ( ) } ; <span class="ident">_args_array</span> [ <span class="number">0</span> ] . <span class="ident">o</span> <span class="op">=</span> <span class="ident">popup</span> . <span class="ident">c_ptr</span> ( ) <span class="kw">as</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="kw">_</span> ; <span class="ident">f</span> ( <span class="number">5</span> , <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span> ) } , <span class="ident">Request</span> :: <span class="ident">AckConfigure</span> { <span class="ident">serial</span> } <span class="op">=</span><span class="op">&gt;</span> { <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span> : [ <span class="ident">wl_argument</span> ; <span class="number">1</span> ] <span class="op">=</span> <span class="kw">unsafe</span> { :: <span class="ident">std</span> :: <span class="ident">mem</span> :: <span class="ident">zeroed</span> ( ) } ; <span class="ident">_args_array</span> [ <span class="number">0</span> ] . <span class="ident">u</span> <span class="op">=</span> <span class="ident">serial</span> ; <span class="ident">f</span> ( <span class="number">6</span> , <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span> ) } , <span class="ident">Request</span> :: <span class="ident">Destroy</span> <span class="op">=</span><span class="op">&gt;</span> { <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span> : [ <span class="ident">wl_argument</span> ; <span class="number">0</span> ] <span class="op">=</span> <span class="kw">unsafe</span> { :: <span class="ident">std</span> :: <span class="ident">mem</span> :: <span class="ident">zeroed</span> ( ) } ; <span class="ident">f</span> ( <span class="number">7</span> , <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span> ) } , } } } <span class="kw">pub</span> <span class="kw">enum</span> <span class="ident">Event</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;suggest a surface change\n\nThe configure event asks the client to resize its surface.\n\nClients should arrange their surface for the new states, and then send\nan ack_configure request with the serial sent in this configure event at\nsome point before committing the new surface.\n\nThe client is free to dismiss all but the last configure event it\nreceived.\n\nThe width and height arguments specify the size of the window in\nsurface-local coordinates.\n\nThe size is a hint, in the sense that the client is free to ignore it if\nit doesn&#39;t resize, pick a smaller size (to satisfy aspect ratio or\nresize in steps of NxM pixels). If the client picks a smaller size and\nis anchored to two opposite anchors (e.g. &#39;top&#39; and &#39;bottom&#39;), the\nsurface will be centered on this axis.\n\nIf the width or height arguments are zero, it means the client should\ndecide its own window dimension.&quot;</span> ] <span class="ident">Configure</span> { <span class="ident">serial</span> : <span class="ident">u32</span> , <span class="ident">width</span> : <span class="ident">u32</span> , <span class="ident">height</span> : <span class="ident">u32</span> , } , # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;surface should be closed\n\nThe closed event is sent by the compositor when the surface will no\nlonger be shown. The output may have been destroyed or the user may\nhave asked for it to be removed. Further changes to the surface will be\nignored. The client should destroy the resource after receiving this\nevent, and create a new surface if they so choose.&quot;</span> ] <span class="ident">Closed</span> , } <span class="kw">impl</span> <span class="kw">super</span> :: <span class="ident">MessageGroup</span> <span class="kw">for</span> <span class="ident">Event</span> { <span class="kw">const</span> <span class="ident">MESSAGES</span> : <span class="op">&amp;</span> <span class="lifetime">&#39;static</span> [ <span class="kw">super</span> :: <span class="ident">MessageDesc</span> ] <span class="op">=</span> <span class="op">&amp;</span> [ <span class="kw">super</span> :: <span class="ident">MessageDesc</span> { <span class="ident">name</span> : <span class="string">&quot;configure&quot;</span> , <span class="ident">since</span> : <span class="number">1</span> , <span class="ident">signature</span> : <span class="op">&amp;</span> [ <span class="kw">super</span> :: <span class="ident">ArgumentType</span> :: <span class="ident">Uint</span> , <span class="kw">super</span> :: <span class="ident">ArgumentType</span> :: <span class="ident">Uint</span> , <span class="kw">super</span> :: <span class="ident">ArgumentType</span> :: <span class="ident">Uint</span> , ] , } , <span class="kw">super</span> :: <span class="ident">MessageDesc</span> { <span class="ident">name</span> : <span class="string">&quot;closed&quot;</span> , <span class="ident">since</span> : <span class="number">1</span> , <span class="ident">signature</span> : <span class="op">&amp;</span> [ ] , } , ] ; <span class="kw">type</span> <span class="ident">Map</span> <span class="op">=</span> <span class="kw">super</span> :: <span class="ident">ProxyMap</span> ; <span class="kw">fn</span> <span class="ident">is_destructor</span> ( <span class="op">&amp;</span> <span class="self">self</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">bool</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { <span class="kw">_</span> <span class="op">=</span><span class="op">&gt;</span> <span class="bool-val">false</span> , } } <span class="kw">fn</span> <span class="ident">opcode</span> ( <span class="op">&amp;</span> <span class="self">self</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">u16</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { <span class="ident">Event</span> :: <span class="ident">Configure</span> { .. } <span class="op">=</span><span class="op">&gt;</span> <span class="number">0</span> , <span class="ident">Event</span> :: <span class="ident">Closed</span> <span class="op">=</span><span class="op">&gt;</span> <span class="number">1</span> , } } <span class="kw">fn</span> <span class="ident">child</span> <span class="op">&lt;</span> <span class="ident">Meta</span> : <span class="ident">ObjectMetadata</span> <span class="op">&gt;</span> ( <span class="ident">opcode</span> : <span class="ident">u16</span> , <span class="ident">version</span> : <span class="ident">u32</span> , <span class="ident">meta</span> : <span class="op">&amp;</span> <span class="ident">Meta</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="ident">Object</span> <span class="op">&lt;</span> <span class="ident">Meta</span> <span class="op">&gt;</span><span class="op">&gt;</span> { <span class="kw">match</span> <span class="ident">opcode</span> { <span class="kw">_</span> <span class="op">=</span><span class="op">&gt;</span> <span class="prelude-val">None</span> , } } <span class="kw">fn</span> <span class="ident">from_raw</span> ( <span class="ident">msg</span> : <span class="ident">Message</span> , <span class="ident">map</span> : <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="self">Self</span> :: <span class="ident">Map</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Result</span> <span class="op">&lt;</span> <span class="self">Self</span> , ( ) <span class="op">&gt;</span> { <span class="kw">match</span> <span class="ident">msg</span> . <span class="ident">opcode</span> { <span class="number">0</span> <span class="op">=</span><span class="op">&gt;</span> { <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">args</span> <span class="op">=</span> <span class="ident">msg</span> . <span class="ident">args</span> . <span class="ident">into_iter</span> ( ) ; <span class="prelude-val">Ok</span> ( <span class="ident">Event</span> :: <span class="ident">Configure</span> { <span class="ident">serial</span> : { <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span> ( <span class="ident">Argument</span> :: <span class="ident">Uint</span> ( <span class="ident">val</span> ) ) <span class="op">=</span> <span class="ident">args</span> . <span class="ident">next</span> ( ) { <span class="ident">val</span> } <span class="kw">else</span> { <span class="kw">return</span> <span class="prelude-val">Err</span> ( ( ) ) ; } } , <span class="ident">width</span> : { <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span> ( <span class="ident">Argument</span> :: <span class="ident">Uint</span> ( <span class="ident">val</span> ) ) <span class="op">=</span> <span class="ident">args</span> . <span class="ident">next</span> ( ) { <span class="ident">val</span> } <span class="kw">else</span> { <span class="kw">return</span> <span class="prelude-val">Err</span> ( ( ) ) ; } } , <span class="ident">height</span> : { <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span> ( <span class="ident">Argument</span> :: <span class="ident">Uint</span> ( <span class="ident">val</span> ) ) <span class="op">=</span> <span class="ident">args</span> . <span class="ident">next</span> ( ) { <span class="ident">val</span> } <span class="kw">else</span> { <span class="kw">return</span> <span class="prelude-val">Err</span> ( ( ) ) ; } } , } ) } , <span class="number">1</span> <span class="op">=</span><span class="op">&gt;</span> <span class="prelude-val">Ok</span> ( <span class="ident">Event</span> :: <span class="ident">Closed</span> ) , <span class="kw">_</span> <span class="op">=</span><span class="op">&gt;</span> <span class="prelude-val">Err</span> ( ( ) ) , } } <span class="kw">fn</span> <span class="ident">into_raw</span> ( <span class="self">self</span> , <span class="ident">sender_id</span> : <span class="ident">u32</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">Message</span> { <span class="ident">panic</span> <span class="op">!</span> ( <span class="string">&quot;Event::into_raw can not be used Client-side.&quot;</span> ) } <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_raw_c</span> ( <span class="ident">obj</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> , <span class="ident">opcode</span> : <span class="ident">u32</span> , <span class="ident">args</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">wl_argument</span> , ) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Result</span> <span class="op">&lt;</span> <span class="ident">Event</span> , ( ) <span class="op">&gt;</span> { <span class="kw">match</span> <span class="ident">opcode</span> { <span class="number">0</span> <span class="op">=</span><span class="op">&gt;</span> { <span class="kw">let</span> <span class="ident">_args</span> <span class="op">=</span> :: <span class="ident">std</span> :: <span class="ident">slice</span> :: <span class="ident">from_raw_parts</span> ( <span class="ident">args</span> , <span class="number">3</span> ) ; <span class="prelude-val">Ok</span> ( <span class="ident">Event</span> :: <span class="ident">Configure</span> { <span class="ident">serial</span> : <span class="ident">_args</span> [ <span class="number">0</span> ] . <span class="ident">u</span> , <span class="ident">width</span> : <span class="ident">_args</span> [ <span class="number">1</span> ] . <span class="ident">u</span> , <span class="ident">height</span> : <span class="ident">_args</span> [ <span class="number">2</span> ] . <span class="ident">u</span> , } ) } , <span class="number">1</span> <span class="op">=</span><span class="op">&gt;</span> { <span class="prelude-val">Ok</span> ( <span class="ident">Event</span> :: <span class="ident">Closed</span> ) } , <span class="kw">_</span> <span class="op">=</span><span class="op">&gt;</span> <span class="kw">return</span> <span class="prelude-val">Err</span> ( ( ) ) , } } <span class="kw">fn</span> <span class="ident">as_raw_c_in</span> <span class="op">&lt;</span> <span class="ident">F</span> , <span class="ident">T</span> <span class="op">&gt;</span> ( <span class="self">self</span> , <span class="ident">f</span> : <span class="ident">F</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">T</span> <span class="kw">where</span> <span class="ident">F</span> : <span class="ident">FnOnce</span> ( <span class="ident">u32</span> , <span class="op">&amp;</span> <span class="kw-2">mut</span> [ <span class="ident">wl_argument</span> ] ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">T</span> { <span class="ident">panic</span> <span class="op">!</span> ( <span class="string">&quot;Event::as_raw_c_in can not be used Client-side.&quot;</span> ) } } <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">ZwlrLayerSurfaceV1</span> ; <span class="kw">impl</span> <span class="ident">Interface</span> <span class="kw">for</span> <span class="ident">ZwlrLayerSurfaceV1</span> { <span class="kw">type</span> <span class="ident">Request</span> <span class="op">=</span> <span class="ident">Request</span> ; <span class="kw">type</span> <span class="ident">Event</span> <span class="op">=</span> <span class="ident">Event</span> ; <span class="kw">const</span> <span class="ident">NAME</span> : <span class="op">&amp;</span> <span class="lifetime">&#39;static</span> <span class="ident">str</span> <span class="op">=</span> <span class="string">&quot;zwlr_layer_surface_v1&quot;</span> ; <span class="kw">const</span> <span class="ident">VERSION</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">1</span> ; <span class="kw">fn</span> <span class="ident">c_interface</span> ( ) <span class="op">-</span><span class="op">&gt;</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">wl_interface</span> { <span class="kw">unsafe</span> { <span class="op">&amp;</span> <span class="kw">super</span> :: <span class="kw">super</span> :: <span class="ident">c_interfaces</span> :: <span class="ident">zwlr_layer_surface_v1_interface</span> } } } <span class="kw">pub</span> <span class="kw">trait</span> <span class="ident">RequestsTrait</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;sets the size of the surface\n\nSets the size of the surface in surface-local coordinates. The\ncompositor will display the surface centered with respect to its\nanchors.\n\nIf you pass 0 for either value, the compositor will assign it and\ninform you of the assignment in the configure event. You must set your\nanchor to opposite edges in the dimensions you omit; not doing so is a\nprotocol error. Both values are 0 by default.\n\nSize is double-buffered, see wl_surface.commit.&quot;</span> ] <span class="kw">fn</span> <span class="ident">set_size</span> ( <span class="op">&amp;</span> <span class="self">self</span> , <span class="ident">width</span> : <span class="ident">u32</span> , <span class="ident">height</span> : <span class="ident">u32</span> ) <span class="op">-</span><span class="op">&gt;</span> ( ) ; # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;configures the anchor point of the surface\n\nRequests that the compositor anchor the surface to the specified edges\nand corners. If two orthogonal edges are specified (e.g. &#39;top&#39; and\n&#39;left&#39;), then the anchor point will be the intersection of the edges\n(e.g. the top left corner of the output); otherwise the anchor point\nwill be centered on that edge, or in the center if none is specified.\n\nAnchor is double-buffered, see wl_surface.commit.&quot;</span> ] <span class="kw">fn</span> <span class="ident">set_anchor</span> ( <span class="op">&amp;</span> <span class="self">self</span> , <span class="ident">anchor</span> : <span class="ident">Anchor</span> ) <span class="op">-</span><span class="op">&gt;</span> ( ) ; # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;configures the exclusive geometry of this surface\n\nRequests that the compositor avoids occluding an area of the surface\nwith other surfaces. The compositor&#39;s use of this information is\nimplementation-dependent - do not assume that this region will not\nactually be occluded.\n\nA positive value is only meaningful if the surface is anchored to an\nedge, rather than a corner. The zone is the number of surface-local\ncoordinates from the edge that is considered exclusive.\n\nSurfaces that do not wish to have an exclusive zone may instead specify\nhow they should interact with surfaces that do. If set to zero, the\nsurface indicates that it would like to be moved to avoid occluding\nsurfaces with a positive exclusive zone. If set to -1, the surface\nindicates that it would not like to be moved to accommodate for other\nsurfaces, and the compositor should extend it all the way to the edges\nit is anchored to.\n\nFor example, a panel might set its exclusive zone to 10, so that\nmaximized shell surfaces are not shown on top of it. A notification\nmight set its exclusive zone to 0, so that it is moved to avoid\noccluding the panel, but shell surfaces are shown underneath it. A\nwallpaper or lock screen might set their exclusive zone to -1, so that\nthey stretch below or over the panel.\n\nThe default value is 0.\n\nExclusive zone is double-buffered, see wl_surface.commit.&quot;</span> ] <span class="kw">fn</span> <span class="ident">set_exclusive_zone</span> ( <span class="op">&amp;</span> <span class="self">self</span> , <span class="ident">zone</span> : <span class="ident">i32</span> ) <span class="op">-</span><span class="op">&gt;</span> ( ) ; # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;sets a margin from the anchor point\n\nRequests that the surface be placed some distance away from the anchor\npoint on the output, in surface-local coordinates. Setting this value\nfor edges you are not anchored to has no effect.\n\nThe exclusive zone includes the margin.\n\nMargin is double-buffered, see wl_surface.commit.&quot;</span> ] <span class="kw">fn</span> <span class="ident">set_margin</span> ( <span class="op">&amp;</span> <span class="self">self</span> , <span class="ident">top</span> : <span class="ident">i32</span> , <span class="ident">right</span> : <span class="ident">i32</span> , <span class="ident">bottom</span> : <span class="ident">i32</span> , <span class="ident">left</span> : <span class="ident">i32</span> ) <span class="op">-</span><span class="op">&gt;</span> ( ) ; # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;requests keyboard events\n\nSet to 1 to request that the seat send keyboard events to this layer\nsurface. For layers below the shell surface layer, the seat will use\nnormal focus semantics. For layers above the shell surface layers, the\nseat will always give exclusive keyboard focus to the top-most layer\nwhich has keyboard interactivity set to true.\n\nLayer surfaces receive pointer, touch, and tablet events normally. If\nyou do not want to receive them, set the input region on your surface\nto an empty region.\n\nEvents is double-buffered, see wl_surface.commit.&quot;</span> ] <span class="kw">fn</span> <span class="ident">set_keyboard_interactivity</span> ( <span class="op">&amp;</span> <span class="self">self</span> , <span class="ident">keyboard_interactivity</span> : <span class="ident">u32</span> ) <span class="op">-</span><span class="op">&gt;</span> ( ) ; # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;assign this layer_surface as an xdg_popup parent\n\nThis assigns an xdg_popup&#39;s parent to this layer_surface.  This popup\nshould have been created via xdg_surface::get_popup with the parent set\nto NULL, and this request must be invoked before committing the popup&#39;s\ninitial state.\n\nSee the documentation of xdg_popup for more details about what an\nxdg_popup is and how it is used.&quot;</span> ] <span class="kw">fn</span> <span class="ident">get_popup</span> ( <span class="op">&amp;</span> <span class="self">self</span> , <span class="ident">popup</span> : <span class="op">&amp;</span> <span class="ident">Proxy</span> <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">xdg_popup</span> :: <span class="ident">XdgPopup</span> <span class="op">&gt;</span> ) <span class="op">-</span><span class="op">&gt;</span> ( ) ; # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;ack a configure event\n\nWhen a configure event is received, if a client commits the\nsurface in response to the configure event, then the client\nmust make an ack_configure request sometime before the commit\nrequest, passing along the serial of the configure event.\n\nIf the client receives multiple configure events before it\ncan respond to one, it only has to ack the last configure event.\n\nA client is not required to commit immediately after sending\nan ack_configure request - it may even ack_configure several times\nbefore its next surface commit.\n\nA client may send multiple ack_configure requests before committing, but\nonly the last request sent before a commit indicates which configure\nevent the client really is responding to.&quot;</span> ] <span class="kw">fn</span> <span class="ident">ack_configure</span> ( <span class="op">&amp;</span> <span class="self">self</span> , <span class="ident">serial</span> : <span class="ident">u32</span> ) <span class="op">-</span><span class="op">&gt;</span> ( ) ; # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;destroy the layer_surface\n\nThis request destroys the layer surface.\n\nThis is a destructor, you cannot send requests to this object any longer once this method is called.&quot;</span> ] <span class="kw">fn</span> <span class="ident">destroy</span> ( <span class="op">&amp;</span> <span class="self">self</span> , ) <span class="op">-</span><span class="op">&gt;</span> ( ) ; } <span class="kw">impl</span> <span class="ident">RequestsTrait</span> <span class="kw">for</span> <span class="ident">Proxy</span> <span class="op">&lt;</span> <span class="ident">ZwlrLayerSurfaceV1</span> <span class="op">&gt;</span> { <span class="kw">fn</span> <span class="ident">set_size</span> ( <span class="op">&amp;</span> <span class="self">self</span> , <span class="ident">width</span> : <span class="ident">u32</span> , <span class="ident">height</span> : <span class="ident">u32</span> ) <span class="op">-</span><span class="op">&gt;</span> ( ) { <span class="kw">let</span> <span class="ident">msg</span> <span class="op">=</span> <span class="ident">Request</span> :: <span class="ident">SetSize</span> { <span class="ident">width</span> : <span class="ident">width</span> , <span class="ident">height</span> : <span class="ident">height</span> } ; <span class="self">self</span> . <span class="ident">send</span> ( <span class="ident">msg</span> ) ; } <span class="kw">fn</span> <span class="ident">set_anchor</span> ( <span class="op">&amp;</span> <span class="self">self</span> , <span class="ident">anchor</span> : <span class="ident">Anchor</span> ) <span class="op">-</span><span class="op">&gt;</span> ( ) { <span class="kw">let</span> <span class="ident">msg</span> <span class="op">=</span> <span class="ident">Request</span> :: <span class="ident">SetAnchor</span> { <span class="ident">anchor</span> : <span class="ident">anchor</span> } ; <span class="self">self</span> . <span class="ident">send</span> ( <span class="ident">msg</span> ) ; } <span class="kw">fn</span> <span class="ident">set_exclusive_zone</span> ( <span class="op">&amp;</span> <span class="self">self</span> , <span class="ident">zone</span> : <span class="ident">i32</span> ) <span class="op">-</span><span class="op">&gt;</span> ( ) { <span class="kw">let</span> <span class="ident">msg</span> <span class="op">=</span> <span class="ident">Request</span> :: <span class="ident">SetExclusiveZone</span> { <span class="ident">zone</span> : <span class="ident">zone</span> } ; <span class="self">self</span> . <span class="ident">send</span> ( <span class="ident">msg</span> ) ; } <span class="kw">fn</span> <span class="ident">set_margin</span> ( <span class="op">&amp;</span> <span class="self">self</span> , <span class="ident">top</span> : <span class="ident">i32</span> , <span class="ident">right</span> : <span class="ident">i32</span> , <span class="ident">bottom</span> : <span class="ident">i32</span> , <span class="ident">left</span> : <span class="ident">i32</span> ) <span class="op">-</span><span class="op">&gt;</span> ( ) { <span class="kw">let</span> <span class="ident">msg</span> <span class="op">=</span> <span class="ident">Request</span> :: <span class="ident">SetMargin</span> { <span class="ident">top</span> : <span class="ident">top</span> , <span class="ident">right</span> : <span class="ident">right</span> , <span class="ident">bottom</span> : <span class="ident">bottom</span> , <span class="ident">left</span> : <span class="ident">left</span> } ; <span class="self">self</span> . <span class="ident">send</span> ( <span class="ident">msg</span> ) ; } <span class="kw">fn</span> <span class="ident">set_keyboard_interactivity</span> ( <span class="op">&amp;</span> <span class="self">self</span> , <span class="ident">keyboard_interactivity</span> : <span class="ident">u32</span> ) <span class="op">-</span><span class="op">&gt;</span> ( ) { <span class="kw">let</span> <span class="ident">msg</span> <span class="op">=</span> <span class="ident">Request</span> :: <span class="ident">SetKeyboardInteractivity</span> { <span class="ident">keyboard_interactivity</span> : <span class="ident">keyboard_interactivity</span> } ; <span class="self">self</span> . <span class="ident">send</span> ( <span class="ident">msg</span> ) ; } <span class="kw">fn</span> <span class="ident">get_popup</span> ( <span class="op">&amp;</span> <span class="self">self</span> , <span class="ident">popup</span> : <span class="op">&amp;</span> <span class="ident">Proxy</span> <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">xdg_popup</span> :: <span class="ident">XdgPopup</span> <span class="op">&gt;</span> ) <span class="op">-</span><span class="op">&gt;</span> ( ) { <span class="kw">let</span> <span class="ident">msg</span> <span class="op">=</span> <span class="ident">Request</span> :: <span class="ident">GetPopup</span> { <span class="ident">popup</span> : <span class="ident">popup</span> . <span class="ident">clone</span> ( ) } ; <span class="self">self</span> . <span class="ident">send</span> ( <span class="ident">msg</span> ) ; } <span class="kw">fn</span> <span class="ident">ack_configure</span> ( <span class="op">&amp;</span> <span class="self">self</span> , <span class="ident">serial</span> : <span class="ident">u32</span> ) <span class="op">-</span><span class="op">&gt;</span> ( ) { <span class="kw">let</span> <span class="ident">msg</span> <span class="op">=</span> <span class="ident">Request</span> :: <span class="ident">AckConfigure</span> { <span class="ident">serial</span> : <span class="ident">serial</span> } ; <span class="self">self</span> . <span class="ident">send</span> ( <span class="ident">msg</span> ) ; } <span class="kw">fn</span> <span class="ident">destroy</span> ( <span class="op">&amp;</span> <span class="self">self</span> , ) <span class="op">-</span><span class="op">&gt;</span> ( ) { <span class="kw">let</span> <span class="ident">msg</span> <span class="op">=</span> <span class="ident">Request</span> :: <span class="ident">Destroy</span> ; <span class="self">self</span> . <span class="ident">send</span> ( <span class="ident">msg</span> ) ; } } # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; The minimal object version supporting this request&quot;</span> ] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">REQ_SET_SIZE_SINCE</span> : <span class="ident">u16</span> <span class="op">=</span> <span class="number">1u16</span> ; # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; The minimal object version supporting this request&quot;</span> ] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">REQ_SET_ANCHOR_SINCE</span> : <span class="ident">u16</span> <span class="op">=</span> <span class="number">1u16</span> ; # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; The minimal object version supporting this request&quot;</span> ] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">REQ_SET_EXCLUSIVE_ZONE_SINCE</span> : <span class="ident">u16</span> <span class="op">=</span> <span class="number">1u16</span> ; # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; The minimal object version supporting this request&quot;</span> ] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">REQ_SET_MARGIN_SINCE</span> : <span class="ident">u16</span> <span class="op">=</span> <span class="number">1u16</span> ; # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; The minimal object version supporting this request&quot;</span> ] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">REQ_SET_KEYBOARD_INTERACTIVITY_SINCE</span> : <span class="ident">u16</span> <span class="op">=</span> <span class="number">1u16</span> ; # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; The minimal object version supporting this request&quot;</span> ] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">REQ_GET_POPUP_SINCE</span> : <span class="ident">u16</span> <span class="op">=</span> <span class="number">1u16</span> ; # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; The minimal object version supporting this request&quot;</span> ] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">REQ_ACK_CONFIGURE_SINCE</span> : <span class="ident">u16</span> <span class="op">=</span> <span class="number">1u16</span> ; # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; The minimal object version supporting this request&quot;</span> ] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">REQ_DESTROY_SINCE</span> : <span class="ident">u16</span> <span class="op">=</span> <span class="number">1u16</span> ; # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; The minimal object version supporting this event&quot;</span> ] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">EVT_CONFIGURE_SINCE</span> : <span class="ident">u16</span> <span class="op">=</span> <span class="number">1u16</span> ; # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; The minimal object version supporting this event&quot;</span> ] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">EVT_CLOSED_SINCE</span> : <span class="ident">u16</span> <span class="op">=</span> <span class="number">1u16</span> ; }</pre></div>
</section><section id="search" class="content hidden"></section><section class="footer"></section><script>window.rootPath = "../../../../../../../../../../../../";window.currentCrate = "wayland_protocols";</script><script src="../../../../../../../../../../../../main.js"></script><script src="../../../../../../../../../../../../source-script.js"></script><script src="../../../../../../../../../../../../source-files.js"></script><script defer src="../../../../../../../../../../../../search-index.js"></script></body></html>