<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Source of the Rust file `/home/runner/work/wgpu-rs/wgpu-rs/target/debug/build/wayland-protocols-89ac49e270c0a518/out/xdg-foreign-v1_c_client_api.rs`."><meta name="keywords" content="rust, rustlang, rust-lang"><title>xdg-foreign-v1_c_client_api.rs - source</title><link rel="stylesheet" type="text/css" href="../../../../../../../../../../../../normalize.css"><link rel="stylesheet" type="text/css" href="../../../../../../../../../../../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../../../../../../../../../../../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../../../../../../../../../../../../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../../../../../../../../../../../../ayu.css" disabled ><script id="default-settings"></script><script src="../../../../../../../../../../../../storage.js"></script><noscript><link rel="stylesheet" href="../../../../../../../../../../../../noscript.css"></noscript><link rel="icon" type="image/svg+xml" href="../../../../../../../../../../../../favicon.svg">
<link rel="alternate icon" type="image/png" href="../../../../../../../../../../../../favicon-16x16.png">
<link rel="alternate icon" type="image/png" href="../../../../../../../../../../../../favicon-32x32.png"><style type="text/css">#crate-search{background-image:url("../../../../../../../../../../../../down-arrow.svg");}</style></head><body class="rustdoc source"><!--[if lte IE 8]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu">&#9776;</div><a href='../../../../../../../../../../../../wayland_protocols/index.html'><div class='logo-container rust-logo'><img src='../../../../../../../../../../../../rust-logo.png' alt='logo'></div></a></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!"><img src="../../../../../../../../../../../../brush.svg" width="18" alt="Pick another theme!"></button><div id="theme-choices"></div></div><script src="../../../../../../../../../../../../theme.js"></script><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><span class="help-button">?</span>
                <a id="settings-menu" href="../../../../../../../../../../../../settings.html"><img src="../../../../../../../../../../../../wheel.svg" width="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><pre class="line-numbers"><span id="1">1</span>
</pre><div class="example-wrap"><pre class="rust ">
# [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;interface for exporting surfaces\n\nA global interface used for exporting surfaces that can later be imported\nusing xdg_importer.&quot;</span> ] <span class="kw">pub</span> <span class="kw">mod</span> <span class="ident">zxdg_exporter_v1</span> { <span class="kw">use</span> <span class="kw">super</span> :: { <span class="ident">Proxy</span> , <span class="ident">NewProxy</span> , <span class="ident">AnonymousObject</span> , <span class="ident">Interface</span> , <span class="ident">MessageGroup</span> , <span class="ident">MessageDesc</span> , <span class="ident">ArgumentType</span> , <span class="ident">Object</span> , <span class="ident">Message</span> , <span class="ident">Argument</span> , <span class="ident">ObjectMetadata</span> } ; <span class="kw">use</span> <span class="kw">super</span> :: <span class="ident">sys</span> :: <span class="ident">common</span> :: { <span class="ident">wl_argument</span> , <span class="ident">wl_interface</span> , <span class="ident">wl_array</span> } ; <span class="kw">use</span> <span class="kw">super</span> :: <span class="ident">sys</span> :: <span class="ident">client</span> :: <span class="op">*</span> ; <span class="kw">pub</span> <span class="kw">enum</span> <span class="ident">Request</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;destroy the xdg_exporter object\n\nNotify the compositor that the xdg_exporter object will no longer be\nused.\n\nThis is a destructor, once sent this object cannot be used any longer.&quot;</span> ] <span class="ident">Destroy</span> , # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;export a surface\n\nThe export request exports the passed surface so that it can later be\nimported via xdg_importer. When called, a new xdg_exported object will\nbe created and xdg_exported.handle will be sent immediately. See the\ncorresponding interface and event for details.\n\nA surface may be exported multiple times, and each exported handle may\nbe used to create a xdg_imported multiple times. Only xdg_surface\nsurfaces may be exported.&quot;</span> ] <span class="ident">Export</span> { <span class="ident">id</span> : <span class="ident">Proxy</span> <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">zxdg_exported_v1</span> :: <span class="ident">ZxdgExportedV1</span> <span class="op">&gt;</span> , <span class="ident">surface</span> : <span class="ident">Proxy</span> <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">wl_surface</span> :: <span class="ident">WlSurface</span> <span class="op">&gt;</span> , } , } <span class="kw">impl</span> <span class="kw">super</span> :: <span class="ident">MessageGroup</span> <span class="kw">for</span> <span class="ident">Request</span> { <span class="kw">const</span> <span class="ident">MESSAGES</span> : <span class="op">&amp;</span> <span class="lifetime">&#39;static</span> [ <span class="kw">super</span> :: <span class="ident">MessageDesc</span> ] <span class="op">=</span> <span class="op">&amp;</span> [ <span class="kw">super</span> :: <span class="ident">MessageDesc</span> { <span class="ident">name</span> : <span class="string">&quot;destroy&quot;</span> , <span class="ident">since</span> : <span class="number">1</span> , <span class="ident">signature</span> : <span class="op">&amp;</span> [ ] , } , <span class="kw">super</span> :: <span class="ident">MessageDesc</span> { <span class="ident">name</span> : <span class="string">&quot;export&quot;</span> , <span class="ident">since</span> : <span class="number">1</span> , <span class="ident">signature</span> : <span class="op">&amp;</span> [ <span class="kw">super</span> :: <span class="ident">ArgumentType</span> :: <span class="ident">NewId</span> , <span class="kw">super</span> :: <span class="ident">ArgumentType</span> :: <span class="ident">Object</span> , ] , } , ] ; <span class="kw">type</span> <span class="ident">Map</span> <span class="op">=</span> <span class="kw">super</span> :: <span class="ident">ProxyMap</span> ; <span class="kw">fn</span> <span class="ident">is_destructor</span> ( <span class="op">&amp;</span> <span class="self">self</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">bool</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { <span class="ident">Request</span> :: <span class="ident">Destroy</span> <span class="op">=</span><span class="op">&gt;</span> <span class="bool-val">true</span> , <span class="kw">_</span> <span class="op">=</span><span class="op">&gt;</span> <span class="bool-val">false</span> , } } <span class="kw">fn</span> <span class="ident">opcode</span> ( <span class="op">&amp;</span> <span class="self">self</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">u16</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { <span class="ident">Request</span> :: <span class="ident">Destroy</span> <span class="op">=</span><span class="op">&gt;</span> <span class="number">0</span> , <span class="ident">Request</span> :: <span class="ident">Export</span> { .. } <span class="op">=</span><span class="op">&gt;</span> <span class="number">1</span> , } } <span class="kw">fn</span> <span class="ident">child</span> <span class="op">&lt;</span> <span class="ident">Meta</span> : <span class="ident">ObjectMetadata</span> <span class="op">&gt;</span> ( <span class="ident">opcode</span> : <span class="ident">u16</span> , <span class="ident">version</span> : <span class="ident">u32</span> , <span class="ident">meta</span> : <span class="op">&amp;</span> <span class="ident">Meta</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="ident">Object</span> <span class="op">&lt;</span> <span class="ident">Meta</span> <span class="op">&gt;</span><span class="op">&gt;</span> { <span class="kw">match</span> <span class="ident">opcode</span> { <span class="number">1</span> <span class="op">=</span><span class="op">&gt;</span> <span class="prelude-val">Some</span> ( <span class="ident">Object</span> :: <span class="ident">from_interface</span> :: <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">zxdg_exported_v1</span> :: <span class="ident">ZxdgExportedV1</span> <span class="op">&gt;</span> ( <span class="ident">version</span> , <span class="ident">meta</span> . <span class="ident">child</span> ( ) , ) ) , <span class="kw">_</span> <span class="op">=</span><span class="op">&gt;</span> <span class="prelude-val">None</span> , } } <span class="kw">fn</span> <span class="ident">from_raw</span> ( <span class="ident">msg</span> : <span class="ident">Message</span> , <span class="ident">map</span> : <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="self">Self</span> :: <span class="ident">Map</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Result</span> <span class="op">&lt;</span> <span class="self">Self</span> , ( ) <span class="op">&gt;</span> { <span class="ident">panic</span> <span class="op">!</span> ( <span class="string">&quot;Request::from_raw can not be used Client-side.&quot;</span> ) } <span class="kw">fn</span> <span class="ident">into_raw</span> ( <span class="self">self</span> , <span class="ident">sender_id</span> : <span class="ident">u32</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">Message</span> { <span class="kw">match</span> <span class="self">self</span> { <span class="ident">Request</span> :: <span class="ident">Destroy</span> <span class="op">=</span><span class="op">&gt;</span> <span class="ident">Message</span> { <span class="ident">sender_id</span> : <span class="ident">sender_id</span> , <span class="ident">opcode</span> : <span class="number">0</span> , <span class="ident">args</span> : <span class="ident">vec</span> <span class="op">!</span> [ ] , } , <span class="ident">Request</span> :: <span class="ident">Export</span> { <span class="ident">id</span> , <span class="ident">surface</span> } <span class="op">=</span><span class="op">&gt;</span> <span class="ident">Message</span> { <span class="ident">sender_id</span> : <span class="ident">sender_id</span> , <span class="ident">opcode</span> : <span class="number">1</span> , <span class="ident">args</span> : <span class="ident">vec</span> <span class="op">!</span> [ <span class="ident">Argument</span> :: <span class="ident">NewId</span> ( <span class="ident">id</span> . <span class="ident">id</span> ( ) ) , <span class="ident">Argument</span> :: <span class="ident">Object</span> ( <span class="ident">surface</span> . <span class="ident">id</span> ( ) ) , ] , } , } } <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_raw_c</span> ( <span class="ident">obj</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> , <span class="ident">opcode</span> : <span class="ident">u32</span> , <span class="ident">args</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">wl_argument</span> , ) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Result</span> <span class="op">&lt;</span> <span class="ident">Request</span> , ( ) <span class="op">&gt;</span> { <span class="ident">panic</span> <span class="op">!</span> ( <span class="string">&quot;Request::from_raw_c can not be used Client-side.&quot;</span> ) } <span class="kw">fn</span> <span class="ident">as_raw_c_in</span> <span class="op">&lt;</span> <span class="ident">F</span> , <span class="ident">T</span> <span class="op">&gt;</span> ( <span class="self">self</span> , <span class="ident">f</span> : <span class="ident">F</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">T</span> <span class="kw">where</span> <span class="ident">F</span> : <span class="ident">FnOnce</span> ( <span class="ident">u32</span> , <span class="op">&amp;</span> <span class="kw-2">mut</span> [ <span class="ident">wl_argument</span> ] ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">T</span> { <span class="kw">match</span> <span class="self">self</span> { <span class="ident">Request</span> :: <span class="ident">Destroy</span> <span class="op">=</span><span class="op">&gt;</span> { <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span> : [ <span class="ident">wl_argument</span> ; <span class="number">0</span> ] <span class="op">=</span> <span class="kw">unsafe</span> { :: <span class="ident">std</span> :: <span class="ident">mem</span> :: <span class="ident">zeroed</span> ( ) } ; <span class="ident">f</span> ( <span class="number">0</span> , <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span> ) } , <span class="ident">Request</span> :: <span class="ident">Export</span> { <span class="ident">id</span> , <span class="ident">surface</span> } <span class="op">=</span><span class="op">&gt;</span> { <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span> : [ <span class="ident">wl_argument</span> ; <span class="number">2</span> ] <span class="op">=</span> <span class="kw">unsafe</span> { :: <span class="ident">std</span> :: <span class="ident">mem</span> :: <span class="ident">zeroed</span> ( ) } ; <span class="ident">_args_array</span> [ <span class="number">0</span> ] . <span class="ident">o</span> <span class="op">=</span> <span class="ident">id</span> . <span class="ident">c_ptr</span> ( ) <span class="kw">as</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="kw">_</span> ; <span class="ident">_args_array</span> [ <span class="number">1</span> ] . <span class="ident">o</span> <span class="op">=</span> <span class="ident">surface</span> . <span class="ident">c_ptr</span> ( ) <span class="kw">as</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="kw">_</span> ; <span class="ident">f</span> ( <span class="number">1</span> , <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span> ) } , } } } <span class="kw">pub</span> <span class="kw">enum</span> <span class="ident">Event</span> { } <span class="kw">impl</span> <span class="kw">super</span> :: <span class="ident">MessageGroup</span> <span class="kw">for</span> <span class="ident">Event</span> { <span class="kw">const</span> <span class="ident">MESSAGES</span> : <span class="op">&amp;</span> <span class="lifetime">&#39;static</span> [ <span class="kw">super</span> :: <span class="ident">MessageDesc</span> ] <span class="op">=</span> <span class="op">&amp;</span> [ ] ; <span class="kw">type</span> <span class="ident">Map</span> <span class="op">=</span> <span class="kw">super</span> :: <span class="ident">ProxyMap</span> ; <span class="kw">fn</span> <span class="ident">is_destructor</span> ( <span class="op">&amp;</span> <span class="self">self</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">bool</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { } } <span class="kw">fn</span> <span class="ident">opcode</span> ( <span class="op">&amp;</span> <span class="self">self</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">u16</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { } } <span class="kw">fn</span> <span class="ident">child</span> <span class="op">&lt;</span> <span class="ident">Meta</span> : <span class="ident">ObjectMetadata</span> <span class="op">&gt;</span> ( <span class="ident">opcode</span> : <span class="ident">u16</span> , <span class="ident">version</span> : <span class="ident">u32</span> , <span class="ident">meta</span> : <span class="op">&amp;</span> <span class="ident">Meta</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="ident">Object</span> <span class="op">&lt;</span> <span class="ident">Meta</span> <span class="op">&gt;</span><span class="op">&gt;</span> { <span class="kw">match</span> <span class="ident">opcode</span> { <span class="kw">_</span> <span class="op">=</span><span class="op">&gt;</span> <span class="prelude-val">None</span> , } } <span class="kw">fn</span> <span class="ident">from_raw</span> ( <span class="ident">msg</span> : <span class="ident">Message</span> , <span class="ident">map</span> : <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="self">Self</span> :: <span class="ident">Map</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Result</span> <span class="op">&lt;</span> <span class="self">Self</span> , ( ) <span class="op">&gt;</span> { <span class="kw">match</span> <span class="ident">msg</span> . <span class="ident">opcode</span> { <span class="kw">_</span> <span class="op">=</span><span class="op">&gt;</span> <span class="prelude-val">Err</span> ( ( ) ) , } } <span class="kw">fn</span> <span class="ident">into_raw</span> ( <span class="self">self</span> , <span class="ident">sender_id</span> : <span class="ident">u32</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">Message</span> { <span class="ident">panic</span> <span class="op">!</span> ( <span class="string">&quot;Event::into_raw can not be used Client-side.&quot;</span> ) } <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_raw_c</span> ( <span class="ident">obj</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> , <span class="ident">opcode</span> : <span class="ident">u32</span> , <span class="ident">args</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">wl_argument</span> , ) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Result</span> <span class="op">&lt;</span> <span class="ident">Event</span> , ( ) <span class="op">&gt;</span> { <span class="kw">match</span> <span class="ident">opcode</span> { <span class="kw">_</span> <span class="op">=</span><span class="op">&gt;</span> <span class="kw">return</span> <span class="prelude-val">Err</span> ( ( ) ) , } } <span class="kw">fn</span> <span class="ident">as_raw_c_in</span> <span class="op">&lt;</span> <span class="ident">F</span> , <span class="ident">T</span> <span class="op">&gt;</span> ( <span class="self">self</span> , <span class="ident">f</span> : <span class="ident">F</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">T</span> <span class="kw">where</span> <span class="ident">F</span> : <span class="ident">FnOnce</span> ( <span class="ident">u32</span> , <span class="op">&amp;</span> <span class="kw-2">mut</span> [ <span class="ident">wl_argument</span> ] ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">T</span> { <span class="ident">panic</span> <span class="op">!</span> ( <span class="string">&quot;Event::as_raw_c_in can not be used Client-side.&quot;</span> ) } } <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">ZxdgExporterV1</span> ; <span class="kw">impl</span> <span class="ident">Interface</span> <span class="kw">for</span> <span class="ident">ZxdgExporterV1</span> { <span class="kw">type</span> <span class="ident">Request</span> <span class="op">=</span> <span class="ident">Request</span> ; <span class="kw">type</span> <span class="ident">Event</span> <span class="op">=</span> <span class="ident">Event</span> ; <span class="kw">const</span> <span class="ident">NAME</span> : <span class="op">&amp;</span> <span class="lifetime">&#39;static</span> <span class="ident">str</span> <span class="op">=</span> <span class="string">&quot;zxdg_exporter_v1&quot;</span> ; <span class="kw">const</span> <span class="ident">VERSION</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">1</span> ; <span class="kw">fn</span> <span class="ident">c_interface</span> ( ) <span class="op">-</span><span class="op">&gt;</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">wl_interface</span> { <span class="kw">unsafe</span> { <span class="op">&amp;</span> <span class="kw">super</span> :: <span class="kw">super</span> :: <span class="ident">c_interfaces</span> :: <span class="ident">zxdg_exporter_v1_interface</span> } } } <span class="kw">pub</span> <span class="kw">trait</span> <span class="ident">RequestsTrait</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;destroy the xdg_exporter object\n\nNotify the compositor that the xdg_exporter object will no longer be\nused.\n\nThis is a destructor, you cannot send requests to this object any longer once this method is called.&quot;</span> ] <span class="kw">fn</span> <span class="ident">destroy</span> ( <span class="op">&amp;</span> <span class="self">self</span> , ) <span class="op">-</span><span class="op">&gt;</span> ( ) ; # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;export a surface\n\nThe export request exports the passed surface so that it can later be\nimported via xdg_importer. When called, a new xdg_exported object will\nbe created and xdg_exported.handle will be sent immediately. See the\ncorresponding interface and event for details.\n\nA surface may be exported multiple times, and each exported handle may\nbe used to create a xdg_imported multiple times. Only xdg_surface\nsurfaces may be exported.&quot;</span> ] <span class="kw">fn</span> <span class="ident">export</span> <span class="op">&lt;</span> <span class="ident">F</span> <span class="op">&gt;</span> ( <span class="op">&amp;</span> <span class="self">self</span> , <span class="ident">surface</span> : <span class="op">&amp;</span> <span class="ident">Proxy</span> <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">wl_surface</span> :: <span class="ident">WlSurface</span> <span class="op">&gt;</span> , <span class="ident">implementor</span> : <span class="ident">F</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Result</span> <span class="op">&lt;</span> <span class="ident">Proxy</span> <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">zxdg_exported_v1</span> :: <span class="ident">ZxdgExportedV1</span> <span class="op">&gt;</span> , ( ) <span class="op">&gt;</span> <span class="kw">where</span> <span class="ident">F</span> : <span class="ident">FnOnce</span> ( <span class="ident">NewProxy</span> <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">zxdg_exported_v1</span> :: <span class="ident">ZxdgExportedV1</span> <span class="op">&gt;</span> , ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">Proxy</span> <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">zxdg_exported_v1</span> :: <span class="ident">ZxdgExportedV1</span> <span class="op">&gt;</span> ; } <span class="kw">impl</span> <span class="ident">RequestsTrait</span> <span class="kw">for</span> <span class="ident">Proxy</span> <span class="op">&lt;</span> <span class="ident">ZxdgExporterV1</span> <span class="op">&gt;</span> { <span class="kw">fn</span> <span class="ident">destroy</span> ( <span class="op">&amp;</span> <span class="self">self</span> , ) <span class="op">-</span><span class="op">&gt;</span> ( ) { <span class="kw">let</span> <span class="ident">msg</span> <span class="op">=</span> <span class="ident">Request</span> :: <span class="ident">Destroy</span> ; <span class="self">self</span> . <span class="ident">send</span> ( <span class="ident">msg</span> ) ; } <span class="kw">fn</span> <span class="ident">export</span> <span class="op">&lt;</span> <span class="ident">F</span> <span class="op">&gt;</span> ( <span class="op">&amp;</span> <span class="self">self</span> , <span class="ident">surface</span> : <span class="op">&amp;</span> <span class="ident">Proxy</span> <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">wl_surface</span> :: <span class="ident">WlSurface</span> <span class="op">&gt;</span> , <span class="ident">implementor</span> : <span class="ident">F</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Result</span> <span class="op">&lt;</span> <span class="ident">Proxy</span> <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">zxdg_exported_v1</span> :: <span class="ident">ZxdgExportedV1</span> <span class="op">&gt;</span> , ( ) <span class="op">&gt;</span> <span class="kw">where</span> <span class="ident">F</span> : <span class="ident">FnOnce</span> ( <span class="ident">NewProxy</span> <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">zxdg_exported_v1</span> :: <span class="ident">ZxdgExportedV1</span> <span class="op">&gt;</span> , ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">Proxy</span> <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">zxdg_exported_v1</span> :: <span class="ident">ZxdgExportedV1</span> <span class="op">&gt;</span> { <span class="kw">let</span> <span class="ident">msg</span> <span class="op">=</span> <span class="ident">Request</span> :: <span class="ident">Export</span> { <span class="ident">id</span> : <span class="self">self</span> . <span class="ident">child_placeholder</span> ( ) , <span class="ident">surface</span> : <span class="ident">surface</span> . <span class="ident">clone</span> ( ) } ; <span class="self">self</span> . <span class="ident">send_constructor</span> ( <span class="ident">msg</span> , <span class="ident">implementor</span> , <span class="prelude-val">None</span> ) } } # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; The minimal object version supporting this request&quot;</span> ] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">REQ_DESTROY_SINCE</span> : <span class="ident">u16</span> <span class="op">=</span> <span class="number">1u16</span> ; # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; The minimal object version supporting this request&quot;</span> ] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">REQ_EXPORT_SINCE</span> : <span class="ident">u16</span> <span class="op">=</span> <span class="number">1u16</span> ; } # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;interface for importing surfaces\n\nA global interface used for importing surfaces exported by xdg_exporter.\nWith this interface, a client can create a reference to a surface of\nanother client.&quot;</span> ] <span class="kw">pub</span> <span class="kw">mod</span> <span class="ident">zxdg_importer_v1</span> { <span class="kw">use</span> <span class="kw">super</span> :: { <span class="ident">Proxy</span> , <span class="ident">NewProxy</span> , <span class="ident">AnonymousObject</span> , <span class="ident">Interface</span> , <span class="ident">MessageGroup</span> , <span class="ident">MessageDesc</span> , <span class="ident">ArgumentType</span> , <span class="ident">Object</span> , <span class="ident">Message</span> , <span class="ident">Argument</span> , <span class="ident">ObjectMetadata</span> } ; <span class="kw">use</span> <span class="kw">super</span> :: <span class="ident">sys</span> :: <span class="ident">common</span> :: { <span class="ident">wl_argument</span> , <span class="ident">wl_interface</span> , <span class="ident">wl_array</span> } ; <span class="kw">use</span> <span class="kw">super</span> :: <span class="ident">sys</span> :: <span class="ident">client</span> :: <span class="op">*</span> ; <span class="kw">pub</span> <span class="kw">enum</span> <span class="ident">Request</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;destroy the xdg_importer object\n\nNotify the compositor that the xdg_importer object will no longer be\nused.\n\nThis is a destructor, once sent this object cannot be used any longer.&quot;</span> ] <span class="ident">Destroy</span> , # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;import a surface\n\nThe import request imports a surface from any client given a handle\nretrieved by exporting said surface using xdg_exporter.export. When\ncalled, a new xdg_imported object will be created. This new object\nrepresents the imported surface, and the importing client can\nmanipulate its relationship using it. See xdg_imported for details.&quot;</span> ] <span class="ident">Import</span> { <span class="ident">id</span> : <span class="ident">Proxy</span> <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">zxdg_imported_v1</span> :: <span class="ident">ZxdgImportedV1</span> <span class="op">&gt;</span> , <span class="ident">handle</span> : <span class="ident">String</span> , } , } <span class="kw">impl</span> <span class="kw">super</span> :: <span class="ident">MessageGroup</span> <span class="kw">for</span> <span class="ident">Request</span> { <span class="kw">const</span> <span class="ident">MESSAGES</span> : <span class="op">&amp;</span> <span class="lifetime">&#39;static</span> [ <span class="kw">super</span> :: <span class="ident">MessageDesc</span> ] <span class="op">=</span> <span class="op">&amp;</span> [ <span class="kw">super</span> :: <span class="ident">MessageDesc</span> { <span class="ident">name</span> : <span class="string">&quot;destroy&quot;</span> , <span class="ident">since</span> : <span class="number">1</span> , <span class="ident">signature</span> : <span class="op">&amp;</span> [ ] , } , <span class="kw">super</span> :: <span class="ident">MessageDesc</span> { <span class="ident">name</span> : <span class="string">&quot;import&quot;</span> , <span class="ident">since</span> : <span class="number">1</span> , <span class="ident">signature</span> : <span class="op">&amp;</span> [ <span class="kw">super</span> :: <span class="ident">ArgumentType</span> :: <span class="ident">NewId</span> , <span class="kw">super</span> :: <span class="ident">ArgumentType</span> :: <span class="ident">Str</span> , ] , } , ] ; <span class="kw">type</span> <span class="ident">Map</span> <span class="op">=</span> <span class="kw">super</span> :: <span class="ident">ProxyMap</span> ; <span class="kw">fn</span> <span class="ident">is_destructor</span> ( <span class="op">&amp;</span> <span class="self">self</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">bool</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { <span class="ident">Request</span> :: <span class="ident">Destroy</span> <span class="op">=</span><span class="op">&gt;</span> <span class="bool-val">true</span> , <span class="kw">_</span> <span class="op">=</span><span class="op">&gt;</span> <span class="bool-val">false</span> , } } <span class="kw">fn</span> <span class="ident">opcode</span> ( <span class="op">&amp;</span> <span class="self">self</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">u16</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { <span class="ident">Request</span> :: <span class="ident">Destroy</span> <span class="op">=</span><span class="op">&gt;</span> <span class="number">0</span> , <span class="ident">Request</span> :: <span class="ident">Import</span> { .. } <span class="op">=</span><span class="op">&gt;</span> <span class="number">1</span> , } } <span class="kw">fn</span> <span class="ident">child</span> <span class="op">&lt;</span> <span class="ident">Meta</span> : <span class="ident">ObjectMetadata</span> <span class="op">&gt;</span> ( <span class="ident">opcode</span> : <span class="ident">u16</span> , <span class="ident">version</span> : <span class="ident">u32</span> , <span class="ident">meta</span> : <span class="op">&amp;</span> <span class="ident">Meta</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="ident">Object</span> <span class="op">&lt;</span> <span class="ident">Meta</span> <span class="op">&gt;</span><span class="op">&gt;</span> { <span class="kw">match</span> <span class="ident">opcode</span> { <span class="number">1</span> <span class="op">=</span><span class="op">&gt;</span> <span class="prelude-val">Some</span> ( <span class="ident">Object</span> :: <span class="ident">from_interface</span> :: <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">zxdg_imported_v1</span> :: <span class="ident">ZxdgImportedV1</span> <span class="op">&gt;</span> ( <span class="ident">version</span> , <span class="ident">meta</span> . <span class="ident">child</span> ( ) , ) ) , <span class="kw">_</span> <span class="op">=</span><span class="op">&gt;</span> <span class="prelude-val">None</span> , } } <span class="kw">fn</span> <span class="ident">from_raw</span> ( <span class="ident">msg</span> : <span class="ident">Message</span> , <span class="ident">map</span> : <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="self">Self</span> :: <span class="ident">Map</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Result</span> <span class="op">&lt;</span> <span class="self">Self</span> , ( ) <span class="op">&gt;</span> { <span class="ident">panic</span> <span class="op">!</span> ( <span class="string">&quot;Request::from_raw can not be used Client-side.&quot;</span> ) } <span class="kw">fn</span> <span class="ident">into_raw</span> ( <span class="self">self</span> , <span class="ident">sender_id</span> : <span class="ident">u32</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">Message</span> { <span class="kw">match</span> <span class="self">self</span> { <span class="ident">Request</span> :: <span class="ident">Destroy</span> <span class="op">=</span><span class="op">&gt;</span> <span class="ident">Message</span> { <span class="ident">sender_id</span> : <span class="ident">sender_id</span> , <span class="ident">opcode</span> : <span class="number">0</span> , <span class="ident">args</span> : <span class="ident">vec</span> <span class="op">!</span> [ ] , } , <span class="ident">Request</span> :: <span class="ident">Import</span> { <span class="ident">id</span> , <span class="ident">handle</span> } <span class="op">=</span><span class="op">&gt;</span> <span class="ident">Message</span> { <span class="ident">sender_id</span> : <span class="ident">sender_id</span> , <span class="ident">opcode</span> : <span class="number">1</span> , <span class="ident">args</span> : <span class="ident">vec</span> <span class="op">!</span> [ <span class="ident">Argument</span> :: <span class="ident">NewId</span> ( <span class="ident">id</span> . <span class="ident">id</span> ( ) ) , <span class="ident">Argument</span> :: <span class="ident">Str</span> ( <span class="kw">unsafe</span> { :: <span class="ident">std</span> :: <span class="ident">ffi</span> :: <span class="ident">CString</span> :: <span class="ident">from_vec_unchecked</span> ( <span class="ident">handle</span> . <span class="ident">into</span> ( ) ) } ) , ] , } , } } <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_raw_c</span> ( <span class="ident">obj</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> , <span class="ident">opcode</span> : <span class="ident">u32</span> , <span class="ident">args</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">wl_argument</span> , ) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Result</span> <span class="op">&lt;</span> <span class="ident">Request</span> , ( ) <span class="op">&gt;</span> { <span class="ident">panic</span> <span class="op">!</span> ( <span class="string">&quot;Request::from_raw_c can not be used Client-side.&quot;</span> ) } <span class="kw">fn</span> <span class="ident">as_raw_c_in</span> <span class="op">&lt;</span> <span class="ident">F</span> , <span class="ident">T</span> <span class="op">&gt;</span> ( <span class="self">self</span> , <span class="ident">f</span> : <span class="ident">F</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">T</span> <span class="kw">where</span> <span class="ident">F</span> : <span class="ident">FnOnce</span> ( <span class="ident">u32</span> , <span class="op">&amp;</span> <span class="kw-2">mut</span> [ <span class="ident">wl_argument</span> ] ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">T</span> { <span class="kw">match</span> <span class="self">self</span> { <span class="ident">Request</span> :: <span class="ident">Destroy</span> <span class="op">=</span><span class="op">&gt;</span> { <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span> : [ <span class="ident">wl_argument</span> ; <span class="number">0</span> ] <span class="op">=</span> <span class="kw">unsafe</span> { :: <span class="ident">std</span> :: <span class="ident">mem</span> :: <span class="ident">zeroed</span> ( ) } ; <span class="ident">f</span> ( <span class="number">0</span> , <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span> ) } , <span class="ident">Request</span> :: <span class="ident">Import</span> { <span class="ident">id</span> , <span class="ident">handle</span> } <span class="op">=</span><span class="op">&gt;</span> { <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span> : [ <span class="ident">wl_argument</span> ; <span class="number">2</span> ] <span class="op">=</span> <span class="kw">unsafe</span> { :: <span class="ident">std</span> :: <span class="ident">mem</span> :: <span class="ident">zeroed</span> ( ) } ; <span class="ident">_args_array</span> [ <span class="number">0</span> ] . <span class="ident">o</span> <span class="op">=</span> <span class="ident">id</span> . <span class="ident">c_ptr</span> ( ) <span class="kw">as</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="kw">_</span> ; <span class="kw">let</span> <span class="ident">_arg_1</span> <span class="op">=</span> :: <span class="ident">std</span> :: <span class="ident">ffi</span> :: <span class="ident">CString</span> :: <span class="ident">new</span> ( <span class="ident">handle</span> ) . <span class="ident">unwrap</span> ( ) ; <span class="ident">_args_array</span> [ <span class="number">1</span> ] . <span class="ident">s</span> <span class="op">=</span> <span class="ident">_arg_1</span> . <span class="ident">as_ptr</span> ( ) ; <span class="ident">f</span> ( <span class="number">1</span> , <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span> ) } , } } } <span class="kw">pub</span> <span class="kw">enum</span> <span class="ident">Event</span> { } <span class="kw">impl</span> <span class="kw">super</span> :: <span class="ident">MessageGroup</span> <span class="kw">for</span> <span class="ident">Event</span> { <span class="kw">const</span> <span class="ident">MESSAGES</span> : <span class="op">&amp;</span> <span class="lifetime">&#39;static</span> [ <span class="kw">super</span> :: <span class="ident">MessageDesc</span> ] <span class="op">=</span> <span class="op">&amp;</span> [ ] ; <span class="kw">type</span> <span class="ident">Map</span> <span class="op">=</span> <span class="kw">super</span> :: <span class="ident">ProxyMap</span> ; <span class="kw">fn</span> <span class="ident">is_destructor</span> ( <span class="op">&amp;</span> <span class="self">self</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">bool</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { } } <span class="kw">fn</span> <span class="ident">opcode</span> ( <span class="op">&amp;</span> <span class="self">self</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">u16</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { } } <span class="kw">fn</span> <span class="ident">child</span> <span class="op">&lt;</span> <span class="ident">Meta</span> : <span class="ident">ObjectMetadata</span> <span class="op">&gt;</span> ( <span class="ident">opcode</span> : <span class="ident">u16</span> , <span class="ident">version</span> : <span class="ident">u32</span> , <span class="ident">meta</span> : <span class="op">&amp;</span> <span class="ident">Meta</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="ident">Object</span> <span class="op">&lt;</span> <span class="ident">Meta</span> <span class="op">&gt;</span><span class="op">&gt;</span> { <span class="kw">match</span> <span class="ident">opcode</span> { <span class="kw">_</span> <span class="op">=</span><span class="op">&gt;</span> <span class="prelude-val">None</span> , } } <span class="kw">fn</span> <span class="ident">from_raw</span> ( <span class="ident">msg</span> : <span class="ident">Message</span> , <span class="ident">map</span> : <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="self">Self</span> :: <span class="ident">Map</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Result</span> <span class="op">&lt;</span> <span class="self">Self</span> , ( ) <span class="op">&gt;</span> { <span class="kw">match</span> <span class="ident">msg</span> . <span class="ident">opcode</span> { <span class="kw">_</span> <span class="op">=</span><span class="op">&gt;</span> <span class="prelude-val">Err</span> ( ( ) ) , } } <span class="kw">fn</span> <span class="ident">into_raw</span> ( <span class="self">self</span> , <span class="ident">sender_id</span> : <span class="ident">u32</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">Message</span> { <span class="ident">panic</span> <span class="op">!</span> ( <span class="string">&quot;Event::into_raw can not be used Client-side.&quot;</span> ) } <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_raw_c</span> ( <span class="ident">obj</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> , <span class="ident">opcode</span> : <span class="ident">u32</span> , <span class="ident">args</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">wl_argument</span> , ) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Result</span> <span class="op">&lt;</span> <span class="ident">Event</span> , ( ) <span class="op">&gt;</span> { <span class="kw">match</span> <span class="ident">opcode</span> { <span class="kw">_</span> <span class="op">=</span><span class="op">&gt;</span> <span class="kw">return</span> <span class="prelude-val">Err</span> ( ( ) ) , } } <span class="kw">fn</span> <span class="ident">as_raw_c_in</span> <span class="op">&lt;</span> <span class="ident">F</span> , <span class="ident">T</span> <span class="op">&gt;</span> ( <span class="self">self</span> , <span class="ident">f</span> : <span class="ident">F</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">T</span> <span class="kw">where</span> <span class="ident">F</span> : <span class="ident">FnOnce</span> ( <span class="ident">u32</span> , <span class="op">&amp;</span> <span class="kw-2">mut</span> [ <span class="ident">wl_argument</span> ] ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">T</span> { <span class="ident">panic</span> <span class="op">!</span> ( <span class="string">&quot;Event::as_raw_c_in can not be used Client-side.&quot;</span> ) } } <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">ZxdgImporterV1</span> ; <span class="kw">impl</span> <span class="ident">Interface</span> <span class="kw">for</span> <span class="ident">ZxdgImporterV1</span> { <span class="kw">type</span> <span class="ident">Request</span> <span class="op">=</span> <span class="ident">Request</span> ; <span class="kw">type</span> <span class="ident">Event</span> <span class="op">=</span> <span class="ident">Event</span> ; <span class="kw">const</span> <span class="ident">NAME</span> : <span class="op">&amp;</span> <span class="lifetime">&#39;static</span> <span class="ident">str</span> <span class="op">=</span> <span class="string">&quot;zxdg_importer_v1&quot;</span> ; <span class="kw">const</span> <span class="ident">VERSION</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">1</span> ; <span class="kw">fn</span> <span class="ident">c_interface</span> ( ) <span class="op">-</span><span class="op">&gt;</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">wl_interface</span> { <span class="kw">unsafe</span> { <span class="op">&amp;</span> <span class="kw">super</span> :: <span class="kw">super</span> :: <span class="ident">c_interfaces</span> :: <span class="ident">zxdg_importer_v1_interface</span> } } } <span class="kw">pub</span> <span class="kw">trait</span> <span class="ident">RequestsTrait</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;destroy the xdg_importer object\n\nNotify the compositor that the xdg_importer object will no longer be\nused.\n\nThis is a destructor, you cannot send requests to this object any longer once this method is called.&quot;</span> ] <span class="kw">fn</span> <span class="ident">destroy</span> ( <span class="op">&amp;</span> <span class="self">self</span> , ) <span class="op">-</span><span class="op">&gt;</span> ( ) ; # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;import a surface\n\nThe import request imports a surface from any client given a handle\nretrieved by exporting said surface using xdg_exporter.export. When\ncalled, a new xdg_imported object will be created. This new object\nrepresents the imported surface, and the importing client can\nmanipulate its relationship using it. See xdg_imported for details.&quot;</span> ] <span class="kw">fn</span> <span class="ident">import</span> <span class="op">&lt;</span> <span class="ident">F</span> <span class="op">&gt;</span> ( <span class="op">&amp;</span> <span class="self">self</span> , <span class="ident">handle</span> : <span class="ident">String</span> , <span class="ident">implementor</span> : <span class="ident">F</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Result</span> <span class="op">&lt;</span> <span class="ident">Proxy</span> <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">zxdg_imported_v1</span> :: <span class="ident">ZxdgImportedV1</span> <span class="op">&gt;</span> , ( ) <span class="op">&gt;</span> <span class="kw">where</span> <span class="ident">F</span> : <span class="ident">FnOnce</span> ( <span class="ident">NewProxy</span> <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">zxdg_imported_v1</span> :: <span class="ident">ZxdgImportedV1</span> <span class="op">&gt;</span> , ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">Proxy</span> <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">zxdg_imported_v1</span> :: <span class="ident">ZxdgImportedV1</span> <span class="op">&gt;</span> ; } <span class="kw">impl</span> <span class="ident">RequestsTrait</span> <span class="kw">for</span> <span class="ident">Proxy</span> <span class="op">&lt;</span> <span class="ident">ZxdgImporterV1</span> <span class="op">&gt;</span> { <span class="kw">fn</span> <span class="ident">destroy</span> ( <span class="op">&amp;</span> <span class="self">self</span> , ) <span class="op">-</span><span class="op">&gt;</span> ( ) { <span class="kw">let</span> <span class="ident">msg</span> <span class="op">=</span> <span class="ident">Request</span> :: <span class="ident">Destroy</span> ; <span class="self">self</span> . <span class="ident">send</span> ( <span class="ident">msg</span> ) ; } <span class="kw">fn</span> <span class="ident">import</span> <span class="op">&lt;</span> <span class="ident">F</span> <span class="op">&gt;</span> ( <span class="op">&amp;</span> <span class="self">self</span> , <span class="ident">handle</span> : <span class="ident">String</span> , <span class="ident">implementor</span> : <span class="ident">F</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Result</span> <span class="op">&lt;</span> <span class="ident">Proxy</span> <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">zxdg_imported_v1</span> :: <span class="ident">ZxdgImportedV1</span> <span class="op">&gt;</span> , ( ) <span class="op">&gt;</span> <span class="kw">where</span> <span class="ident">F</span> : <span class="ident">FnOnce</span> ( <span class="ident">NewProxy</span> <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">zxdg_imported_v1</span> :: <span class="ident">ZxdgImportedV1</span> <span class="op">&gt;</span> , ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">Proxy</span> <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">zxdg_imported_v1</span> :: <span class="ident">ZxdgImportedV1</span> <span class="op">&gt;</span> { <span class="kw">let</span> <span class="ident">msg</span> <span class="op">=</span> <span class="ident">Request</span> :: <span class="ident">Import</span> { <span class="ident">id</span> : <span class="self">self</span> . <span class="ident">child_placeholder</span> ( ) , <span class="ident">handle</span> : <span class="ident">handle</span> } ; <span class="self">self</span> . <span class="ident">send_constructor</span> ( <span class="ident">msg</span> , <span class="ident">implementor</span> , <span class="prelude-val">None</span> ) } } # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; The minimal object version supporting this request&quot;</span> ] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">REQ_DESTROY_SINCE</span> : <span class="ident">u16</span> <span class="op">=</span> <span class="number">1u16</span> ; # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; The minimal object version supporting this request&quot;</span> ] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">REQ_IMPORT_SINCE</span> : <span class="ident">u16</span> <span class="op">=</span> <span class="number">1u16</span> ; } # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;an exported surface handle\n\nA xdg_exported object represents an exported reference to a surface. The\nexported surface may be referenced as long as the xdg_exported object not\ndestroyed. Destroying the xdg_exported invalidates any relationship the\nimporter may have established using xdg_imported.&quot;</span> ] <span class="kw">pub</span> <span class="kw">mod</span> <span class="ident">zxdg_exported_v1</span> { <span class="kw">use</span> <span class="kw">super</span> :: { <span class="ident">Proxy</span> , <span class="ident">NewProxy</span> , <span class="ident">AnonymousObject</span> , <span class="ident">Interface</span> , <span class="ident">MessageGroup</span> , <span class="ident">MessageDesc</span> , <span class="ident">ArgumentType</span> , <span class="ident">Object</span> , <span class="ident">Message</span> , <span class="ident">Argument</span> , <span class="ident">ObjectMetadata</span> } ; <span class="kw">use</span> <span class="kw">super</span> :: <span class="ident">sys</span> :: <span class="ident">common</span> :: { <span class="ident">wl_argument</span> , <span class="ident">wl_interface</span> , <span class="ident">wl_array</span> } ; <span class="kw">use</span> <span class="kw">super</span> :: <span class="ident">sys</span> :: <span class="ident">client</span> :: <span class="op">*</span> ; <span class="kw">pub</span> <span class="kw">enum</span> <span class="ident">Request</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;unexport the exported surface\n\nRevoke the previously exported surface. This invalidates any\nrelationship the importer may have set up using the xdg_imported created\ngiven the handle sent via xdg_exported.handle.\n\nThis is a destructor, once sent this object cannot be used any longer.&quot;</span> ] <span class="ident">Destroy</span> , } <span class="kw">impl</span> <span class="kw">super</span> :: <span class="ident">MessageGroup</span> <span class="kw">for</span> <span class="ident">Request</span> { <span class="kw">const</span> <span class="ident">MESSAGES</span> : <span class="op">&amp;</span> <span class="lifetime">&#39;static</span> [ <span class="kw">super</span> :: <span class="ident">MessageDesc</span> ] <span class="op">=</span> <span class="op">&amp;</span> [ <span class="kw">super</span> :: <span class="ident">MessageDesc</span> { <span class="ident">name</span> : <span class="string">&quot;destroy&quot;</span> , <span class="ident">since</span> : <span class="number">1</span> , <span class="ident">signature</span> : <span class="op">&amp;</span> [ ] , } , ] ; <span class="kw">type</span> <span class="ident">Map</span> <span class="op">=</span> <span class="kw">super</span> :: <span class="ident">ProxyMap</span> ; <span class="kw">fn</span> <span class="ident">is_destructor</span> ( <span class="op">&amp;</span> <span class="self">self</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">bool</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { <span class="ident">Request</span> :: <span class="ident">Destroy</span> <span class="op">=</span><span class="op">&gt;</span> <span class="bool-val">true</span> , } } <span class="kw">fn</span> <span class="ident">opcode</span> ( <span class="op">&amp;</span> <span class="self">self</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">u16</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { <span class="ident">Request</span> :: <span class="ident">Destroy</span> <span class="op">=</span><span class="op">&gt;</span> <span class="number">0</span> , } } <span class="kw">fn</span> <span class="ident">child</span> <span class="op">&lt;</span> <span class="ident">Meta</span> : <span class="ident">ObjectMetadata</span> <span class="op">&gt;</span> ( <span class="ident">opcode</span> : <span class="ident">u16</span> , <span class="ident">version</span> : <span class="ident">u32</span> , <span class="ident">meta</span> : <span class="op">&amp;</span> <span class="ident">Meta</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="ident">Object</span> <span class="op">&lt;</span> <span class="ident">Meta</span> <span class="op">&gt;</span><span class="op">&gt;</span> { <span class="kw">match</span> <span class="ident">opcode</span> { <span class="kw">_</span> <span class="op">=</span><span class="op">&gt;</span> <span class="prelude-val">None</span> , } } <span class="kw">fn</span> <span class="ident">from_raw</span> ( <span class="ident">msg</span> : <span class="ident">Message</span> , <span class="ident">map</span> : <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="self">Self</span> :: <span class="ident">Map</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Result</span> <span class="op">&lt;</span> <span class="self">Self</span> , ( ) <span class="op">&gt;</span> { <span class="ident">panic</span> <span class="op">!</span> ( <span class="string">&quot;Request::from_raw can not be used Client-side.&quot;</span> ) } <span class="kw">fn</span> <span class="ident">into_raw</span> ( <span class="self">self</span> , <span class="ident">sender_id</span> : <span class="ident">u32</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">Message</span> { <span class="kw">match</span> <span class="self">self</span> { <span class="ident">Request</span> :: <span class="ident">Destroy</span> <span class="op">=</span><span class="op">&gt;</span> <span class="ident">Message</span> { <span class="ident">sender_id</span> : <span class="ident">sender_id</span> , <span class="ident">opcode</span> : <span class="number">0</span> , <span class="ident">args</span> : <span class="ident">vec</span> <span class="op">!</span> [ ] , } , } } <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_raw_c</span> ( <span class="ident">obj</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> , <span class="ident">opcode</span> : <span class="ident">u32</span> , <span class="ident">args</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">wl_argument</span> , ) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Result</span> <span class="op">&lt;</span> <span class="ident">Request</span> , ( ) <span class="op">&gt;</span> { <span class="ident">panic</span> <span class="op">!</span> ( <span class="string">&quot;Request::from_raw_c can not be used Client-side.&quot;</span> ) } <span class="kw">fn</span> <span class="ident">as_raw_c_in</span> <span class="op">&lt;</span> <span class="ident">F</span> , <span class="ident">T</span> <span class="op">&gt;</span> ( <span class="self">self</span> , <span class="ident">f</span> : <span class="ident">F</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">T</span> <span class="kw">where</span> <span class="ident">F</span> : <span class="ident">FnOnce</span> ( <span class="ident">u32</span> , <span class="op">&amp;</span> <span class="kw-2">mut</span> [ <span class="ident">wl_argument</span> ] ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">T</span> { <span class="kw">match</span> <span class="self">self</span> { <span class="ident">Request</span> :: <span class="ident">Destroy</span> <span class="op">=</span><span class="op">&gt;</span> { <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span> : [ <span class="ident">wl_argument</span> ; <span class="number">0</span> ] <span class="op">=</span> <span class="kw">unsafe</span> { :: <span class="ident">std</span> :: <span class="ident">mem</span> :: <span class="ident">zeroed</span> ( ) } ; <span class="ident">f</span> ( <span class="number">0</span> , <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span> ) } , } } } <span class="kw">pub</span> <span class="kw">enum</span> <span class="ident">Event</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;the exported surface handle\n\nThe handle event contains the unique handle of this exported surface\nreference. It may be shared with any client, which then can use it to\nimport the surface by calling xdg_importer.import. A handle may be\nused to import the surface multiple times.&quot;</span> ] <span class="ident">Handle</span> { <span class="ident">handle</span> : <span class="ident">String</span> , } , } <span class="kw">impl</span> <span class="kw">super</span> :: <span class="ident">MessageGroup</span> <span class="kw">for</span> <span class="ident">Event</span> { <span class="kw">const</span> <span class="ident">MESSAGES</span> : <span class="op">&amp;</span> <span class="lifetime">&#39;static</span> [ <span class="kw">super</span> :: <span class="ident">MessageDesc</span> ] <span class="op">=</span> <span class="op">&amp;</span> [ <span class="kw">super</span> :: <span class="ident">MessageDesc</span> { <span class="ident">name</span> : <span class="string">&quot;handle&quot;</span> , <span class="ident">since</span> : <span class="number">1</span> , <span class="ident">signature</span> : <span class="op">&amp;</span> [ <span class="kw">super</span> :: <span class="ident">ArgumentType</span> :: <span class="ident">Str</span> , ] , } , ] ; <span class="kw">type</span> <span class="ident">Map</span> <span class="op">=</span> <span class="kw">super</span> :: <span class="ident">ProxyMap</span> ; <span class="kw">fn</span> <span class="ident">is_destructor</span> ( <span class="op">&amp;</span> <span class="self">self</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">bool</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { <span class="kw">_</span> <span class="op">=</span><span class="op">&gt;</span> <span class="bool-val">false</span> , } } <span class="kw">fn</span> <span class="ident">opcode</span> ( <span class="op">&amp;</span> <span class="self">self</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">u16</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { <span class="ident">Event</span> :: <span class="ident">Handle</span> { .. } <span class="op">=</span><span class="op">&gt;</span> <span class="number">0</span> , } } <span class="kw">fn</span> <span class="ident">child</span> <span class="op">&lt;</span> <span class="ident">Meta</span> : <span class="ident">ObjectMetadata</span> <span class="op">&gt;</span> ( <span class="ident">opcode</span> : <span class="ident">u16</span> , <span class="ident">version</span> : <span class="ident">u32</span> , <span class="ident">meta</span> : <span class="op">&amp;</span> <span class="ident">Meta</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="ident">Object</span> <span class="op">&lt;</span> <span class="ident">Meta</span> <span class="op">&gt;</span><span class="op">&gt;</span> { <span class="kw">match</span> <span class="ident">opcode</span> { <span class="kw">_</span> <span class="op">=</span><span class="op">&gt;</span> <span class="prelude-val">None</span> , } } <span class="kw">fn</span> <span class="ident">from_raw</span> ( <span class="ident">msg</span> : <span class="ident">Message</span> , <span class="ident">map</span> : <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="self">Self</span> :: <span class="ident">Map</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Result</span> <span class="op">&lt;</span> <span class="self">Self</span> , ( ) <span class="op">&gt;</span> { <span class="kw">match</span> <span class="ident">msg</span> . <span class="ident">opcode</span> { <span class="number">0</span> <span class="op">=</span><span class="op">&gt;</span> { <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">args</span> <span class="op">=</span> <span class="ident">msg</span> . <span class="ident">args</span> . <span class="ident">into_iter</span> ( ) ; <span class="prelude-val">Ok</span> ( <span class="ident">Event</span> :: <span class="ident">Handle</span> { <span class="ident">handle</span> : { <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span> ( <span class="ident">Argument</span> :: <span class="ident">Str</span> ( <span class="ident">val</span> ) ) <span class="op">=</span> <span class="ident">args</span> . <span class="ident">next</span> ( ) { <span class="kw">let</span> <span class="ident">s</span> <span class="op">=</span> <span class="ident">String</span> :: <span class="ident">from_utf8</span> ( <span class="ident">val</span> . <span class="ident">into_bytes</span> ( ) ) . <span class="ident">unwrap_or_else</span> ( <span class="op">|</span> <span class="ident">e</span> <span class="op">|</span> <span class="ident">String</span> :: <span class="ident">from_utf8_lossy</span> ( <span class="op">&amp;</span> <span class="ident">e</span> . <span class="ident">into_bytes</span> ( ) ) . <span class="ident">into</span> ( ) ) ; <span class="ident">s</span> } <span class="kw">else</span> { <span class="kw">return</span> <span class="prelude-val">Err</span> ( ( ) ) ; } } , } ) } , <span class="kw">_</span> <span class="op">=</span><span class="op">&gt;</span> <span class="prelude-val">Err</span> ( ( ) ) , } } <span class="kw">fn</span> <span class="ident">into_raw</span> ( <span class="self">self</span> , <span class="ident">sender_id</span> : <span class="ident">u32</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">Message</span> { <span class="ident">panic</span> <span class="op">!</span> ( <span class="string">&quot;Event::into_raw can not be used Client-side.&quot;</span> ) } <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_raw_c</span> ( <span class="ident">obj</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> , <span class="ident">opcode</span> : <span class="ident">u32</span> , <span class="ident">args</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">wl_argument</span> , ) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Result</span> <span class="op">&lt;</span> <span class="ident">Event</span> , ( ) <span class="op">&gt;</span> { <span class="kw">match</span> <span class="ident">opcode</span> { <span class="number">0</span> <span class="op">=</span><span class="op">&gt;</span> { <span class="kw">let</span> <span class="ident">_args</span> <span class="op">=</span> :: <span class="ident">std</span> :: <span class="ident">slice</span> :: <span class="ident">from_raw_parts</span> ( <span class="ident">args</span> , <span class="number">1</span> ) ; <span class="prelude-val">Ok</span> ( <span class="ident">Event</span> :: <span class="ident">Handle</span> { <span class="ident">handle</span> : :: <span class="ident">std</span> :: <span class="ident">ffi</span> :: <span class="ident">CStr</span> :: <span class="ident">from_ptr</span> ( <span class="ident">_args</span> [ <span class="number">0</span> ] . <span class="ident">s</span> ) . <span class="ident">to_string_lossy</span> ( ) . <span class="ident">into_owned</span> ( ) , } ) } , <span class="kw">_</span> <span class="op">=</span><span class="op">&gt;</span> <span class="kw">return</span> <span class="prelude-val">Err</span> ( ( ) ) , } } <span class="kw">fn</span> <span class="ident">as_raw_c_in</span> <span class="op">&lt;</span> <span class="ident">F</span> , <span class="ident">T</span> <span class="op">&gt;</span> ( <span class="self">self</span> , <span class="ident">f</span> : <span class="ident">F</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">T</span> <span class="kw">where</span> <span class="ident">F</span> : <span class="ident">FnOnce</span> ( <span class="ident">u32</span> , <span class="op">&amp;</span> <span class="kw-2">mut</span> [ <span class="ident">wl_argument</span> ] ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">T</span> { <span class="ident">panic</span> <span class="op">!</span> ( <span class="string">&quot;Event::as_raw_c_in can not be used Client-side.&quot;</span> ) } } <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">ZxdgExportedV1</span> ; <span class="kw">impl</span> <span class="ident">Interface</span> <span class="kw">for</span> <span class="ident">ZxdgExportedV1</span> { <span class="kw">type</span> <span class="ident">Request</span> <span class="op">=</span> <span class="ident">Request</span> ; <span class="kw">type</span> <span class="ident">Event</span> <span class="op">=</span> <span class="ident">Event</span> ; <span class="kw">const</span> <span class="ident">NAME</span> : <span class="op">&amp;</span> <span class="lifetime">&#39;static</span> <span class="ident">str</span> <span class="op">=</span> <span class="string">&quot;zxdg_exported_v1&quot;</span> ; <span class="kw">const</span> <span class="ident">VERSION</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">1</span> ; <span class="kw">fn</span> <span class="ident">c_interface</span> ( ) <span class="op">-</span><span class="op">&gt;</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">wl_interface</span> { <span class="kw">unsafe</span> { <span class="op">&amp;</span> <span class="kw">super</span> :: <span class="kw">super</span> :: <span class="ident">c_interfaces</span> :: <span class="ident">zxdg_exported_v1_interface</span> } } } <span class="kw">pub</span> <span class="kw">trait</span> <span class="ident">RequestsTrait</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;unexport the exported surface\n\nRevoke the previously exported surface. This invalidates any\nrelationship the importer may have set up using the xdg_imported created\ngiven the handle sent via xdg_exported.handle.\n\nThis is a destructor, you cannot send requests to this object any longer once this method is called.&quot;</span> ] <span class="kw">fn</span> <span class="ident">destroy</span> ( <span class="op">&amp;</span> <span class="self">self</span> , ) <span class="op">-</span><span class="op">&gt;</span> ( ) ; } <span class="kw">impl</span> <span class="ident">RequestsTrait</span> <span class="kw">for</span> <span class="ident">Proxy</span> <span class="op">&lt;</span> <span class="ident">ZxdgExportedV1</span> <span class="op">&gt;</span> { <span class="kw">fn</span> <span class="ident">destroy</span> ( <span class="op">&amp;</span> <span class="self">self</span> , ) <span class="op">-</span><span class="op">&gt;</span> ( ) { <span class="kw">let</span> <span class="ident">msg</span> <span class="op">=</span> <span class="ident">Request</span> :: <span class="ident">Destroy</span> ; <span class="self">self</span> . <span class="ident">send</span> ( <span class="ident">msg</span> ) ; } } # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; The minimal object version supporting this request&quot;</span> ] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">REQ_DESTROY_SINCE</span> : <span class="ident">u16</span> <span class="op">=</span> <span class="number">1u16</span> ; # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; The minimal object version supporting this event&quot;</span> ] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">EVT_HANDLE_SINCE</span> : <span class="ident">u16</span> <span class="op">=</span> <span class="number">1u16</span> ; } # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;an imported surface handle\n\nA xdg_imported object represents an imported reference to surface exported\nby some client. A client can use this interface to manipulate\nrelationships between its own surfaces and the imported surface.&quot;</span> ] <span class="kw">pub</span> <span class="kw">mod</span> <span class="ident">zxdg_imported_v1</span> { <span class="kw">use</span> <span class="kw">super</span> :: { <span class="ident">Proxy</span> , <span class="ident">NewProxy</span> , <span class="ident">AnonymousObject</span> , <span class="ident">Interface</span> , <span class="ident">MessageGroup</span> , <span class="ident">MessageDesc</span> , <span class="ident">ArgumentType</span> , <span class="ident">Object</span> , <span class="ident">Message</span> , <span class="ident">Argument</span> , <span class="ident">ObjectMetadata</span> } ; <span class="kw">use</span> <span class="kw">super</span> :: <span class="ident">sys</span> :: <span class="ident">common</span> :: { <span class="ident">wl_argument</span> , <span class="ident">wl_interface</span> , <span class="ident">wl_array</span> } ; <span class="kw">use</span> <span class="kw">super</span> :: <span class="ident">sys</span> :: <span class="ident">client</span> :: <span class="op">*</span> ; <span class="kw">pub</span> <span class="kw">enum</span> <span class="ident">Request</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;destroy the xdg_imported object\n\nNotify the compositor that it will no longer use the xdg_imported\nobject. Any relationship that may have been set up will at this point\nbe invalidated.\n\nThis is a destructor, once sent this object cannot be used any longer.&quot;</span> ] <span class="ident">Destroy</span> , # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;set as the parent of some surface\n\nSet the imported surface as the parent of some surface of the client.\nThe passed surface must be a toplevel xdg_surface. Calling this function\nsets up a surface to surface relation with the same stacking and positioning\nsemantics as xdg_surface.set_parent.&quot;</span> ] <span class="ident">SetParentOf</span> { <span class="ident">surface</span> : <span class="ident">Proxy</span> <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">wl_surface</span> :: <span class="ident">WlSurface</span> <span class="op">&gt;</span> , } , } <span class="kw">impl</span> <span class="kw">super</span> :: <span class="ident">MessageGroup</span> <span class="kw">for</span> <span class="ident">Request</span> { <span class="kw">const</span> <span class="ident">MESSAGES</span> : <span class="op">&amp;</span> <span class="lifetime">&#39;static</span> [ <span class="kw">super</span> :: <span class="ident">MessageDesc</span> ] <span class="op">=</span> <span class="op">&amp;</span> [ <span class="kw">super</span> :: <span class="ident">MessageDesc</span> { <span class="ident">name</span> : <span class="string">&quot;destroy&quot;</span> , <span class="ident">since</span> : <span class="number">1</span> , <span class="ident">signature</span> : <span class="op">&amp;</span> [ ] , } , <span class="kw">super</span> :: <span class="ident">MessageDesc</span> { <span class="ident">name</span> : <span class="string">&quot;set_parent_of&quot;</span> , <span class="ident">since</span> : <span class="number">1</span> , <span class="ident">signature</span> : <span class="op">&amp;</span> [ <span class="kw">super</span> :: <span class="ident">ArgumentType</span> :: <span class="ident">Object</span> , ] , } , ] ; <span class="kw">type</span> <span class="ident">Map</span> <span class="op">=</span> <span class="kw">super</span> :: <span class="ident">ProxyMap</span> ; <span class="kw">fn</span> <span class="ident">is_destructor</span> ( <span class="op">&amp;</span> <span class="self">self</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">bool</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { <span class="ident">Request</span> :: <span class="ident">Destroy</span> <span class="op">=</span><span class="op">&gt;</span> <span class="bool-val">true</span> , <span class="kw">_</span> <span class="op">=</span><span class="op">&gt;</span> <span class="bool-val">false</span> , } } <span class="kw">fn</span> <span class="ident">opcode</span> ( <span class="op">&amp;</span> <span class="self">self</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">u16</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { <span class="ident">Request</span> :: <span class="ident">Destroy</span> <span class="op">=</span><span class="op">&gt;</span> <span class="number">0</span> , <span class="ident">Request</span> :: <span class="ident">SetParentOf</span> { .. } <span class="op">=</span><span class="op">&gt;</span> <span class="number">1</span> , } } <span class="kw">fn</span> <span class="ident">child</span> <span class="op">&lt;</span> <span class="ident">Meta</span> : <span class="ident">ObjectMetadata</span> <span class="op">&gt;</span> ( <span class="ident">opcode</span> : <span class="ident">u16</span> , <span class="ident">version</span> : <span class="ident">u32</span> , <span class="ident">meta</span> : <span class="op">&amp;</span> <span class="ident">Meta</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="ident">Object</span> <span class="op">&lt;</span> <span class="ident">Meta</span> <span class="op">&gt;</span><span class="op">&gt;</span> { <span class="kw">match</span> <span class="ident">opcode</span> { <span class="kw">_</span> <span class="op">=</span><span class="op">&gt;</span> <span class="prelude-val">None</span> , } } <span class="kw">fn</span> <span class="ident">from_raw</span> ( <span class="ident">msg</span> : <span class="ident">Message</span> , <span class="ident">map</span> : <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="self">Self</span> :: <span class="ident">Map</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Result</span> <span class="op">&lt;</span> <span class="self">Self</span> , ( ) <span class="op">&gt;</span> { <span class="ident">panic</span> <span class="op">!</span> ( <span class="string">&quot;Request::from_raw can not be used Client-side.&quot;</span> ) } <span class="kw">fn</span> <span class="ident">into_raw</span> ( <span class="self">self</span> , <span class="ident">sender_id</span> : <span class="ident">u32</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">Message</span> { <span class="kw">match</span> <span class="self">self</span> { <span class="ident">Request</span> :: <span class="ident">Destroy</span> <span class="op">=</span><span class="op">&gt;</span> <span class="ident">Message</span> { <span class="ident">sender_id</span> : <span class="ident">sender_id</span> , <span class="ident">opcode</span> : <span class="number">0</span> , <span class="ident">args</span> : <span class="ident">vec</span> <span class="op">!</span> [ ] , } , <span class="ident">Request</span> :: <span class="ident">SetParentOf</span> { <span class="ident">surface</span> } <span class="op">=</span><span class="op">&gt;</span> <span class="ident">Message</span> { <span class="ident">sender_id</span> : <span class="ident">sender_id</span> , <span class="ident">opcode</span> : <span class="number">1</span> , <span class="ident">args</span> : <span class="ident">vec</span> <span class="op">!</span> [ <span class="ident">Argument</span> :: <span class="ident">Object</span> ( <span class="ident">surface</span> . <span class="ident">id</span> ( ) ) , ] , } , } } <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_raw_c</span> ( <span class="ident">obj</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> , <span class="ident">opcode</span> : <span class="ident">u32</span> , <span class="ident">args</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">wl_argument</span> , ) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Result</span> <span class="op">&lt;</span> <span class="ident">Request</span> , ( ) <span class="op">&gt;</span> { <span class="ident">panic</span> <span class="op">!</span> ( <span class="string">&quot;Request::from_raw_c can not be used Client-side.&quot;</span> ) } <span class="kw">fn</span> <span class="ident">as_raw_c_in</span> <span class="op">&lt;</span> <span class="ident">F</span> , <span class="ident">T</span> <span class="op">&gt;</span> ( <span class="self">self</span> , <span class="ident">f</span> : <span class="ident">F</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">T</span> <span class="kw">where</span> <span class="ident">F</span> : <span class="ident">FnOnce</span> ( <span class="ident">u32</span> , <span class="op">&amp;</span> <span class="kw-2">mut</span> [ <span class="ident">wl_argument</span> ] ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">T</span> { <span class="kw">match</span> <span class="self">self</span> { <span class="ident">Request</span> :: <span class="ident">Destroy</span> <span class="op">=</span><span class="op">&gt;</span> { <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span> : [ <span class="ident">wl_argument</span> ; <span class="number">0</span> ] <span class="op">=</span> <span class="kw">unsafe</span> { :: <span class="ident">std</span> :: <span class="ident">mem</span> :: <span class="ident">zeroed</span> ( ) } ; <span class="ident">f</span> ( <span class="number">0</span> , <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span> ) } , <span class="ident">Request</span> :: <span class="ident">SetParentOf</span> { <span class="ident">surface</span> } <span class="op">=</span><span class="op">&gt;</span> { <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span> : [ <span class="ident">wl_argument</span> ; <span class="number">1</span> ] <span class="op">=</span> <span class="kw">unsafe</span> { :: <span class="ident">std</span> :: <span class="ident">mem</span> :: <span class="ident">zeroed</span> ( ) } ; <span class="ident">_args_array</span> [ <span class="number">0</span> ] . <span class="ident">o</span> <span class="op">=</span> <span class="ident">surface</span> . <span class="ident">c_ptr</span> ( ) <span class="kw">as</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="kw">_</span> ; <span class="ident">f</span> ( <span class="number">1</span> , <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span> ) } , } } } <span class="kw">pub</span> <span class="kw">enum</span> <span class="ident">Event</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;the imported surface handle has been destroyed\n\nThe imported surface handle has been destroyed and any relationship set\nup has been invalidated. This may happen for various reasons, for\nexample if the exported surface or the exported surface handle has been\ndestroyed, if the handle used for importing was invalid.&quot;</span> ] <span class="ident">Destroyed</span> , } <span class="kw">impl</span> <span class="kw">super</span> :: <span class="ident">MessageGroup</span> <span class="kw">for</span> <span class="ident">Event</span> { <span class="kw">const</span> <span class="ident">MESSAGES</span> : <span class="op">&amp;</span> <span class="lifetime">&#39;static</span> [ <span class="kw">super</span> :: <span class="ident">MessageDesc</span> ] <span class="op">=</span> <span class="op">&amp;</span> [ <span class="kw">super</span> :: <span class="ident">MessageDesc</span> { <span class="ident">name</span> : <span class="string">&quot;destroyed&quot;</span> , <span class="ident">since</span> : <span class="number">1</span> , <span class="ident">signature</span> : <span class="op">&amp;</span> [ ] , } , ] ; <span class="kw">type</span> <span class="ident">Map</span> <span class="op">=</span> <span class="kw">super</span> :: <span class="ident">ProxyMap</span> ; <span class="kw">fn</span> <span class="ident">is_destructor</span> ( <span class="op">&amp;</span> <span class="self">self</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">bool</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { <span class="kw">_</span> <span class="op">=</span><span class="op">&gt;</span> <span class="bool-val">false</span> , } } <span class="kw">fn</span> <span class="ident">opcode</span> ( <span class="op">&amp;</span> <span class="self">self</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">u16</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { <span class="ident">Event</span> :: <span class="ident">Destroyed</span> <span class="op">=</span><span class="op">&gt;</span> <span class="number">0</span> , } } <span class="kw">fn</span> <span class="ident">child</span> <span class="op">&lt;</span> <span class="ident">Meta</span> : <span class="ident">ObjectMetadata</span> <span class="op">&gt;</span> ( <span class="ident">opcode</span> : <span class="ident">u16</span> , <span class="ident">version</span> : <span class="ident">u32</span> , <span class="ident">meta</span> : <span class="op">&amp;</span> <span class="ident">Meta</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="ident">Object</span> <span class="op">&lt;</span> <span class="ident">Meta</span> <span class="op">&gt;</span><span class="op">&gt;</span> { <span class="kw">match</span> <span class="ident">opcode</span> { <span class="kw">_</span> <span class="op">=</span><span class="op">&gt;</span> <span class="prelude-val">None</span> , } } <span class="kw">fn</span> <span class="ident">from_raw</span> ( <span class="ident">msg</span> : <span class="ident">Message</span> , <span class="ident">map</span> : <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="self">Self</span> :: <span class="ident">Map</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Result</span> <span class="op">&lt;</span> <span class="self">Self</span> , ( ) <span class="op">&gt;</span> { <span class="kw">match</span> <span class="ident">msg</span> . <span class="ident">opcode</span> { <span class="number">0</span> <span class="op">=</span><span class="op">&gt;</span> <span class="prelude-val">Ok</span> ( <span class="ident">Event</span> :: <span class="ident">Destroyed</span> ) , <span class="kw">_</span> <span class="op">=</span><span class="op">&gt;</span> <span class="prelude-val">Err</span> ( ( ) ) , } } <span class="kw">fn</span> <span class="ident">into_raw</span> ( <span class="self">self</span> , <span class="ident">sender_id</span> : <span class="ident">u32</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">Message</span> { <span class="ident">panic</span> <span class="op">!</span> ( <span class="string">&quot;Event::into_raw can not be used Client-side.&quot;</span> ) } <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_raw_c</span> ( <span class="ident">obj</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> , <span class="ident">opcode</span> : <span class="ident">u32</span> , <span class="ident">args</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">wl_argument</span> , ) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Result</span> <span class="op">&lt;</span> <span class="ident">Event</span> , ( ) <span class="op">&gt;</span> { <span class="kw">match</span> <span class="ident">opcode</span> { <span class="number">0</span> <span class="op">=</span><span class="op">&gt;</span> { <span class="prelude-val">Ok</span> ( <span class="ident">Event</span> :: <span class="ident">Destroyed</span> ) } , <span class="kw">_</span> <span class="op">=</span><span class="op">&gt;</span> <span class="kw">return</span> <span class="prelude-val">Err</span> ( ( ) ) , } } <span class="kw">fn</span> <span class="ident">as_raw_c_in</span> <span class="op">&lt;</span> <span class="ident">F</span> , <span class="ident">T</span> <span class="op">&gt;</span> ( <span class="self">self</span> , <span class="ident">f</span> : <span class="ident">F</span> ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">T</span> <span class="kw">where</span> <span class="ident">F</span> : <span class="ident">FnOnce</span> ( <span class="ident">u32</span> , <span class="op">&amp;</span> <span class="kw-2">mut</span> [ <span class="ident">wl_argument</span> ] ) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">T</span> { <span class="ident">panic</span> <span class="op">!</span> ( <span class="string">&quot;Event::as_raw_c_in can not be used Client-side.&quot;</span> ) } } <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">ZxdgImportedV1</span> ; <span class="kw">impl</span> <span class="ident">Interface</span> <span class="kw">for</span> <span class="ident">ZxdgImportedV1</span> { <span class="kw">type</span> <span class="ident">Request</span> <span class="op">=</span> <span class="ident">Request</span> ; <span class="kw">type</span> <span class="ident">Event</span> <span class="op">=</span> <span class="ident">Event</span> ; <span class="kw">const</span> <span class="ident">NAME</span> : <span class="op">&amp;</span> <span class="lifetime">&#39;static</span> <span class="ident">str</span> <span class="op">=</span> <span class="string">&quot;zxdg_imported_v1&quot;</span> ; <span class="kw">const</span> <span class="ident">VERSION</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">1</span> ; <span class="kw">fn</span> <span class="ident">c_interface</span> ( ) <span class="op">-</span><span class="op">&gt;</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">wl_interface</span> { <span class="kw">unsafe</span> { <span class="op">&amp;</span> <span class="kw">super</span> :: <span class="kw">super</span> :: <span class="ident">c_interfaces</span> :: <span class="ident">zxdg_imported_v1_interface</span> } } } <span class="kw">pub</span> <span class="kw">trait</span> <span class="ident">RequestsTrait</span> { # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;destroy the xdg_imported object\n\nNotify the compositor that it will no longer use the xdg_imported\nobject. Any relationship that may have been set up will at this point\nbe invalidated.\n\nThis is a destructor, you cannot send requests to this object any longer once this method is called.&quot;</span> ] <span class="kw">fn</span> <span class="ident">destroy</span> ( <span class="op">&amp;</span> <span class="self">self</span> , ) <span class="op">-</span><span class="op">&gt;</span> ( ) ; # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;set as the parent of some surface\n\nSet the imported surface as the parent of some surface of the client.\nThe passed surface must be a toplevel xdg_surface. Calling this function\nsets up a surface to surface relation with the same stacking and positioning\nsemantics as xdg_surface.set_parent.&quot;</span> ] <span class="kw">fn</span> <span class="ident">set_parent_of</span> ( <span class="op">&amp;</span> <span class="self">self</span> , <span class="ident">surface</span> : <span class="op">&amp;</span> <span class="ident">Proxy</span> <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">wl_surface</span> :: <span class="ident">WlSurface</span> <span class="op">&gt;</span> ) <span class="op">-</span><span class="op">&gt;</span> ( ) ; } <span class="kw">impl</span> <span class="ident">RequestsTrait</span> <span class="kw">for</span> <span class="ident">Proxy</span> <span class="op">&lt;</span> <span class="ident">ZxdgImportedV1</span> <span class="op">&gt;</span> { <span class="kw">fn</span> <span class="ident">destroy</span> ( <span class="op">&amp;</span> <span class="self">self</span> , ) <span class="op">-</span><span class="op">&gt;</span> ( ) { <span class="kw">let</span> <span class="ident">msg</span> <span class="op">=</span> <span class="ident">Request</span> :: <span class="ident">Destroy</span> ; <span class="self">self</span> . <span class="ident">send</span> ( <span class="ident">msg</span> ) ; } <span class="kw">fn</span> <span class="ident">set_parent_of</span> ( <span class="op">&amp;</span> <span class="self">self</span> , <span class="ident">surface</span> : <span class="op">&amp;</span> <span class="ident">Proxy</span> <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">wl_surface</span> :: <span class="ident">WlSurface</span> <span class="op">&gt;</span> ) <span class="op">-</span><span class="op">&gt;</span> ( ) { <span class="kw">let</span> <span class="ident">msg</span> <span class="op">=</span> <span class="ident">Request</span> :: <span class="ident">SetParentOf</span> { <span class="ident">surface</span> : <span class="ident">surface</span> . <span class="ident">clone</span> ( ) } ; <span class="self">self</span> . <span class="ident">send</span> ( <span class="ident">msg</span> ) ; } } # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; The minimal object version supporting this request&quot;</span> ] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">REQ_DESTROY_SINCE</span> : <span class="ident">u16</span> <span class="op">=</span> <span class="number">1u16</span> ; # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; The minimal object version supporting this request&quot;</span> ] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">REQ_SET_PARENT_OF_SINCE</span> : <span class="ident">u16</span> <span class="op">=</span> <span class="number">1u16</span> ; # [ <span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; The minimal object version supporting this event&quot;</span> ] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">EVT_DESTROYED_SINCE</span> : <span class="ident">u16</span> <span class="op">=</span> <span class="number">1u16</span> ; }</pre></div>
</section><section id="search" class="content hidden"></section><section class="footer"></section><script>window.rootPath = "../../../../../../../../../../../../";window.currentCrate = "wayland_protocols";</script><script src="../../../../../../../../../../../../main.js"></script><script src="../../../../../../../../../../../../source-script.js"></script><script src="../../../../../../../../../../../../source-files.js"></script><script defer src="../../../../../../../../../../../../search-index.js"></script></body></html>